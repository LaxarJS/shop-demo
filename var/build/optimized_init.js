!function(e){"function"==typeof define?define("es5-shim/es5-shim",e):"function"==typeof YUI?YUI.add("es5",e):e()}(function(){function e(){}function t(e){return e=+e,e!==e?e=0:0!==e&&e!==1/0&&e!==-(1/0)&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function n(e){var t=typeof e;return null===e||"undefined"===t||"boolean"===t||"number"===t||"string"===t}function r(e){var t,r,i;if(n(e))return e;if(r=e.valueOf,"function"==typeof r&&(t=r.call(e),n(t)))return t;if(i=e.toString,"function"==typeof i&&(t=i.call(e),n(t)))return t;throw new TypeError}8!==parseInt("08")&&(parseInt=function(e){var t=/^0[xX]/;return function(n,r){return n=String(n).trim(),+r||(r=t.test(n)?16:10),e(n,r)}}(parseInt)),Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if("function"!=typeof n)throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var r=d.call(arguments,1),i=function(){if(this instanceof u){var e=n.apply(this,r.concat(d.call(arguments)));return Object(e)===e?e:this}return n.apply(t,r.concat(d.call(arguments)))},o=Math.max(0,n.length-r.length),a=[],s=0;o>s;s++)a.push("$"+s);var u=Function("binder","return function("+a.join(",")+"){return binder.apply(this,arguments)}")(i);return n.prototype&&(e.prototype=n.prototype,u.prototype=new e,e.prototype=null),u});var i,o,a,s,u,c=Function.prototype.call,l=Array.prototype,f=Object.prototype,d=l.slice,p=c.bind(f.toString),h=c.bind(f.hasOwnProperty);if((u=h(f,"__defineGetter__"))&&(i=c.bind(f.__defineGetter__),o=c.bind(f.__defineSetter__),a=c.bind(f.__lookupGetter__),s=c.bind(f.__lookupSetter__)),2!=[1,2].splice(0).length){var v=Array.prototype.splice,g=Array.prototype.push,m=Array.prototype.unshift;Array.prototype.splice=function(){function e(e){for(var t=[];e--;)t.unshift(e);return t}var t,n=[];return n.splice.bind(n,0,0).apply(null,e(20)),n.splice.bind(n,0,0).apply(null,e(26)),t=n.length,n.splice(5,0,"XXX"),t+1==n.length?!0:void 0}()?function(e,t){return arguments.length?v.apply(this,[void 0===e?0:e,void 0===t?this.length-e:t].concat(d.call(arguments,2))):[]}:function(e,t){var n,r=d.call(arguments,2),i=r.length;if(!arguments.length)return[];if(void 0===e&&(e=0),void 0===t&&(t=this.length-e),i>0){if(0>=t){if(e==this.length)return g.apply(this,r),[];if(0==e)return m.apply(this,r),[]}return n=d.call(this,e,e+t),r.push.apply(r,d.call(this,e+t,this.length)),r.unshift.apply(r,d.call(this,0,e)),r.unshift(0,this.length),v.apply(this,r),n}return v.call(this,e,t)}}if(1!=[].unshift(0)){var m=Array.prototype.unshift;Array.prototype.unshift=function(){return m.apply(this,arguments),this.length}}Array.isArray||(Array.isArray=function(e){return"[object Array]"==p(e)});var y=Object("a"),b="a"!=y[0]||!(0 in y),w=!0;if(Array.prototype.forEach&&Array.prototype.forEach.call("foo",function(e,t,n){"object"!=typeof n&&(w=!1)}),Array.prototype.forEach&&w||(Array.prototype.forEach=function(e){var t=R(this),n=b&&"[object String]"==p(this)?this.split(""):t,r=arguments[1],i=-1,o=n.length>>>0;if("[object Function]"!=p(e))throw new TypeError;for(;++i<o;)i in n&&e.call(r,n[i],i,t)}),Array.prototype.map||(Array.prototype.map=function(e){var t=R(this),n=b&&"[object String]"==p(this)?this.split(""):t,r=n.length>>>0,i=Array(r),o=arguments[1];if("[object Function]"!=p(e))throw new TypeError(e+" is not a function");for(var a=0;r>a;a++)a in n&&(i[a]=e.call(o,n[a],a,t));return i}),Array.prototype.filter||(Array.prototype.filter=function(e){var t,n=R(this),r=b&&"[object String]"==p(this)?this.split(""):n,i=r.length>>>0,o=[],a=arguments[1];if("[object Function]"!=p(e))throw new TypeError(e+" is not a function");for(var s=0;i>s;s++)s in r&&(t=r[s],e.call(a,t,s,n)&&o.push(t));return o}),Array.prototype.every||(Array.prototype.every=function(e){var t=R(this),n=b&&"[object String]"==p(this)?this.split(""):t,r=n.length>>>0,i=arguments[1];if("[object Function]"!=p(e))throw new TypeError(e+" is not a function");for(var o=0;r>o;o++)if(o in n&&!e.call(i,n[o],o,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){var t=R(this),n=b&&"[object String]"==p(this)?this.split(""):t,r=n.length>>>0,i=arguments[1];if("[object Function]"!=p(e))throw new TypeError(e+" is not a function");for(var o=0;r>o;o++)if(o in n&&e.call(i,n[o],o,t))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=R(this),n=b&&"[object String]"==p(this)?this.split(""):t,r=n.length>>>0;if("[object Function]"!=p(e))throw new TypeError(e+" is not a function");if(!r&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var i,o=0;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o++];break}if(++o>=r)throw new TypeError("reduce of empty array with no initial value")}for(;r>o;o++)o in n&&(i=e.call(void 0,i,n[o],o,t));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=R(this),n=b&&"[object String]"==p(this)?this.split(""):t,r=n.length>>>0;if("[object Function]"!=p(e))throw new TypeError(e+" is not a function");if(!r&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i,o=r-1;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}if(0>o)return i;do o in this&&(i=e.call(void 0,i,n[o],o,t));while(o--);return i}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(e){var n=b&&"[object String]"==p(this)?this.split(""):R(this),r=n.length>>>0;if(!r)return-1;var i=0;for(arguments.length>1&&(i=t(arguments[1])),i=i>=0?i:Math.max(0,r+i);r>i;i++)if(i in n&&n[i]===e)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(e){var n=b&&"[object String]"==p(this)?this.split(""):R(this),r=n.length>>>0;if(!r)return-1;var i=r-1;for(arguments.length>1&&(i=Math.min(i,t(arguments[1]))),i=i>=0?i:r-Math.abs(i);i>=0;i--)if(i in n&&e===n[i])return i;return-1}),!Object.keys){var _=!0,x=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],$=x.length;for(var S in{toString:null})_=!1;Object.keys=function q(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var q=[];for(var t in e)h(e,t)&&q.push(t);if(_)for(var n=0,r=$;r>n;n++){var i=x[n];h(e,i)&&q.push(i)}return q}}var E=-621987552e5,T="-000001";Date.prototype.toISOString&&-1!==new Date(E).toISOString().indexOf(T)||(Date.prototype.toISOString=function(){var e,t,n,r,i;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(r=this.getUTCFullYear(),i=this.getUTCMonth(),r+=Math.floor(i/12),i=(i%12+12)%12,e=[i+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],r=(0>r?"-":r>9999?"+":"")+("00000"+Math.abs(r)).slice(r>=0&&9999>=r?-4:-6),t=e.length;t--;)n=e[t],10>n&&(e[t]="0"+n);return r+"-"+e.slice(0,2).join("-")+"T"+e.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"});var k=!1;try{k=Date.prototype.toJSON&&null===new Date(0/0).toJSON()&&-1!==new Date(E).toJSON().indexOf(T)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(A){}k||(Date.prototype.toJSON=function(){var e,t=Object(this),n=r(t);if("number"==typeof n&&!isFinite(n))return null;if(e=t.toISOString,"function"!=typeof e)throw new TypeError("toISOString property is not callable");return e.call(t)}),Date=function(e){function t(n,r,i,o,a,s,u){var c=arguments.length;if(this instanceof e){var l=1==c&&String(n)===n?new e(t.parse(n)):c>=7?new e(n,r,i,o,a,s,u):c>=6?new e(n,r,i,o,a,s):c>=5?new e(n,r,i,o,a):c>=4?new e(n,r,i,o):c>=3?new e(n,r,i):c>=2?new e(n,r):c>=1?new e(n):new e;return l.constructor=t,l}return e.apply(this,arguments)}function n(e,t){var n=t>1?1:0;return o[t]+Math.floor((e-1969+n)/4)-Math.floor((e-1901+n)/100)+Math.floor((e-1601+n)/400)+365*(e-1970)}function r(t){return Number(new e(1970,0,1,0,0,0,t))}var i=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),o=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var a in e)t[a]=e[a];return t.now=e.now,t.UTC=e.UTC,t.prototype=e.prototype,t.prototype.constructor=t,t.parse=function(t){var o=i.exec(t);if(o){var a,s=Number(o[1]),u=Number(o[2]||1)-1,c=Number(o[3]||1)-1,l=Number(o[4]||0),f=Number(o[5]||0),d=Number(o[6]||0),p=Math.floor(1e3*Number(o[7]||0)),h=Boolean(o[4]&&!o[8]),v="-"===o[9]?1:-1,g=Number(o[10]||0),m=Number(o[11]||0);return(f>0||d>0||p>0?24:25)>l&&60>f&&60>d&&1e3>p&&u>-1&&12>u&&24>g&&60>m&&c>-1&&c<n(s,u+1)-n(s,u)&&(a=60*(24*(n(s,u)+c)+l+g*v),a=1e3*(60*(a+f+m*v)+d)+p,h&&(a=r(a)),a>=-864e13&&864e13>=a)?a:0/0}return e.parse.apply(this,arguments)},t}(Date),Date.now||(Date.now=function(){return(new Date).getTime()}),Number.prototype.toFixed&&"0.000"===8e-5.toFixed(3)&&"0"!==.9.toFixed(0)&&"1.25"===1.255.toFixed(2)&&"1000000000000000128"===0xde0b6b3a7640080.toFixed(0)||!function(){function e(e,t){for(var n=-1;++n<a;)t+=e*s[n],s[n]=t%o,t=Math.floor(t/o)}function t(e){for(var t=a,n=0;--t>=0;)n+=s[t],s[t]=Math.floor(n/e),n=n%e*o}function n(){for(var e=a,t="";--e>=0;)if(""!==t||0===e||0!==s[e]){var n=String(s[e]);""===t?t=n:t+="0000000".slice(0,7-n.length)+n}return t}function r(e,t,n){return 0===t?n:t%2===1?r(e,t-1,n*e):r(e*e,t/2,n)}function i(e){for(var t=0;e>=4096;)t+=12,e/=4096;for(;e>=2;)t+=1,e/=2;return t}var o,a,s;o=1e7,a=6,s=[0,0,0,0,0,0],Number.prototype.toFixed=function(o){var a,s,u,c,l,f,d,p;if(a=Number(o),a=a!==a?0:Math.floor(a),0>a||a>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(s=Number(this),s!==s)return"NaN";if(-1e21>=s||s>=1e21)return String(s);if(u="",0>s&&(u="-",s=-s),c="0",s>1e-21)if(l=i(s*r(2,69,1))-69,f=0>l?s*r(2,-l,1):s/r(2,l,1),f*=4503599627370496,l=52-l,l>0){for(e(0,f),d=a;d>=7;)e(1e7,0),d-=7;for(e(r(10,d,1),0),d=l-1;d>=23;)t(1<<23),d-=23;t(1<<d),e(1,1),t(2),c=n()}else e(0,f),e(1<<-l,0),c=n()+"0.00000000000000000000".slice(2,2+a);return a>0?(p=c.length,c=a>=p?u+"0.0000000000000000000".slice(0,a-p+2)+c:u+c.slice(0,p-a)+"."+c.slice(p-a)):c=u+c,c}}();var C=String.prototype.split;if(2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var e=void 0===/()??/.exec("")[1];String.prototype.split=function(t,n){var r=this;if(void 0===t&&0===n)return[];if("[object RegExp]"!==Object.prototype.toString.call(t))return C.apply(this,arguments);var i,o,a,s,u=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),l=0,t=new RegExp(t.source,c+"g");for(r+="",e||(i=new RegExp("^"+t.source+"$(?!\\s)",c)),n=void 0===n?-1>>>0:n>>>0;(o=t.exec(r))&&(a=o.index+o[0].length,!(a>l&&(u.push(r.slice(l,o.index)),!e&&o.length>1&&o[0].replace(i,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(o[e]=void 0)}),o.length>1&&o.index<r.length&&Array.prototype.push.apply(u,o.slice(1)),s=o[0].length,l=a,u.length>=n)));)t.lastIndex===o.index&&t.lastIndex++;return l===r.length?(s||!t.test(""))&&u.push(""):u.push(r.slice(l)),u.length>n?u.slice(0,n):u}}():"0".split(void 0,0).length&&(String.prototype.split=function(e,t){return void 0===e&&0===t?[]:C.apply(this,arguments)}),"".substr&&"b"!=="0b".substr(-1)){var O=String.prototype.substr;String.prototype.substr=function(e,t){return O.call(this,0>e&&(e=this.length+e)<0?0:e,t)}}var j="	\n\f\r   ᠎             　\u2028\u2029﻿";if(!String.prototype.trim||j.trim()){j="["+j+"]";var N=new RegExp("^"+j+j+"*"),D=new RegExp(j+j+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(N,"").replace(D,"")}}var R=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)}}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=it.type(e);return"function"===n||it.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(it.isFunction(t))return it.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return it.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(dt.test(t))return it.filter(t,e,n);t=it.filter(t,e)}return it.grep(e,function(e){return it.inArray(e,t)>=0!==n})}function i(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function o(e){var t=wt[e]={};return it.each(e.match(bt)||[],function(e,n){t[n]=!0}),t}function a(){ht.addEventListener?(ht.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(ht.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(ht.addEventListener||"load"===event.type||"complete"===ht.readyState)&&(a(),it.ready())}function u(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(Et,"-$1").toLowerCase();if(n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:St.test(n)?it.parseJSON(n):n}catch(i){}it.data(e,t,n)}else n=void 0}return n}function c(e){var t;for(t in e)if(("data"!==t||!it.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(e,t,n,r){if(it.acceptData(e)){var i,o,a=it.expando,s=e.nodeType,u=s?it.cache:e,c=s?e[a]:e[a]&&a;if(c&&u[c]&&(r||u[c].data)||void 0!==n||"string"!=typeof t)return c||(c=s?e[a]=G.pop()||it.guid++:a),u[c]||(u[c]=s?{}:{toJSON:it.noop}),("object"==typeof t||"function"==typeof t)&&(r?u[c]=it.extend(u[c],t):u[c].data=it.extend(u[c].data,t)),o=u[c],r||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[it.camelCase(t)]=n),"string"==typeof t?(i=o[t],null==i&&(i=o[it.camelCase(t)])):i=o,i}}function f(e,t,n){if(it.acceptData(e)){var r,i,o=e.nodeType,a=o?it.cache:e,s=o?e[it.expando]:it.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){it.isArray(t)?t=t.concat(it.map(t,it.camelCase)):t in r?t=[t]:(t=it.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;for(;i--;)delete r[t[i]];if(n?!c(r):!it.isEmptyObject(r))return}(n||(delete a[s].data,c(a[s])))&&(o?it.cleanData([e],!0):nt.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function d(){return!0}function p(){return!1}function h(){try{return ht.activeElement}catch(e){}}function v(e){var t=Lt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function g(e,t){var n,r,i=0,o=typeof e.getElementsByTagName!==$t?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==$t?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||it.nodeName(r,t)?o.push(r):it.merge(o,g(r,t));return void 0===t||t&&it.nodeName(e,t)?it.merge([e],o):o}function m(e){Ot.test(e.type)&&(e.defaultChecked=e.checked)}function y(e,t){return it.nodeName(e,"table")&&it.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==it.find.attr(e,"type"))+"/"+e.type,e}function w(e){var t=Jt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _(e,t){for(var n,r=0;null!=(n=e[r]);r++)it._data(n,"globalEval",!t||it._data(t[r],"globalEval"))}function x(e,t){if(1===t.nodeType&&it.hasData(e)){var n,r,i,o=it._data(e),a=it._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)it.event.add(t,n,s[n][r])}a.data&&(a.data=it.extend({},a.data))}}function $(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!nt.noCloneEvent&&t[it.expando]){i=it._data(t);for(r in i.events)it.removeEvent(t,r,i.handle);t.removeAttribute(it.expando)}"script"===n&&t.text!==e.text?(b(t).text=e.text,w(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),nt.html5Clone&&e.innerHTML&&!it.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ot.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function S(t,n){var r,i=it(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:it.css(i[0],"display");return i.detach(),o}function E(e){var t=ht,n=Yt[e];return n||(n=S(e,t),"none"!==n&&n||(Zt=(Zt||it("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Zt[0].contentWindow||Zt[0].contentDocument).document,t.write(),t.close(),n=S(e,t),Zt.detach()),Yt[e]=n),n}function T(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function k(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=pn.length;i--;)if(t=pn[i]+n,t in e)return t;return r}function A(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=it._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&At(r)&&(o[a]=it._data(r,"olddisplay",E(r.nodeName)))):(i=At(r),(n&&"none"!==n||!i)&&it._data(r,"olddisplay",i?n:it.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function C(e,t,n){var r=cn.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function O(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=it.css(e,n+kt[o],!0,i)),r?("content"===n&&(a-=it.css(e,"padding"+kt[o],!0,i)),"margin"!==n&&(a-=it.css(e,"border"+kt[o]+"Width",!0,i))):(a+=it.css(e,"padding"+kt[o],!0,i),"padding"!==n&&(a+=it.css(e,"border"+kt[o]+"Width",!0,i)));return a}function j(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=en(e),a=nt.boxSizing&&"border-box"===it.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=tn(e,t,o),(0>i||null==i)&&(i=e.style[t]),rn.test(i))return i;r=a&&(nt.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+O(e,t,n||(a?"border":"content"),r,o)+"px"}function N(e,t,n,r,i){return new N.prototype.init(e,t,n,r,i)}function D(){return setTimeout(function(){hn=void 0}),hn=it.now()}function R(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=kt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function q(e,t,n){for(var r,i=(wn[t]||[]).concat(wn["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function L(e,t,n){var r,i,o,a,s,u,c,l,f=this,d={},p=e.style,h=e.nodeType&&At(e),v=it._data(e,"fxshow");n.queue||(s=it._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,it.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=it.css(e,"display"),l="none"===c?it._data(e,"olddisplay")||E(e.nodeName):c,"inline"===l&&"none"===it.css(e,"float")&&(nt.inlineBlockNeedsLayout&&"inline"!==E(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",nt.shrinkWrapBlocks()||f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],gn.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;h=!0}d[r]=v&&v[r]||it.style(e,r)}else c=void 0;if(it.isEmptyObject(d))"inline"===("none"===c?E(e.nodeName):c)&&(p.display=c);else{v?"hidden"in v&&(h=v.hidden):v=it._data(e,"fxshow",{}),o&&(v.hidden=!h),h?it(e).show():f.done(function(){it(e).hide()}),f.done(function(){var t;it._removeData(e,"fxshow");for(t in d)it.style(e,t,d[t])});for(r in d)a=q(h?v[r]:0,r,f),r in v||(v[r]=a.start,h&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function P(e,t){var n,r,i,o,a;for(n in e)if(r=it.camelCase(n),i=t[r],o=e[n],it.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=it.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function I(e,t,n){var r,i,o=0,a=bn.length,s=it.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=hn||D(),n=Math.max(0,c.startTime+c.duration-t),r=n/c.duration||0,o=1-r,a=0,u=c.tweens.length;u>a;a++)c.tweens[a].run(o);return s.notifyWith(e,[c,o,n]),1>o&&u?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:it.extend({},t),opts:it.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:hn||D(),duration:n.duration,tweens:[],createTween:function(t,n){var r=it.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)c.tweens[n].run(1);return t?s.resolveWith(e,[c,t]):s.rejectWith(e,[c,t]),this}}),l=c.props;for(P(l,c.opts.specialEasing);a>o;o++)if(r=bn[o].call(c,e,l,c.opts))return r;return it.map(l,q,c),it.isFunction(c.opts.start)&&c.opts.start.call(e,c),it.fx.timer(it.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function F(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(bt)||[];if(it.isFunction(n))for(;r=o[i++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function M(e,t,n,r){function i(s){var u;return o[s]=!0,it.each(e[s]||[],function(e,s){var c=s(t,n,r);return"string"!=typeof c||a||o[c]?a?!(u=c):void 0:(t.dataTypes.unshift(c),i(c),!1)}),u}var o={},a=e===zn;return i(t.dataTypes[0])||!o["*"]&&i("*")}function B(e,t){var n,r,i=it.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&it.extend(!0,e,n),e}function U(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){u.unshift(a);break}if(u[0]in n)o=u[0];else{for(a in n){if(!u[0]||e.converters[a+" "+u[0]]){o=a;break}r||(r=a)}o=o||r}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function H(e,t,n,r){var i,o,a,s,u,c={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=c[u+" "+o]||c["* "+o],!a)for(i in c)if(s=i.split(" "),s[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[i]:c[i]!==!0&&(o=s[0],l.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(f){return{state:"parsererror",error:a?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function z(e,t,n,r){var i;if(it.isArray(t))it.each(t,function(t,i){n||Gn.test(e)?r(e,i):z(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==it.type(t))r(e,t);else for(i in t)z(e+"["+i+"]",t[i],n,r)}function V(){try{return new e.XMLHttpRequest}catch(t){}}function W(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function J(e){return it.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var G=[],X=G.slice,K=G.concat,Q=G.push,Z=G.indexOf,Y={},et=Y.toString,tt=Y.hasOwnProperty,nt={},rt="1.11.1",it=function(e,t){return new it.fn.init(e,t)},ot=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,at=/^-ms-/,st=/-([\da-z])/gi,ut=function(e,t){return t.toUpperCase()};it.fn=it.prototype={jquery:rt,constructor:it,selector:"",length:0,toArray:function(){return X.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:X.call(this)},pushStack:function(e){var t=it.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return it.each(this,e,t)},map:function(e){return this.pushStack(it.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Q,sort:G.sort,splice:G.splice},it.extend=it.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||it.isFunction(a)||(a={}),s===u&&(a=this,s--);u>s;s++)if(null!=(i=arguments[s]))for(r in i)e=a[r],n=i[r],a!==n&&(c&&n&&(it.isPlainObject(n)||(t=it.isArray(n)))?(t?(t=!1,o=e&&it.isArray(e)?e:[]):o=e&&it.isPlainObject(e)?e:{},a[r]=it.extend(c,o,n)):void 0!==n&&(a[r]=n));return a},it.extend({expando:"jQuery"+(rt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===it.type(e)},isArray:Array.isArray||function(e){return"array"===it.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!it.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==it.type(e)||e.nodeType||it.isWindow(e))return!1;try{if(e.constructor&&!tt.call(e,"constructor")&&!tt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(nt.ownLast)for(t in e)return tt.call(e,t);for(t in e);return void 0===t||tt.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Y[et.call(e)]||"object":typeof e},globalEval:function(t){t&&it.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(at,"ms-").replace(st,ut)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,a=e.length,s=n(e);if(r){if(s)for(;a>o&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(s)for(;a>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ot,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?it.merge(r,"string"==typeof e?[e]:e):Q.call(r,e)),r},inArray:function(e,t,n){var r;if(t){if(Z)return Z.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;)e[i++]=t[r++];if(n!==n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;a>o;o++)r=!t(e[o],o),r!==s&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,a=e.length,s=n(e),u=[];if(s)for(;a>o;o++)i=t(e[o],o,r),null!=i&&u.push(i);else for(o in e)i=t(e[o],o,r),null!=i&&u.push(i);return K.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(i=e[t],t=e,e=i),it.isFunction(e)?(n=X.call(arguments,2),r=function(){return e.apply(t||this,n.concat(X.call(arguments)))},r.guid=e.guid=e.guid||it.guid++,r):void 0},now:function(){return+new Date},support:nt}),it.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Y["[object "+t+"]"]=t.toLowerCase()});var ct=function(e){function t(e,t,n,r){var i,o,a,s,u,c,f,p,h,v;if((t?t.ownerDocument||t:M)!==N&&j(t),t=t||N,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(R&&!r){if(i=yt.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&I(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return Y.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&_.getElementsByClassName&&t.getElementsByClassName)return Y.apply(n,t.getElementsByClassName(a)),n}if(_.qsa&&(!q||!q.test(e))){if(p=f=F,h=t,v=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(c=E(e),(f=t.getAttribute("id"))?p=f.replace(wt,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",u=c.length;u--;)c[u]=p+d(c[u]);h=bt.test(e)&&l(t.parentNode)||t,v=c.join(",")}if(v)try{return Y.apply(n,h.querySelectorAll(v)),n}catch(g){}finally{f||t.removeAttribute("id")}}}return k(e.replace(ut,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[F]=!0,e}function i(e){var t=N.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)x.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function l(e){return e&&typeof e.getElementsByTagName!==J&&e}function f(){}function d(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=U++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,u,c=[B,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(u=t[F]||(t[F]={}),(s=u[r])&&s[0]===B&&s[1]===o)return c[2]=s[2];if(u[r]=c,c[2]=e(t,n,a))return!0}}}function h(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function v(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function g(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,c=null!=t;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),c&&t.push(s));return a}function m(e,t,n,i,o,a){return i&&!i[F]&&(i=m(i)),o&&!o[F]&&(o=m(o,a)),r(function(r,a,s,u){var c,l,f,d=[],p=[],h=a.length,m=r||v(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?m:g(m,d,e,s,u),b=n?o||(r?e:h||i)?[]:a:y;if(n&&n(y,b,s,u),i)for(c=g(b,p),i(c,[],s,u),l=c.length;l--;)(f=c[l])&&(b[p[l]]=!(y[p[l]]=f));if(r){if(o||e){if(o){for(c=[],l=b.length;l--;)(f=b[l])&&c.push(y[l]=f);o(null,b=[],c,u)}for(l=b.length;l--;)(f=b[l])&&(c=o?tt.call(r,f):d[l])>-1&&(r[c]=!(a[c]=f))}}else b=g(b===a?b.splice(h,b.length):b),o?o(null,a,b,u):Y.apply(a,b)})}function y(e){for(var t,n,r,i=e.length,o=x.relative[e[0].type],a=o||x.relative[" "],s=o?1:0,u=p(function(e){return e===t},a,!0),c=p(function(e){return tt.call(t,e)>-1},a,!0),l=[function(e,n,r){return!o&&(r||n!==A)||((t=n).nodeType?u(e,n,r):c(e,n,r))}];i>s;s++)if(n=x.relative[e[s].type])l=[p(h(l),n)];else{if(n=x.filter[e[s].type].apply(null,e[s].matches),n[F]){for(r=++s;i>r&&!x.relative[e[r].type];r++);return m(s>1&&h(l),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ut,"$1"),n,r>s&&y(e.slice(s,r)),i>r&&y(e=e.slice(r)),i>r&&d(e))}l.push(n)}return h(l)}function b(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,u,c){var l,f,d,p=0,h="0",v=r&&[],m=[],y=A,b=r||o&&x.find.TAG("*",c),w=B+=null==y?1:Math.random()||.1,_=b.length;for(c&&(A=a!==N&&a);h!==_&&null!=(l=b[h]);h++){if(o&&l){for(f=0;d=e[f++];)if(d(l,a,s)){u.push(l);break}c&&(B=w)}i&&((l=!d&&l)&&p--,r&&v.push(l))}if(p+=h,i&&h!==p){for(f=0;d=n[f++];)d(v,m,a,s);if(r){if(p>0)for(;h--;)v[h]||m[h]||(m[h]=Q.call(u));m=g(m)}Y.apply(u,m),c&&!r&&m.length>0&&p+n.length>1&&t.uniqueSort(u)}return c&&(B=w,A=y),v};return i?r(a):a}var w,_,x,$,S,E,T,k,A,C,O,j,N,D,R,q,L,P,I,F="sizzle"+-new Date,M=e.document,B=0,U=0,H=n(),z=n(),V=n(),W=function(e,t){return e===t&&(O=!0),0},J="undefined",G=1<<31,X={}.hasOwnProperty,K=[],Q=K.pop,Z=K.push,Y=K.push,et=K.slice,tt=K.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;
return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",rt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=it.replace("w","w#"),at="\\["+rt+"*("+it+")(?:"+rt+"*([*^$|!~]?=)"+rt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+rt+"*\\]",st=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+at+")*)|.*)\\)|)",ut=new RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),ct=new RegExp("^"+rt+"*,"+rt+"*"),lt=new RegExp("^"+rt+"*([>+~]|"+rt+")"+rt+"*"),ft=new RegExp("="+rt+"*([^\\]'\"]*?)"+rt+"*\\]","g"),dt=new RegExp(st),pt=new RegExp("^"+ot+"$"),ht={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it.replace("w","w*")+")"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},vt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,wt=/'|\\/g,_t=new RegExp("\\\\([\\da-f]{1,6}"+rt+"?|("+rt+")|.)","ig"),xt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Y.apply(K=et.call(M.childNodes),M.childNodes),K[M.childNodes.length].nodeType}catch($t){Y={apply:K.length?function(e,t){Z.apply(e,et.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}_=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},j=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:M,r=n.defaultView;return n!==N&&9===n.nodeType&&n.documentElement?(N=n,D=n.documentElement,R=!S(n),r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",function(){j()},!1):r.attachEvent&&r.attachEvent("onunload",function(){j()})),_.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),_.getElementsByTagName=i(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),_.getElementsByClassName=mt.test(n.getElementsByClassName)&&i(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),_.getById=i(function(e){return D.appendChild(e).id=F,!n.getElementsByName||!n.getElementsByName(F).length}),_.getById?(x.find.ID=function(e,t){if(typeof t.getElementById!==J&&R){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(e){var t=e.replace(_t,xt);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(_t,xt);return function(e){var n=typeof e.getAttributeNode!==J&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=_.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==J?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},x.find.CLASS=_.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==J&&R?t.getElementsByClassName(e):void 0},L=[],q=[],(_.qsa=mt.test(n.querySelectorAll))&&(i(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+rt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||q.push("\\["+rt+"*(?:value|"+nt+")"),e.querySelectorAll(":checked").length||q.push(":checked")}),i(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&q.push("name"+rt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),q.push(",.*:")})),(_.matchesSelector=mt.test(P=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&i(function(e){_.disconnectedMatch=P.call(e,"div"),P.call(e,"[s!='']:x"),L.push("!=",st)}),q=q.length&&new RegExp(q.join("|")),L=L.length&&new RegExp(L.join("|")),t=mt.test(D.compareDocumentPosition),I=t||mt.test(D.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return O=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!_.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===M&&I(M,e)?-1:t===n||t.ownerDocument===M&&I(M,t)?1:C?tt.call(C,e)-tt.call(C,t):0:4&r?-1:1)}:function(e,t){if(e===t)return O=!0,0;var r,i=0,o=e.parentNode,s=t.parentNode,u=[e],c=[t];if(!o||!s)return e===n?-1:t===n?1:o?-1:s?1:C?tt.call(C,e)-tt.call(C,t):0;if(o===s)return a(e,t);for(r=e;r=r.parentNode;)u.unshift(r);for(r=t;r=r.parentNode;)c.unshift(r);for(;u[i]===c[i];)i++;return i?a(u[i],c[i]):u[i]===M?-1:c[i]===M?1:0},n):N},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==N&&j(e),n=n.replace(ft,"='$1']"),!(!_.matchesSelector||!R||L&&L.test(n)||q&&q.test(n)))try{var r=P.call(e,n);if(r||_.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,N,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==N&&j(e),I(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==N&&j(e);var n=x.attrHandle[t.toLowerCase()],r=n&&X.call(x.attrHandle,t.toLowerCase())?n(e,t,!R):void 0;return void 0!==r?r:_.attributes||!R?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(O=!_.detectDuplicates,C=!_.sortStable&&e.slice(0),e.sort(W),O){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return C=null,e},$=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=$(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=$(t);return n},x=t.selectors={cacheLength:50,createPseudo:r,match:ht,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_t,xt),e[3]=(e[3]||e[4]||e[5]||"").replace(_t,xt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return ht.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&dt.test(n)&&(t=E(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_t,xt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+rt+")"+e+"("+rt+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==J&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var c,l,f,d,p,h,v=o!==a?"nextSibling":"previousSibling",g=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!u&&!s;if(g){if(o){for(;v;){for(f=t;f=f[v];)if(s?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;h=v="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&y){for(l=g[F]||(g[F]={}),c=l[e]||[],p=c[0]===B&&c[1],d=c[0]===B&&c[2],f=p&&g.childNodes[p];f=++p&&f&&f[v]||(d=p=0)||h.pop();)if(1===f.nodeType&&++d&&f===t){l[e]=[B,p,d];break}}else if(y&&(c=(t[F]||(t[F]={}))[e])&&c[0]===B)d=c[1];else for(;(f=++p&&f&&f[v]||(d=p=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++d||(y&&((f[F]||(f[F]={}))[e]=[B,d]),f!==t)););return d-=i,d===r||d%r===0&&d/r>=0}}},PSEUDO:function(e,n){var i,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[F]?o(n):o.length>1?(i=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=tt.call(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=T(e.replace(ut,"$1"));return i[F]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||$(t)).indexOf(e)>-1}}),lang:r(function(e){return pt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(_t,xt).toLowerCase(),function(t){var n;do if(n=R?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===D},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return vt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:c(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},x.pseudos.nth=x.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})x.pseudos[w]=u(w);return f.prototype=x.filters=x.pseudos,x.setFilters=new f,E=t.tokenize=function(e,n){var r,i,o,a,s,u,c,l=z[e+" "];if(l)return n?0:l.slice(0);for(s=e,u=[],c=x.preFilter;s;){(!r||(i=ct.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=lt.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ut," ")}),s=s.slice(r.length));for(a in x.filter)!(i=ht[a].exec(s))||c[a]&&!(i=c[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):z(e,u).slice(0)},T=t.compile=function(e,t){var n,r=[],i=[],o=V[e+" "];if(!o){for(t||(t=E(e)),n=t.length;n--;)o=y(t[n]),o[F]?r.push(o):i.push(o);o=V(e,b(i,r)),o.selector=e}return o},k=t.select=function(e,t,n,r){var i,o,a,s,u,c="function"==typeof e&&e,f=!r&&E(e=c.selector||e);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&_.getById&&9===t.nodeType&&R&&x.relative[o[1].type]){if(t=(x.find.ID(a.matches[0].replace(_t,xt),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=ht.needsContext.test(e)?0:o.length;i--&&(a=o[i],!x.relative[s=a.type]);)if((u=x.find[s])&&(r=u(a.matches[0].replace(_t,xt),bt.test(o[0].type)&&l(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&d(o),!e)return Y.apply(n,r),n;break}}return(c||T(e,f))(r,t,!R,n,bt.test(e)&&l(t.parentNode)||t),n},_.sortStable=F.split("").sort(W).join("")===F,_.detectDuplicates=!!O,j(),_.sortDetached=i(function(e){return 1&e.compareDocumentPosition(N.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),_.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(nt,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);it.find=ct,it.expr=ct.selectors,it.expr[":"]=it.expr.pseudos,it.unique=ct.uniqueSort,it.text=ct.getText,it.isXMLDoc=ct.isXML,it.contains=ct.contains;var lt=it.expr.match.needsContext,ft=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,dt=/^.[^:#\[\.,]*$/;it.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?it.find.matchesSelector(r,e)?[r]:[]:it.find.matches(e,it.grep(t,function(e){return 1===e.nodeType}))},it.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(it(e).filter(function(){for(t=0;i>t;t++)if(it.contains(r[t],this))return!0}));for(t=0;i>t;t++)it.find(e,r[t],n);return n=this.pushStack(i>1?it.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&lt.test(e)?it(e):e||[],!1).length}});var pt,ht=e.document,vt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,gt=it.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:vt.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||pt).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof it?t[0]:t,it.merge(this,it.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:ht,!0)),ft.test(n[1])&&it.isPlainObject(t))for(n in t)it.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(r=ht.getElementById(n[2]),r&&r.parentNode){if(r.id!==n[2])return pt.find(e);this.length=1,this[0]=r}return this.context=ht,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):it.isFunction(e)?"undefined"!=typeof pt.ready?pt.ready(e):e(it):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),it.makeArray(e,this))};gt.prototype=it.fn,pt=it(ht);var mt=/^(?:parents|prev(?:Until|All))/,yt={children:!0,contents:!0,next:!0,prev:!0};it.extend({dir:function(e,t,n){for(var r=[],i=e[t];i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!it(i).is(n));)1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),it.fn.extend({has:function(e){var t,n=it(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(it.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=lt.test(e)||"string"!=typeof e?it(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&it.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?it.unique(o):o)},index:function(e){return e?"string"==typeof e?it.inArray(this[0],it(e)):it.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(it.unique(it.merge(this.get(),it(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),it.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return it.dir(e,"parentNode")},parentsUntil:function(e,t,n){return it.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return it.dir(e,"nextSibling")},prevAll:function(e){return it.dir(e,"previousSibling")},nextUntil:function(e,t,n){return it.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return it.dir(e,"previousSibling",n)},siblings:function(e){return it.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return it.sibling(e.firstChild)},contents:function(e){return it.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:it.merge([],e.childNodes)}},function(e,t){it.fn[e]=function(n,r){var i=it.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=it.filter(r,i)),this.length>1&&(yt[e]||(i=it.unique(i)),mt.test(e)&&(i=i.reverse())),this.pushStack(i)}});var bt=/\S+/g,wt={};it.Callbacks=function(e){e="string"==typeof e?wt[e]||o(e):it.extend({},e);var t,n,r,i,a,s,u=[],c=!e.once&&[],l=function(o){for(n=e.memory&&o,r=!0,a=s||0,s=0,i=u.length,t=!0;u&&i>a;a++)if(u[a].apply(o[0],o[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,u&&(c?c.length&&l(c.shift()):n?u=[]:f.disable())},f={add:function(){if(u){var r=u.length;!function o(t){it.each(t,function(t,n){var r=it.type(n);"function"===r?e.unique&&f.has(n)||u.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),t?i=u.length:n&&(s=r,l(n))}return this},remove:function(){return u&&it.each(arguments,function(e,n){for(var r;(r=it.inArray(n,u,r))>-1;)u.splice(r,1),t&&(i>=r&&i--,a>=r&&a--)}),this},has:function(e){return e?it.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],i=0,this},disable:function(){return u=c=n=void 0,this},disabled:function(){return!u},lock:function(){return c=void 0,n||f.disable(),this},locked:function(){return!c},fireWith:function(e,n){return!u||r&&!c||(n=n||[],n=[e,n.slice?n.slice():n],t?c.push(n):l(n)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},it.extend({Deferred:function(e){var t=[["resolve","done",it.Callbacks("once memory"),"resolved"],["reject","fail",it.Callbacks("once memory"),"rejected"],["notify","progress",it.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return it.Deferred(function(n){it.each(t,function(t,o){var a=it.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&it.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?it.extend(e,r):r}},i={};return r.pipe=r.then,it.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=X.call(arguments),a=o.length,s=1!==a||e&&it.isFunction(e.promise)?a:0,u=1===s?e:it.Deferred(),c=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?X.call(arguments):i,r===t?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);a>i;i++)o[i]&&it.isFunction(o[i].promise)?o[i].promise().done(c(i,r,o)).fail(u.reject).progress(c(i,n,t)):--s;return s||u.resolveWith(r,o),u.promise()}});var _t;it.fn.ready=function(e){return it.ready.promise().done(e),this},it.extend({isReady:!1,readyWait:1,holdReady:function(e){e?it.readyWait++:it.ready(!0)},ready:function(e){if(e===!0?!--it.readyWait:!it.isReady){if(!ht.body)return setTimeout(it.ready);it.isReady=!0,e!==!0&&--it.readyWait>0||(_t.resolveWith(ht,[it]),it.fn.triggerHandler&&(it(ht).triggerHandler("ready"),it(ht).off("ready")))}}}),it.ready.promise=function(t){if(!_t)if(_t=it.Deferred(),"complete"===ht.readyState)setTimeout(it.ready);else if(ht.addEventListener)ht.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1);else{ht.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var n=!1;try{n=null==e.frameElement&&ht.documentElement}catch(r){}n&&n.doScroll&&!function i(){if(!it.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}a(),it.ready()}}()}return _t.promise(t)};var xt,$t="undefined";for(xt in it(nt))break;nt.ownLast="0"!==xt,nt.inlineBlockNeedsLayout=!1,it(function(){var e,t,n,r;n=ht.getElementsByTagName("body")[0],n&&n.style&&(t=ht.createElement("div"),r=ht.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==$t&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",nt.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=ht.createElement("div");if(null==nt.deleteExpando){nt.deleteExpando=!0;try{delete e.test}catch(t){nt.deleteExpando=!1}}e=null}(),it.acceptData=function(e){var t=it.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var St=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Et=/([A-Z])/g;it.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?it.cache[e[it.expando]]:e[it.expando],!!e&&!c(e)},data:function(e,t,n){return l(e,t,n)},removeData:function(e,t){return f(e,t)},_data:function(e,t,n){return l(e,t,n,!0)},_removeData:function(e,t){return f(e,t,!0)}}),it.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=it.data(o),1===o.nodeType&&!it._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=it.camelCase(r.slice(5)),u(o,r,i[r])));it._data(o,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){it.data(this,e)}):arguments.length>1?this.each(function(){it.data(this,e,t)}):o?u(o,e,it.data(o,e)):void 0},removeData:function(e){return this.each(function(){it.removeData(this,e)})}}),it.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=it._data(e,t),n&&(!r||it.isArray(n)?r=it._data(e,t,it.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=it.queue(e,t),r=n.length,i=n.shift(),o=it._queueHooks(e,t),a=function(){it.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return it._data(e,n)||it._data(e,n,{empty:it.Callbacks("once memory").add(function(){it._removeData(e,t+"queue"),it._removeData(e,n)})})}}),it.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?it.queue(this[0],e):void 0===t?this:this.each(function(){var n=it.queue(this,e,t);it._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&it.dequeue(this,e)})},dequeue:function(e){return this.each(function(){it.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=it.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=it._data(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,kt=["Top","Right","Bottom","Left"],At=function(e,t){return e=t||e,"none"===it.css(e,"display")||!it.contains(e.ownerDocument,e)},Ct=it.access=function(e,t,n,r,i,o,a){var s=0,u=e.length,c=null==n;if("object"===it.type(n)){i=!0;for(s in n)it.access(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,it.isFunction(r)||(a=!0),c&&(a?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(it(e),n)})),t))for(;u>s;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:c?t.call(e):u?t(e[0],n):o},Ot=/^(?:checkbox|radio)$/i;!function(){var e=ht.createElement("input"),t=ht.createElement("div"),n=ht.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",nt.leadingWhitespace=3===t.firstChild.nodeType,nt.tbody=!t.getElementsByTagName("tbody").length,nt.htmlSerialize=!!t.getElementsByTagName("link").length,nt.html5Clone="<:nav></:nav>"!==ht.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),nt.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",nt.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,nt.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){nt.noCloneEvent=!1}),t.cloneNode(!0).click()),null==nt.deleteExpando){nt.deleteExpando=!0;try{delete t.test}catch(r){nt.deleteExpando=!1}}}(),function(){var t,n,r=ht.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(nt[t+"Bubbles"]=n in e)||(r.setAttribute(n,"t"),nt[t+"Bubbles"]=r.attributes[n].expando===!1);r=null}();var jt=/^(?:input|select|textarea)$/i,Nt=/^key/,Dt=/^(?:mouse|pointer|contextmenu)|click/,Rt=/^(?:focusinfocus|focusoutblur)$/,qt=/^([^.]*)(?:\.(.+)|)$/;it.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,c,l,f,d,p,h,v,g=it._data(e);if(g){for(n.handler&&(u=n,n=u.handler,i=u.selector),n.guid||(n.guid=it.guid++),(a=g.events)||(a=g.events={}),(l=g.handle)||(l=g.handle=function(e){return typeof it===$t||e&&it.event.triggered===e.type?void 0:it.event.dispatch.apply(l.elem,arguments)},l.elem=e),t=(t||"").match(bt)||[""],s=t.length;s--;)o=qt.exec(t[s])||[],p=v=o[1],h=(o[2]||"").split(".").sort(),p&&(c=it.event.special[p]||{},p=(i?c.delegateType:c.bindType)||p,c=it.event.special[p]||{},f=it.extend({type:p,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&it.expr.match.needsContext.test(i),namespace:h.join(".")},u),(d=a[p])||(d=a[p]=[],d.delegateCount=0,c.setup&&c.setup.call(e,r,h,l)!==!1||(e.addEventListener?e.addEventListener(p,l,!1):e.attachEvent&&e.attachEvent("on"+p,l))),c.add&&(c.add.call(e,f),f.handler.guid||(f.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,f):d.push(f),it.event.global[p]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,u,c,l,f,d,p,h,v,g=it.hasData(e)&&it._data(e);if(g&&(l=g.events)){for(t=(t||"").match(bt)||[""],c=t.length;c--;)if(s=qt.exec(t[c])||[],p=v=s[1],h=(s[2]||"").split(".").sort(),p){for(f=it.event.special[p]||{},p=(r?f.delegateType:f.bindType)||p,d=l[p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=d.length;o--;)a=d[o],!i&&v!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(d.splice(o,1),a.selector&&d.delegateCount--,f.remove&&f.remove.call(e,a));u&&!d.length&&(f.teardown&&f.teardown.call(e,h,g.handle)!==!1||it.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)it.event.remove(e,p+t[c],n,r,!0);it.isEmptyObject(l)&&(delete g.handle,it._removeData(e,"events"))}},trigger:function(t,n,r,i){var o,a,s,u,c,l,f,d=[r||ht],p=tt.call(t,"type")?t.type:t,h=tt.call(t,"namespace")?t.namespace.split("."):[];if(s=l=r=r||ht,3!==r.nodeType&&8!==r.nodeType&&!Rt.test(p+it.event.triggered)&&(p.indexOf(".")>=0&&(h=p.split("."),p=h.shift(),h.sort()),a=p.indexOf(":")<0&&"on"+p,t=t[it.expando]?t:new it.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:it.makeArray(n,[t]),c=it.event.special[p]||{},i||!c.trigger||c.trigger.apply(r,n)!==!1)){if(!i&&!c.noBubble&&!it.isWindow(r)){for(u=c.delegateType||p,Rt.test(u+p)||(s=s.parentNode);s;s=s.parentNode)d.push(s),l=s;l===(r.ownerDocument||ht)&&d.push(l.defaultView||l.parentWindow||e)}for(f=0;(s=d[f++])&&!t.isPropagationStopped();)t.type=f>1?u:c.bindType||p,o=(it._data(s,"events")||{})[t.type]&&it._data(s,"handle"),o&&o.apply(s,n),o=a&&s[a],o&&o.apply&&it.acceptData(s)&&(t.result=o.apply(s,n),t.result===!1&&t.preventDefault());if(t.type=p,!i&&!t.isDefaultPrevented()&&(!c._default||c._default.apply(d.pop(),n)===!1)&&it.acceptData(r)&&a&&r[p]&&!it.isWindow(r)){l=r[a],l&&(r[a]=null),it.event.triggered=p;try{r[p]()}catch(v){}it.event.triggered=void 0,l&&(r[a]=l)}return t.result}},dispatch:function(e){e=it.event.fix(e);var t,n,r,i,o,a=[],s=X.call(arguments),u=(it._data(this,"events")||{})[e.type]||[],c=it.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(a=it.event.handlers.call(this,e,u),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,o=0;(r=i.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,n=((it.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,u=e.target;if(s&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(i=[],o=0;s>o;o++)r=t[o],n=r.selector+" ",void 0===i[n]&&(i[n]=r.needsContext?it(n,this).index(u)>=0:it.find(n,this,null,[u]).length),i[n]&&i.push(r);i.length&&a.push({elem:u,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[it.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Dt.test(i)?this.mouseHooks:Nt.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new it.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||ht),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||ht,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return it.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return it.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)
}}},simulate:function(e,t,n,r){var i=it.extend(new it.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?it.event.trigger(i,null,t):it.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},it.removeEvent=ht.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===$t&&(e[r]=null),e.detachEvent(r,n))},it.Event=function(e,t){return this instanceof it.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?d:p):this.type=e,t&&it.extend(this,t),this.timeStamp=e&&e.timeStamp||it.now(),void(this[it.expando]=!0)):new it.Event(e,t)},it.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=d,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=d,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=d,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},it.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){it.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!it.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),nt.submitBubbles||(it.event.special.submit={setup:function(){return it.nodeName(this,"form")?!1:void it.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=it.nodeName(t,"input")||it.nodeName(t,"button")?t.form:void 0;n&&!it._data(n,"submitBubbles")&&(it.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),it._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&it.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return it.nodeName(this,"form")?!1:void it.event.remove(this,"._submit")}}),nt.changeBubbles||(it.event.special.change={setup:function(){return jt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(it.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),it.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),it.event.simulate("change",this,e,!0)})),!1):void it.event.add(this,"beforeactivate._change",function(e){var t=e.target;jt.test(t.nodeName)&&!it._data(t,"changeBubbles")&&(it.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||it.event.simulate("change",this.parentNode,e,!0)}),it._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return it.event.remove(this,"._change"),!jt.test(this.nodeName)}}),nt.focusinBubbles||it.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){it.event.simulate(t,e.target,it.event.fix(e),!0)};it.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=it._data(r,t);i||r.addEventListener(e,n,!0),it._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=it._data(r,t)-1;i?it._data(r,t,i):(r.removeEventListener(e,n,!0),it._removeData(r,t))}}}),it.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=p;else if(!r)return this;return 1===i&&(a=r,r=function(e){return it().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=it.guid++)),this.each(function(){it.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,it(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=p),this.each(function(){it.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){it.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?it.event.trigger(e,t,n,!0):void 0}});var Lt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Pt=/ jQuery\d+="(?:null|\d+)"/g,It=new RegExp("<(?:"+Lt+")[\\s/>]","i"),Ft=/^\s+/,Mt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Bt=/<([\w:]+)/,Ut=/<tbody/i,Ht=/<|&#?\w+;/,zt=/<(?:script|style|link)/i,Vt=/checked\s*(?:[^=]|=\s*.checked.)/i,Wt=/^$|\/(?:java|ecma)script/i,Jt=/^true\/(.*)/,Gt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:nt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Kt=v(ht),Qt=Kt.appendChild(ht.createElement("div"));Xt.optgroup=Xt.option,Xt.tbody=Xt.tfoot=Xt.colgroup=Xt.caption=Xt.thead,Xt.th=Xt.td,it.extend({clone:function(e,t,n){var r,i,o,a,s,u=it.contains(e.ownerDocument,e);if(nt.html5Clone||it.isXMLDoc(e)||!It.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Qt.innerHTML=e.outerHTML,Qt.removeChild(o=Qt.firstChild)),!(nt.noCloneEvent&&nt.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||it.isXMLDoc(e)))for(r=g(o),s=g(e),a=0;null!=(i=s[a]);++a)r[a]&&$(i,r[a]);if(t)if(n)for(s=s||g(e),r=r||g(o),a=0;null!=(i=s[a]);a++)x(i,r[a]);else x(e,o);return r=g(o,"script"),r.length>0&&_(r,!u&&g(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,a,s,u,c,l,f=e.length,d=v(t),p=[],h=0;f>h;h++)if(o=e[h],o||0===o)if("object"===it.type(o))it.merge(p,o.nodeType?[o]:o);else if(Ht.test(o)){for(s=s||d.appendChild(t.createElement("div")),u=(Bt.exec(o)||["",""])[1].toLowerCase(),l=Xt[u]||Xt._default,s.innerHTML=l[1]+o.replace(Mt,"<$1></$2>")+l[2],i=l[0];i--;)s=s.lastChild;if(!nt.leadingWhitespace&&Ft.test(o)&&p.push(t.createTextNode(Ft.exec(o)[0])),!nt.tbody)for(o="table"!==u||Ut.test(o)?"<table>"!==l[1]||Ut.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;i--;)it.nodeName(c=o.childNodes[i],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(it.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=d.lastChild}else p.push(t.createTextNode(o));for(s&&d.removeChild(s),nt.appendChecked||it.grep(g(p,"input"),m),h=0;o=p[h++];)if((!r||-1===it.inArray(o,r))&&(a=it.contains(o.ownerDocument,o),s=g(d.appendChild(o),"script"),a&&_(s),n))for(i=0;o=s[i++];)Wt.test(o.type||"")&&n.push(o);return s=null,d},cleanData:function(e,t){for(var n,r,i,o,a=0,s=it.expando,u=it.cache,c=nt.deleteExpando,l=it.event.special;null!=(n=e[a]);a++)if((t||it.acceptData(n))&&(i=n[s],o=i&&u[i])){if(o.events)for(r in o.events)l[r]?it.event.remove(n,r):it.removeEvent(n,r,o.handle);u[i]&&(delete u[i],c?delete n[s]:typeof n.removeAttribute!==$t?n.removeAttribute(s):n[s]=null,G.push(i))}}}),it.fn.extend({text:function(e){return Ct(this,function(e){return void 0===e?it.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ht).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?it.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||it.cleanData(g(n)),n.parentNode&&(t&&it.contains(n.ownerDocument,n)&&_(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&it.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&it.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return it.clone(this,e,t)})},html:function(e){return Ct(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Pt,""):void 0;if(!("string"!=typeof e||zt.test(e)||!nt.htmlSerialize&&It.test(e)||!nt.leadingWhitespace&&Ft.test(e)||Xt[(Bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Mt,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(it.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,it.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=K.apply([],e);var n,r,i,o,a,s,u=0,c=this.length,l=this,f=c-1,d=e[0],p=it.isFunction(d);if(p||c>1&&"string"==typeof d&&!nt.checkClone&&Vt.test(d))return this.each(function(n){var r=l.eq(n);p&&(e[0]=d.call(this,n,r.html())),r.domManip(e,t)});if(c&&(s=it.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(o=it.map(g(s,"script"),b),i=o.length;c>u;u++)r=s,u!==f&&(r=it.clone(r,!0,!0),i&&it.merge(o,g(r,"script"))),t.call(this[u],r,u);if(i)for(a=o[o.length-1].ownerDocument,it.map(o,w),u=0;i>u;u++)r=o[u],Wt.test(r.type||"")&&!it._data(r,"globalEval")&&it.contains(a,r)&&(r.src?it._evalUrl&&it._evalUrl(r.src):it.globalEval((r.text||r.textContent||r.innerHTML||"").replace(Gt,"")));s=n=null}return this}}),it.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){it.fn[e]=function(e){for(var n,r=0,i=[],o=it(e),a=o.length-1;a>=r;r++)n=r===a?this:this.clone(!0),it(o[r])[t](n),Q.apply(i,n.get());return this.pushStack(i)}});var Zt,Yt={};!function(){var e;nt.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return n=ht.getElementsByTagName("body")[0],n&&n.style?(t=ht.createElement("div"),r=ht.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==$t&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(ht.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0}}();var en,tn,nn=/^margin/,rn=new RegExp("^("+Tt+")(?!px)[a-z%]+$","i"),on=/^(top|right|bottom|left)$/;e.getComputedStyle?(en=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},tn=function(e,t,n){var r,i,o,a,s=e.style;return n=n||en(e),a=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==a||it.contains(e.ownerDocument,e)||(a=it.style(e,t)),rn.test(a)&&nn.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0===a?a:a+""}):ht.documentElement.currentStyle&&(en=function(e){return e.currentStyle},tn=function(e,t,n){var r,i,o,a,s=e.style;return n=n||en(e),a=n?n[t]:void 0,null==a&&s&&s[t]&&(a=s[t]),rn.test(a)&&!on.test(t)&&(r=s.left,i=e.runtimeStyle,o=i&&i.left,o&&(i.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=r,o&&(i.left=o)),void 0===a?a:a+""||"auto"}),function(){function t(){var t,n,r,i;n=ht.getElementsByTagName("body")[0],n&&n.style&&(t=ht.createElement("div"),r=ht.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,u=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(t,null)||{}).top,a="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,i=t.appendChild(ht.createElement("div")),i.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",t.style.width="1px",u=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=t.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===i[0].offsetHeight,s&&(i[0].style.display="",i[1].style.display="none",s=0===i[0].offsetHeight),n.removeChild(r))}var n,r,i,o,a,s,u;n=ht.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=n.getElementsByTagName("a")[0],r=i&&i.style,r&&(r.cssText="float:left;opacity:.5",nt.opacity="0.5"===r.opacity,nt.cssFloat=!!r.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===n.style.backgroundClip,nt.boxSizing=""===r.boxSizing||""===r.MozBoxSizing||""===r.WebkitBoxSizing,it.extend(nt,{reliableHiddenOffsets:function(){return null==s&&t(),s},boxSizingReliable:function(){return null==a&&t(),a},pixelPosition:function(){return null==o&&t(),o},reliableMarginRight:function(){return null==u&&t(),u}}))}(),it.swap=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};var an=/alpha\([^)]*\)/i,sn=/opacity\s*=\s*([^)]*)/,un=/^(none|table(?!-c[ea]).+)/,cn=new RegExp("^("+Tt+")(.*)$","i"),ln=new RegExp("^([+-])=("+Tt+")","i"),fn={position:"absolute",visibility:"hidden",display:"block"},dn={letterSpacing:"0",fontWeight:"400"},pn=["Webkit","O","Moz","ms"];it.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":nt.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=it.camelCase(t),u=e.style;if(t=it.cssProps[s]||(it.cssProps[s]=k(u,s)),a=it.cssHooks[t]||it.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:u[t];if(o=typeof n,"string"===o&&(i=ln.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(it.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||it.cssNumber[s]||(n+="px"),nt.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,r)))))try{u[t]=n}catch(c){}}},css:function(e,t,n,r){var i,o,a,s=it.camelCase(t);return t=it.cssProps[s]||(it.cssProps[s]=k(e.style,s)),a=it.cssHooks[t]||it.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=tn(e,t,r)),"normal"===o&&t in dn&&(o=dn[t]),""===n||n?(i=parseFloat(o),n===!0||it.isNumeric(i)?i||0:o):o}}),it.each(["height","width"],function(e,t){it.cssHooks[t]={get:function(e,n,r){return n?un.test(it.css(e,"display"))&&0===e.offsetWidth?it.swap(e,fn,function(){return j(e,t,r)}):j(e,t,r):void 0},set:function(e,n,r){var i=r&&en(e);return C(e,n,r?O(e,t,r,nt.boxSizing&&"border-box"===it.css(e,"boxSizing",!1,i),i):0)}}}),nt.opacity||(it.cssHooks.opacity={get:function(e,t){return sn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=it.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===it.trim(o.replace(an,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=an.test(o)?o.replace(an,i):o+" "+i)}}),it.cssHooks.marginRight=T(nt.reliableMarginRight,function(e,t){return t?it.swap(e,{display:"inline-block"},tn,[e,"marginRight"]):void 0}),it.each({margin:"",padding:"",border:"Width"},function(e,t){it.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+kt[r]+t]=o[r]||o[r-2]||o[0];return i}},nn.test(e)||(it.cssHooks[e+t].set=C)}),it.fn.extend({css:function(e,t){return Ct(this,function(e,t,n){var r,i,o={},a=0;if(it.isArray(t)){for(r=en(e),i=t.length;i>a;a++)o[t[a]]=it.css(e,t[a],!1,r);return o}return void 0!==n?it.style(e,t,n):it.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){At(this)?it(this).show():it(this).hide()})}}),it.Tween=N,N.prototype={constructor:N,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(it.cssNumber[n]?"":"px")},cur:function(){var e=N.propHooks[this.prop];return e&&e.get?e.get(this):N.propHooks._default.get(this)},run:function(e){var t,n=N.propHooks[this.prop];return this.pos=t=this.options.duration?it.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=it.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){it.fx.step[e.prop]?it.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[it.cssProps[e.prop]]||it.cssHooks[e.prop])?it.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},it.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},it.fx=N.prototype.init,it.fx.step={};var hn,vn,gn=/^(?:toggle|show|hide)$/,mn=new RegExp("^(?:([+-])=|)("+Tt+")([a-z%]*)$","i"),yn=/queueHooks$/,bn=[L],wn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=mn.exec(t),o=i&&i[3]||(it.cssNumber[e]?"":"px"),a=(it.cssNumber[e]||"px"!==o&&+r)&&mn.exec(it.css(n.elem,e)),s=1,u=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,it.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--u)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};it.Animation=it.extend(I,{tweener:function(e,t){it.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],wn[n]=wn[n]||[],wn[n].unshift(t)},prefilter:function(e,t){t?bn.unshift(e):bn.push(e)}}),it.speed=function(e,t,n){var r=e&&"object"==typeof e?it.extend({},e):{complete:n||!n&&t||it.isFunction(e)&&e,duration:e,easing:n&&t||t&&!it.isFunction(t)&&t};return r.duration=it.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in it.fx.speeds?it.fx.speeds[r.duration]:it.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){it.isFunction(r.old)&&r.old.call(this),r.queue&&it.dequeue(this,r.queue)},r},it.fn.extend({fadeTo:function(e,t,n,r){return this.filter(At).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=it.isEmptyObject(e),o=it.speed(t,n,r),a=function(){var t=I(this,it.extend({},e),o);(i||it._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=it.timers,a=it._data(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&yn.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&it.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=it._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=it.timers,a=r?r.length:0;for(n.finish=!0,it.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),it.each(["toggle","show","hide"],function(e,t){var n=it.fn[t];it.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(R(t,!0),e,r,i)}}),it.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){it.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),it.timers=[],it.fx.tick=function(){var e,t=it.timers,n=0;for(hn=it.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||it.fx.stop(),hn=void 0},it.fx.timer=function(e){it.timers.push(e),e()?it.fx.start():it.timers.pop()},it.fx.interval=13,it.fx.start=function(){vn||(vn=setInterval(it.fx.tick,it.fx.interval))},it.fx.stop=function(){clearInterval(vn),vn=null},it.fx.speeds={slow:600,fast:200,_default:400},it.fn.delay=function(e,t){return e=it.fx?it.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i;t=ht.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],n=ht.createElement("select"),i=n.appendChild(ht.createElement("option")),e=t.getElementsByTagName("input")[0],r.style.cssText="top:1px",nt.getSetAttribute="t"!==t.className,nt.style=/top/.test(r.getAttribute("style")),nt.hrefNormalized="/a"===r.getAttribute("href"),nt.checkOn=!!e.value,nt.optSelected=i.selected,nt.enctype=!!ht.createElement("form").enctype,n.disabled=!0,nt.optDisabled=!i.disabled,e=ht.createElement("input"),e.setAttribute("value",""),nt.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),nt.radioValue="t"===e.value}();var _n=/\r/g;it.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=it.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,it(this).val()):e,null==i?i="":"number"==typeof i?i+="":it.isArray(i)&&(i=it.map(i,function(e){return null==e?"":e+""})),t=it.valHooks[this.type]||it.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=it.valHooks[i.type]||it.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(_n,""):null==n?"":n)}}}),it.extend({valHooks:{option:{get:function(e){var t=it.find.attr(e,"value");return null!=t?t:it.trim(it.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(nt.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&it.nodeName(n.parentNode,"optgroup"))){if(t=it(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=it.makeArray(t),a=i.length;a--;)if(r=i[a],it.inArray(it.valHooks.option.get(r),o)>=0)try{r.selected=n=!0}catch(s){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),it.each(["radio","checkbox"],function(){it.valHooks[this]={set:function(e,t){return it.isArray(t)?e.checked=it.inArray(it(e).val(),t)>=0:void 0}},nt.checkOn||(it.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var xn,$n,Sn=it.expr.attrHandle,En=/^(?:checked|selected)$/i,Tn=nt.getSetAttribute,kn=nt.input;it.fn.extend({attr:function(e,t){return Ct(this,it.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){it.removeAttr(this,e)})}}),it.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===$t?it.prop(e,t,n):(1===o&&it.isXMLDoc(e)||(t=t.toLowerCase(),r=it.attrHooks[t]||(it.expr.match.bool.test(t)?$n:xn)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=it.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void it.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(bt);if(o&&1===e.nodeType)for(;n=o[i++];)r=it.propFix[n]||n,it.expr.match.bool.test(n)?kn&&Tn||!En.test(n)?e[r]=!1:e[it.camelCase("default-"+n)]=e[r]=!1:it.attr(e,n,""),e.removeAttribute(Tn?n:r)},attrHooks:{type:{set:function(e,t){if(!nt.radioValue&&"radio"===t&&it.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),$n={set:function(e,t,n){return t===!1?it.removeAttr(e,n):kn&&Tn||!En.test(n)?e.setAttribute(!Tn&&it.propFix[n]||n,n):e[it.camelCase("default-"+n)]=e[n]=!0,n}},it.each(it.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Sn[t]||it.find.attr;Sn[t]=kn&&Tn||!En.test(t)?function(e,t,r){var i,o;return r||(o=Sn[t],Sn[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,Sn[t]=o),i}:function(e,t,n){return n?void 0:e[it.camelCase("default-"+t)]?t.toLowerCase():null}}),kn&&Tn||(it.attrHooks.value={set:function(e,t,n){return it.nodeName(e,"input")?void(e.defaultValue=t):xn&&xn.set(e,t,n)}}),Tn||(xn={set:function(e,t,n){var r=e.getAttributeNode(n);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},Sn.id=Sn.name=Sn.coords=function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},it.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:xn.set},it.attrHooks.contenteditable={set:function(e,t,n){xn.set(e,""===t?!1:t,n)}},it.each(["width","height"],function(e,t){it.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),nt.style||(it.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var An=/^(?:input|select|textarea|button|object)$/i,Cn=/^(?:a|area)$/i;it.fn.extend({prop:function(e,t){return Ct(this,it.prop,e,t,arguments.length>1)},removeProp:function(e){return e=it.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),it.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!it.isXMLDoc(e),o&&(t=it.propFix[t]||t,i=it.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=it.find.attr(e,"tabindex");return t?parseInt(t,10):An.test(e.nodeName)||Cn.test(e.nodeName)&&e.href?0:-1}}}}),nt.hrefNormalized||it.each(["href","src"],function(e,t){it.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),nt.optSelected||(it.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),it.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){it.propFix[this.toLowerCase()]=this}),nt.enctype||(it.propFix.enctype="encoding");var On=/[\t\r\n\f]/g;it.fn.extend({addClass:function(e){var t,n,r,i,o,a,s=0,u=this.length,c="string"==typeof e&&e;if(it.isFunction(e))return this.each(function(t){it(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(bt)||[];u>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(On," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=it.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,r,i,o,a,s=0,u=this.length,c=0===arguments.length||"string"==typeof e&&e;if(it.isFunction(e))return this.each(function(t){it(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(bt)||[];u>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(On," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=e?it.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(it.isFunction(e)?function(n){it(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,r=0,i=it(this),o=e.match(bt)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===$t||"boolean"===n)&&(this.className&&it._data(this,"__className__",this.className),this.className=this.className||e===!1?"":it._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(On," ").indexOf(t)>=0)return!0;return!1}}),it.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){it.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),it.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var jn=it.now(),Nn=/\?/,Dn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;it.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,i=it.trim(t+"");return i&&!it.trim(i.replace(Dn,function(e,t,i,o){return n&&t&&(r=0),0===r?e:(n=i||t,r+=!o-!i,"")}))?Function("return "+i)():it.error("Invalid JSON: "+t)},it.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(i){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||it.error("Invalid XML: "+t),n};var Rn,qn,Ln=/#.*$/,Pn=/([?&])_=[^&]*/,In=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Fn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mn=/^(?:GET|HEAD)$/,Bn=/^\/\//,Un=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hn={},zn={},Vn="*/".concat("*");try{qn=location.href}catch(Wn){qn=ht.createElement("a"),qn.href="",qn=qn.href}Rn=Un.exec(qn.toLowerCase())||[],it.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:qn,type:"GET",isLocal:Fn.test(Rn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":it.parseJSON,"text xml":it.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?B(B(e,it.ajaxSettings),t):B(it.ajaxSettings,e)},ajaxPrefilter:F(Hn),ajaxTransport:F(zn),ajax:function(e,t){function n(e,t,n,r){var i,l,m,y,w,x=t;
2!==b&&(b=2,s&&clearTimeout(s),c=void 0,a=r||"",_.readyState=e>0?4:0,i=e>=200&&300>e||304===e,n&&(y=U(f,_,n)),y=H(f,y,_,i),i?(f.ifModified&&(w=_.getResponseHeader("Last-Modified"),w&&(it.lastModified[o]=w),w=_.getResponseHeader("etag"),w&&(it.etag[o]=w)),204===e||"HEAD"===f.type?x="nocontent":304===e?x="notmodified":(x=y.state,l=y.data,m=y.error,i=!m)):(m=x,(e||!x)&&(x="error",0>e&&(e=0))),_.status=e,_.statusText=(t||x)+"",i?h.resolveWith(d,[l,x,_]):h.rejectWith(d,[_,x,m]),_.statusCode(g),g=void 0,u&&p.trigger(i?"ajaxSuccess":"ajaxError",[_,f,i?l:m]),v.fireWith(d,[_,x]),u&&(p.trigger("ajaxComplete",[_,f]),--it.active||it.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,a,s,u,c,l,f=it.ajaxSetup({},t),d=f.context||f,p=f.context&&(d.nodeType||d.jquery)?it(d):it.event,h=it.Deferred(),v=it.Callbacks("once memory"),g=f.statusCode||{},m={},y={},b=0,w="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!l)for(l={};t=In.exec(a);)l[t[1].toLowerCase()]=t[2];t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,m[e]=t),this},overrideMimeType:function(e){return b||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else _.always(e[_.status]);return this},abort:function(e){var t=e||w;return c&&c.abort(t),n(0,t),this}};if(h.promise(_).complete=v.add,_.success=_.done,_.error=_.fail,f.url=((e||f.url||qn)+"").replace(Ln,"").replace(Bn,Rn[1]+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=it.trim(f.dataType||"*").toLowerCase().match(bt)||[""],null==f.crossDomain&&(r=Un.exec(f.url.toLowerCase()),f.crossDomain=!(!r||r[1]===Rn[1]&&r[2]===Rn[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(Rn[3]||("http:"===Rn[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=it.param(f.data,f.traditional)),M(Hn,f,t,_),2===b)return _;u=f.global,u&&0===it.active++&&it.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Mn.test(f.type),o=f.url,f.hasContent||(f.data&&(o=f.url+=(Nn.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=Pn.test(o)?o.replace(Pn,"$1_="+jn++):o+(Nn.test(o)?"&":"?")+"_="+jn++)),f.ifModified&&(it.lastModified[o]&&_.setRequestHeader("If-Modified-Since",it.lastModified[o]),it.etag[o]&&_.setRequestHeader("If-None-Match",it.etag[o])),(f.data&&f.hasContent&&f.contentType!==!1||t.contentType)&&_.setRequestHeader("Content-Type",f.contentType),_.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Vn+"; q=0.01":""):f.accepts["*"]);for(i in f.headers)_.setRequestHeader(i,f.headers[i]);if(f.beforeSend&&(f.beforeSend.call(d,_,f)===!1||2===b))return _.abort();w="abort";for(i in{success:1,error:1,complete:1})_[i](f[i]);if(c=M(zn,f,t,_)){_.readyState=1,u&&p.trigger("ajaxSend",[_,f]),f.async&&f.timeout>0&&(s=setTimeout(function(){_.abort("timeout")},f.timeout));try{b=1,c.send(m,n)}catch(x){if(!(2>b))throw x;n(-1,x)}}else n(-1,"No Transport");return _},getJSON:function(e,t,n){return it.get(e,t,n,"json")},getScript:function(e,t){return it.get(e,void 0,t,"script")}}),it.each(["get","post"],function(e,t){it[t]=function(e,n,r,i){return it.isFunction(n)&&(i=i||r,r=n,n=void 0),it.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),it.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){it.fn[t]=function(e){return this.on(t,e)}}),it._evalUrl=function(e){return it.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},it.fn.extend({wrapAll:function(e){if(it.isFunction(e))return this.each(function(t){it(this).wrapAll(e.call(this,t))});if(this[0]){var t=it(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(it.isFunction(e)?function(t){it(this).wrapInner(e.call(this,t))}:function(){var t=it(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=it.isFunction(e);return this.each(function(n){it(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){it.nodeName(this,"body")||it(this).replaceWith(this.childNodes)}).end()}}),it.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!nt.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||it.css(e,"display"))},it.expr.filters.visible=function(e){return!it.expr.filters.hidden(e)};var Jn=/%20/g,Gn=/\[\]$/,Xn=/\r?\n/g,Kn=/^(?:submit|button|image|reset|file)$/i,Qn=/^(?:input|select|textarea|keygen)/i;it.param=function(e,t){var n,r=[],i=function(e,t){t=it.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=it.ajaxSettings&&it.ajaxSettings.traditional),it.isArray(e)||e.jquery&&!it.isPlainObject(e))it.each(e,function(){i(this.name,this.value)});else for(n in e)z(n,e[n],t,i);return r.join("&").replace(Jn,"+")},it.fn.extend({serialize:function(){return it.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=it.prop(this,"elements");return e?it.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!it(this).is(":disabled")&&Qn.test(this.nodeName)&&!Kn.test(e)&&(this.checked||!Ot.test(e))}).map(function(e,t){var n=it(this).val();return null==n?null:it.isArray(n)?it.map(n,function(e){return{name:t.name,value:e.replace(Xn,"\r\n")}}):{name:t.name,value:n.replace(Xn,"\r\n")}}).get()}}),it.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&V()||W()}:V;var Zn=0,Yn={},er=it.ajaxSettings.xhr();e.ActiveXObject&&it(e).on("unload",function(){for(var e in Yn)Yn[e](void 0,!0)}),nt.cors=!!er&&"withCredentials"in er,er=nt.ajax=!!er,er&&it.ajaxTransport(function(e){if(!e.crossDomain||nt.cors){var t;return{send:function(n,r){var i,o=e.xhr(),a=++Zn;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)void 0!==n[i]&&o.setRequestHeader(i,n[i]+"");o.send(e.hasContent&&e.data||null),t=function(n,i){var s,u,c;if(t&&(i||4===o.readyState))if(delete Yn[a],t=void 0,o.onreadystatechange=it.noop,i)4!==o.readyState&&o.abort();else{c={},s=o.status,"string"==typeof o.responseText&&(c.text=o.responseText);try{u=o.statusText}catch(l){u=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=c.text?200:404}c&&r(s,u,c,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Yn[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),it.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return it.globalEval(e),e}}}),it.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),it.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=ht.head||it("head")[0]||ht.documentElement;return{send:function(r,i){t=ht.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var tr=[],nr=/(=)\?(?=&|$)|\?\?/;it.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tr.pop()||it.expando+"_"+jn++;return this[e]=!0,e}}),it.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=t.jsonp!==!1&&(nr.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nr.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=it.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(nr,"$1"+i):t.jsonp!==!1&&(t.url+=(Nn.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||it.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,tr.push(i)),a&&it.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),it.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||ht;var r=ft.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=it.buildFragment([e],t,i),i&&i.length&&it(i).remove(),it.merge([],r.childNodes))};var rr=it.fn.load;it.fn.load=function(e,t,n){if("string"!=typeof e&&rr)return rr.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>=0&&(r=it.trim(e.slice(s,e.length)),e=e.slice(0,s)),it.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&it.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?it("<div>").append(it.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,i||[e.responseText,t,e])}),this},it.expr.filters.animated=function(e){return it.grep(it.timers,function(t){return e===t.elem}).length};var ir=e.document.documentElement;it.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,c,l=it.css(e,"position"),f=it(e),d={};"static"===l&&(e.style.position="relative"),s=f.offset(),o=it.css(e,"top"),u=it.css(e,"left"),c=("absolute"===l||"fixed"===l)&&it.inArray("auto",[o,u])>-1,c?(r=f.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),it.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):f.css(d)}},it.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){it.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],o=i&&i.ownerDocument;if(o)return t=o.documentElement,it.contains(t,i)?(typeof i.getBoundingClientRect!==$t&&(r=i.getBoundingClientRect()),n=J(o),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===it.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),it.nodeName(e[0],"html")||(n=e.offset()),n.top+=it.css(e[0],"borderTopWidth",!0),n.left+=it.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-it.css(r,"marginTop",!0),left:t.left-n.left-it.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||ir;e&&!it.nodeName(e,"html")&&"static"===it.css(e,"position");)e=e.offsetParent;return e||ir})}}),it.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);it.fn[e]=function(r){return Ct(this,function(e,r,i){var o=J(e);return void 0===i?o?t in o?o[t]:o.document.documentElement[r]:e[r]:void(o?o.scrollTo(n?it(o).scrollLeft():i,n?i:it(o).scrollTop()):e[r]=i)},e,r,arguments.length,null)}}),it.each(["top","left"],function(e,t){it.cssHooks[t]=T(nt.pixelPosition,function(e,n){return n?(n=tn(e,t),rn.test(n)?it(e).position()[t]+"px":n):void 0})}),it.each({Height:"height",Width:"width"},function(e,t){it.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){it.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||i===!0?"margin":"border");return Ct(this,function(t,n,r){var i;return it.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?it.css(t,n,a):it.style(t,n,r,a)},t,o?r:void 0,o,null)}})}),it.fn.size=function(){return this.length},it.fn.andSelf=it.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return it});var or=e.jQuery,ar=e.$;return it.noConflict=function(t){return e.$===it&&(e.$=ar),t&&e.jQuery===it&&(e.jQuery=or),it},typeof t===$t&&(e.jQuery=e.$=it),it}),function(e,t,n){function r(e){return function(){var t,n,r=arguments[0],i="["+(e?e+":":"")+r+"] ",o=arguments[1],a=arguments,s=function(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e};for(t=i+o.replace(/\{\d+\}/g,function(e){var t,n=+e.slice(1,-1);return n+2<a.length?(t=a[n+2],"function"==typeof t?t.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof t?"undefined":"string"!=typeof t?U(t):t):e}),t=t+"\nhttp://errors.angularjs.org/1.2.26/"+(e?e+"/":"")+r,n=2;n<arguments.length;n++)t=t+(2==n?"?":"&")+"p"+(n-2)+"="+encodeURIComponent(s(arguments[n]));return new Error(t)}}function i(e){if(null==e||E(e))return!1;var t=e.length;return 1===e.nodeType&&t?!0:w(e)||Cr(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function o(e,t,n){var r;if(e)if($(e))for(r in e)"prototype"==r||"length"==r||"name"==r||e.hasOwnProperty&&!e.hasOwnProperty(r)||t.call(n,e[r],r);else if(Cr(e)||i(e))for(r=0;r<e.length;r++)t.call(n,e[r],r);else if(e.forEach&&e.forEach!==o)e.forEach(t,n);else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r);return e}function a(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort()}function s(e,t,n){for(var r=a(e),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function u(e){return function(t,n){e(n,t)}}function c(){for(var e,t=Ar.length;t;){if(t--,e=Ar[t].charCodeAt(0),57==e)return Ar[t]="A",Ar.join("");if(90!=e)return Ar[t]=String.fromCharCode(e+1),Ar.join("");Ar[t]="0"}return Ar.unshift("0"),Ar.join("")}function l(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function f(e){var t=e.$$hashKey;return o(arguments,function(t){t!==e&&o(t,function(t,n){e[n]=t})}),l(e,t),e}function d(e){return parseInt(e,10)}function p(e,t){return f(new(f(function(){},{prototype:e})),t)}function h(){}function v(e){return e}function g(e){return function(){return e}}function m(e){return"undefined"==typeof e}function y(e){return"undefined"!=typeof e}function b(e){return null!=e&&"object"==typeof e}function w(e){return"string"==typeof e}function _(e){return"number"==typeof e}function x(e){return"[object Date]"===Er.call(e)}function $(e){return"function"==typeof e}function S(e){return"[object RegExp]"===Er.call(e)}function E(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function T(e){return e&&e.$evalAsync&&e.$watch}function k(e){return"[object File]"===Er.call(e)}function A(e){return"[object Blob]"===Er.call(e)}function C(e){return e&&$(e.then)}function O(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function j(e,t,n){var r=[];return o(e,function(e,i,o){r.push(t.call(n,e,i,o))}),r}function N(e,t){return-1!=D(e,t)}function D(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}function R(e,t){var n=D(e,t);return n>=0&&e.splice(n,1),t}function q(e,t,n,r){if(E(e)||T(e))throw Tr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(t){if(e===t)throw Tr("cpi","Can't copy! Source and destination are identical.");if(n=n||[],r=r||[],b(e)){var i=D(n,e);if(-1!==i)return r[i];n.push(e),r.push(t)}var a;if(Cr(e)){t.length=0;for(var s=0;s<e.length;s++)a=q(e[s],null,n,r),b(e[s])&&(n.push(e[s]),r.push(a)),t.push(a)}else{var u=t.$$hashKey;Cr(t)?t.length=0:o(t,function(e,n){delete t[n]});for(var c in e)a=q(e[c],null,n,r),b(e[c])&&(n.push(e[c]),r.push(a)),t[c]=a;l(t,u)}}else t=e,e&&(Cr(e)?t=q(e,[],n,r):x(e)?t=new Date(e.getTime()):S(e)?(t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex):b(e)&&(t=q(e,{},n,r)));return t}function L(e,t){if(Cr(e)){t=t||[];for(var n=0;n<e.length;n++)t[n]=e[n]}else if(b(e)){t=t||{};for(var r in e)!hr.call(e,r)||"$"===r.charAt(0)&&"$"===r.charAt(1)||(t[r]=e[r])}return t||e}function P(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var r,i,o,a=typeof e,s=typeof t;if(a==s&&"object"==a){if(!Cr(e)){if(x(e))return x(t)?isNaN(e.getTime())&&isNaN(t.getTime())||e.getTime()===t.getTime():!1;if(S(e)&&S(t))return e.toString()==t.toString();if(T(e)||T(t)||E(e)||E(t)||Cr(t))return!1;o={};for(i in e)if("$"!==i.charAt(0)&&!$(e[i])){if(!P(e[i],t[i]))return!1;o[i]=!0}for(i in t)if(!o.hasOwnProperty(i)&&"$"!==i.charAt(0)&&t[i]!==n&&!$(t[i]))return!1;return!0}if(!Cr(t))return!1;if((r=e.length)==t.length){for(i=0;r>i;i++)if(!P(e[i],t[i]))return!1;return!0}}return!1}function I(e,t,n){return e.concat($r.call(t,n))}function F(e,t){return $r.call(e,t||0)}function M(e,t){var n=arguments.length>2?F(arguments,2):[];return!$(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,n.concat($r.call(arguments,0))):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function B(e,r){var i=r;return"string"==typeof e&&"$"===e.charAt(0)?i=n:E(r)?i="$WINDOW":r&&t===r?i="$DOCUMENT":T(r)&&(i="$SCOPE"),i}function U(e,t){return"undefined"==typeof e?n:JSON.stringify(e,B,t?"  ":null)}function H(e){return w(e)?JSON.parse(e):e}function z(e){if("function"==typeof e)e=!0;else if(e&&0!==e.length){var t=pr(""+e);e=!("f"==t||"0"==t||"false"==t||"no"==t||"n"==t||"[]"==t)}else e=!1;return e}function V(e){e=br(e).clone();try{e.empty()}catch(t){}var n=3,r=br("<div>").append(e).html();try{return e[0].nodeType===n?pr(r):r.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+pr(t)})}catch(t){return pr(r)}}function W(e){try{return decodeURIComponent(e)}catch(t){}}function J(e){var t,n,r={};return o((e||"").split("&"),function(e){if(e&&(t=e.replace(/\+/g,"%20").split("="),n=W(t[0]),y(n))){var i=y(t[1])?W(t[1]):!0;hr.call(r,n)?Cr(r[n])?r[n].push(i):r[n]=[r[n],i]:r[n]=i}}),r}function G(e){var t=[];return o(e,function(e,n){Cr(e)?o(e,function(e){t.push(K(n,!0)+(e===!0?"":"="+K(e,!0)))}):t.push(K(n,!0)+(e===!0?"":"="+K(e,!0)))}),t.length?t.join("&"):""}function X(e){return K(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function K(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")}function Q(e,n){function r(e){e&&s.push(e)}var i,a,s=[e],u=["ng:app","ng-app","x-ng-app","data-ng-app"],c=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;o(u,function(n){u[n]=!0,r(t.getElementById(n)),n=n.replace(":","\\:"),e.querySelectorAll&&(o(e.querySelectorAll("."+n),r),o(e.querySelectorAll("."+n+"\\:"),r),o(e.querySelectorAll("["+n+"]"),r))}),o(s,function(e){if(!i){var t=" "+e.className+" ",n=c.exec(t);n?(i=e,a=(n[2]||"").replace(/\s+/g,",")):o(e.attributes,function(t){!i&&u[t.name]&&(i=e,a=t.value)})}}),i&&n(i,a?[a]:[])}function Z(n,r){var i=function(){if(n=br(n),n.injector()){var e=n[0]===t?"document":V(n);throw Tr("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[],r.unshift(["$provide",function(e){e.value("$rootElement",n)}]),r.unshift("ng");var i=Dt(r);return i.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),i},a=/^NG_DEFER_BOOTSTRAP!/;return e&&!a.test(e.name)?i():(e.name=e.name.replace(a,""),void(kr.resumeBootstrap=function(e){o(e,function(e){r.push(e)}),i()}))}function Y(e,t){return t=t||"_",e.replace(Nr,function(e,n){return(n?t:"")+e.toLowerCase()})}function et(){wr=e.jQuery,wr&&wr.fn.on?(br=wr,f(wr.fn,{scope:Wr.scope,isolateScope:Wr.isolateScope,controller:Wr.controller,injector:Wr.injector,inheritedData:Wr.inheritedData}),lt("remove",!0,!0,!1),lt("empty",!1,!1,!1),lt("html",!1,!1,!0)):br=ht,kr.element=br}function tt(e,t,n){if(!e)throw Tr("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function nt(e,t,n){return n&&Cr(e)&&(e=e[e.length-1]),tt($(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function rt(e,t){if("hasOwnProperty"===e)throw Tr("badname","hasOwnProperty is not a valid {0} name",t)}function it(e,t,n){if(!t)return e;for(var r,i=t.split("."),o=e,a=i.length,s=0;a>s;s++)r=i[s],e&&(e=(o=e)[r]);return!n&&$(e)?M(o,e):e}function ot(e){var t=e[0],n=e[e.length-1];if(t===n)return br(t);var r=t,i=[r];do{if(r=r.nextSibling,!r)break;i.push(r)}while(r!==n);return br(i)}function at(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=r("$injector"),i=r("ng"),o=t(e,"angular",Object);return o.$$minErr=o.$$minErr||r,t(o,"module",function(){var e={};return function(r,o,a){var s=function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)};return s(r,"module"),o&&e.hasOwnProperty(r)&&(e[r]=null),t(e,r,function(){function e(e,n,r){return function(){return t[r||"push"]([e,n,arguments]),u}}if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var t=[],i=[],s=e("$injector","invoke"),u={_invokeQueue:t,_runBlocks:i,requires:o,name:r,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),config:s,run:function(e){return i.push(e),this}};return a&&s(a),u})}})}function st(t){f(t,{bootstrap:Z,copy:q,extend:f,equals:P,element:br,forEach:o,injector:Dt,noop:h,bind:M,toJson:U,fromJson:H,identity:v,isUndefined:m,isDefined:y,isString:w,isFunction:$,isObject:b,isNumber:_,isElement:O,isArray:Cr,version:Dr,isDate:x,lowercase:pr,uppercase:vr,callbacks:{counter:0},$$minErr:r,$$csp:jr}),_r=at(e);try{_r("ngLocale")}catch(n){_r("ngLocale",[]).provider("$locale",nn)}_r("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Cn}),e.provider("$compile",Mt).directive({a:Ci,input:Mi,textarea:Mi,form:Di,script:$o,select:To,style:Ao,option:ko,ngBind:Zi,ngBindHtml:eo,ngBindTemplate:Yi,ngClass:to,ngClassEven:ro,ngClassOdd:no,ngCloak:io,ngController:oo,ngForm:Ri,ngHide:mo,ngIf:uo,ngInclude:co,ngInit:fo,ngNonBindable:po,ngPluralize:ho,ngRepeat:vo,ngShow:go,ngStyle:yo,ngSwitch:bo,ngSwitchWhen:wo,ngSwitchDefault:_o,ngOptions:Eo,ngTransclude:xo,ngModel:Wi,ngList:Xi,ngChange:Ji,required:Gi,ngRequired:Gi,ngValue:Qi}).directive({ngInclude:lo}).directive(Oi).directive(ao),e.provider({$anchorScroll:Rt,$animate:ti,$browser:Pt,$cacheFactory:It,$controller:Ht,$document:zt,$exceptionHandler:Vt,$filter:Mn,$interpolate:en,$interval:tn,$http:Kt,$httpBackend:Zt,$location:gn,$log:mn,$parse:Sn,$rootScope:An,$q:En,$sce:Rn,$sceDelegate:Dn,$sniffer:qn,$templateCache:Ft,$timeout:Ln,$window:Fn,$$rAF:kn,$$asyncCallback:qt})}])}function ut(){return++qr}function ct(e){return e.replace(Ir,function(e,t,n,r){return r?n.toUpperCase():n}).replace(Fr,"Moz$1")}function lt(e,t,n,r){function i(e){var i,a,s,u,c,l,f,d=n&&e?[this.filter(e)]:[this],p=t;if(!r||null!=e)for(;d.length;)for(i=d.shift(),a=0,s=i.length;s>a;a++)for(u=br(i[a]),p?u.triggerHandler("$destroy"):p=!p,c=0,l=(f=u.children()).length;l>c;c++)d.push(wr(f[c]));return o.apply(this,arguments)}var o=wr.fn[e];o=o.$original||o,i.$original=o,wr.fn[e]=i}function ft(e){return!Ur.test(e)}function dt(e,t){var n,r,i,o,a,s,u=t.createDocumentFragment(),c=[];if(ft(e))c.push(t.createTextNode(e));else{for(n=u.appendChild(t.createElement("div")),r=(Hr.exec(e)||["",""])[1].toLowerCase(),i=Vr[r]||Vr._default,n.innerHTML="<div>&#160;</div>"+i[1]+e.replace(zr,"<$1></$2>")+i[2],n.removeChild(n.firstChild),o=i[0];o--;)n=n.lastChild;for(a=0,s=n.childNodes.length;s>a;++a)c.push(n.childNodes[a]);n=u.firstChild,n.textContent=""}return u.textContent="",u.innerHTML="",c}function pt(e,n){n=n||t;var r;return(r=Br.exec(e))?[n.createElement(r[1])]:dt(e,n)}function ht(e){if(e instanceof ht)return e;if(w(e)&&(e=Or(e)),!(this instanceof ht)){if(w(e)&&"<"!=e.charAt(0))throw Mr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new ht(e)}if(w(e)){St(this,pt(e));var n=br(t.createDocumentFragment());n.append(this)}else St(this,e)}function vt(e){return e.cloneNode(!0)}function gt(e){yt(e);for(var t=0,n=e.childNodes||[];t<n.length;t++)gt(n[t])}function mt(e,t,n,r){if(y(r))throw Mr("offargs","jqLite#off() does not support the `selector` argument");var i=bt(e,"events"),a=bt(e,"handle");a&&(m(t)?o(i,function(t,n){Pr(e,n,t),delete i[n]}):o(t.split(" "),function(t){m(n)?(Pr(e,t,i[t]),delete i[t]):R(i[t]||[],n)}))}function yt(e,t){var r=e.ng339,i=Rr[r];if(i){if(t)return void delete Rr[r].data[t];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),mt(e)),delete Rr[r],e.ng339=n}}function bt(e,t,n){var r=e.ng339,i=Rr[r||-1];return y(n)?(i||(e.ng339=r=ut(),i=Rr[r]={}),void(i[t]=n)):i&&i[t]}function wt(e,t,n){var r=bt(e,"data"),i=y(n),o=!i&&y(t),a=o&&!b(t);if(r||a||bt(e,"data",r={}),i)r[t]=n;else{if(!o)return r;if(a)return r&&r[t];f(r,t)}}function _t(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function xt(e,t){t&&e.setAttribute&&o(t.split(" "),function(t){e.setAttribute("class",Or((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Or(t)+" "," ")))})}function $t(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(t.split(" "),function(e){e=Or(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",Or(n))}}function St(e,t){if(t){t=t.nodeName||!y(t.length)||E(t)?[t]:t;for(var n=0;n<t.length;n++)e.push(t[n])}}function Et(e,t){return Tt(e,"$"+(t||"ngController")+"Controller")}function Tt(e,t,r){9==e.nodeType&&(e=e.documentElement);for(var i=Cr(t)?t:[t];e;){for(var o=0,a=i.length;a>o;o++)if((r=br.data(e,i[o]))!==n)return r;e=e.parentNode||11===e.nodeType&&e.host}}function kt(e){for(var t=0,n=e.childNodes;t<n.length;t++)gt(n[t]);for(;e.firstChild;)e.removeChild(e.firstChild)}function At(e,t){var n=Jr[t.toLowerCase()];return n&&Gr[e.nodeName]&&n}function Ct(e,n){var r=function(r,i){if(r.preventDefault||(r.preventDefault=function(){r.returnValue=!1}),r.stopPropagation||(r.stopPropagation=function(){r.cancelBubble=!0}),r.target||(r.target=r.srcElement||t),m(r.defaultPrevented)){var a=r.preventDefault;r.preventDefault=function(){r.defaultPrevented=!0,a.call(r)},r.defaultPrevented=!1}r.isDefaultPrevented=function(){return r.defaultPrevented||r.returnValue===!1};var s=L(n[i||r.type]||[]);o(s,function(t){t.call(e,r)}),8>=yr?(r.preventDefault=null,r.stopPropagation=null,r.isDefaultPrevented=null):(delete r.preventDefault,delete r.stopPropagation,delete r.isDefaultPrevented)};return r.elem=e,r}function Ot(e,t){var r,i=typeof e;return"function"==i||"object"==i&&null!==e?"function"==typeof(r=e.$$hashKey)?r=e.$$hashKey():r===n&&(r=e.$$hashKey=(t||c)()):r=e,i+":"+r}function jt(e,t){if(t){var n=0;this.nextUid=function(){return++n}}o(e,this.put,this)}function Nt(e){var t,n,r,i;return"function"==typeof e?(t=e.$inject)||(t=[],e.length&&(n=e.toString().replace(Zr,""),r=n.match(Xr),o(r[1].split(Kr),function(e){e.replace(Qr,function(e,n,r){t.push(r)})})),e.$inject=t):Cr(e)?(i=e.length-1,nt(e[i],"fn"),t=e.slice(0,i)):nt(e,"fn",!0),t}function Dt(e){function t(e){return function(t,n){return b(t)?void o(t,u(e)):e(t,n)}}function n(e,t){if(rt(e,"service"),($(t)||Cr(t))&&(t=_.instantiate(t)),!t.$get)throw Yr("pget","Provider '{0}' must define $get factory method.",e);return y[e+p]=t}function r(e,t){return n(e,{$get:t})}function i(e,t){return r(e,["$injector",function(e){return e.instantiate(t)}])}function a(e,t){return r(e,g(t))}function s(e,t){rt(e,"constant"),y[e]=t,x[e]=t}function c(e,t){var n=_.get(e+p),r=n.$get;n.$get=function(){var e=S.invoke(r,n);return S.invoke(t,null,{$delegate:e})}}function l(e){var t,n,r,i,a=[];return o(e,function(e){if(!m.get(e)){m.put(e,!0);try{if(w(e))for(t=_r(e),a=a.concat(l(t.requires)).concat(t._runBlocks),n=t._invokeQueue,r=0,i=n.length;i>r;r++){var o=n[r],s=_.get(o[0]);s[o[1]].apply(s,o[2])}else $(e)?a.push(_.invoke(e)):Cr(e)?a.push(_.invoke(e)):nt(e,"module")}catch(u){throw Cr(e)&&(e=e[e.length-1]),u.message&&u.stack&&-1==u.stack.indexOf(u.message)&&(u=u.message+"\n"+u.stack),Yr("modulerr","Failed to instantiate module {0} due to:\n{1}",e,u.stack||u.message||u)}}}),a}function f(e,t){function n(n){if(e.hasOwnProperty(n)){if(e[n]===d)throw Yr("cdep","Circular dependency found: {0}",n+" <- "+v.join(" <- "));return e[n]}try{return v.unshift(n),e[n]=d,e[n]=t(n)}catch(r){throw e[n]===d&&delete e[n],r}finally{v.shift()}}function r(e,t,r){var i,o,a,s=[],u=Nt(e);for(o=0,i=u.length;i>o;o++){if(a=u[o],"string"!=typeof a)throw Yr("itkn","Incorrect injection token! Expected service name as string, got {0}",a);s.push(r&&r.hasOwnProperty(a)?r[a]:n(a))}return Cr(e)&&(e=e[i]),e.apply(t,s)}function i(e,t){var n,i,o=function(){};return o.prototype=(Cr(e)?e[e.length-1]:e).prototype,n=new o,i=r(e,n,t),b(i)||$(i)?i:n}return{invoke:r,instantiate:i,get:n,annotate:Nt,has:function(t){return y.hasOwnProperty(t+p)||e.hasOwnProperty(t)}}}var d={},p="Provider",v=[],m=new jt([],!0),y={$provide:{provider:t(n),factory:t(r),service:t(i),value:t(a),constant:t(s),decorator:c}},_=y.$injector=f(y,function(){throw Yr("unpr","Unknown provider: {0}",v.join(" <- "))}),x={},S=x.$injector=f(x,function(e){var t=_.get(e+p);return S.invoke(t.$get,t)});return o(l(e),function(e){S.invoke(e||h)}),S}function Rt(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return o(e,function(e){t||"a"!==pr(e.nodeName)||(t=e)}),t}function a(){var e,r=n.hash();r?(e=s.getElementById(r))?e.scrollIntoView():(e=i(s.getElementsByName(r)))?e.scrollIntoView():"top"===r&&t.scrollTo(0,0):t.scrollTo(0,0)}var s=t.document;return e&&r.$watch(function(){return n.hash()},function(){r.$evalAsync(a)}),a}]}function qt(){this.$get=["$$rAF","$timeout",function(e,t){return e.supported?function(t){return e(t)}:function(e){return t(e,0,!1)}}]}function Lt(e,t,r,i){function a(e){try{e.apply(null,F(arguments,1))}finally{if(y--,0===y)for(;b.length;)try{b.pop()()}catch(t){r.error(t)}}}function s(e,t){!function n(){o(x,function(e){e()}),_=t(n,e)}()}function u(){E=null,$!=c.url()&&($=c.url(),o(T,function(e){e(c.url())}))}var c=this,l=t[0],f=e.location,d=e.history,p=e.setTimeout,v=e.clearTimeout,g={};c.isMock=!1;var y=0,b=[];c.$$completeOutstandingRequest=a,c.$$incOutstandingRequestCount=function(){y++},c.notifyWhenNoOutstandingRequests=function(e){o(x,function(e){e()}),0===y?e():b.push(e)};var _,x=[];c.addPollFn=function(e){return m(_)&&s(100,p),x.push(e),e};var $=f.href,S=t.find("base"),E=null;c.url=function(t,n){if(f!==e.location&&(f=e.location),d!==e.history&&(d=e.history),t){if($==t)return;return $=t,i.history?n?d.replaceState(null,"",t):(d.pushState(null,"",t),S.attr("href",S.attr("href"))):(E=t,n?f.replace(t):f.href=t),c}return E||f.href.replace(/%27/g,"'")};var T=[],k=!1;c.onUrlChange=function(t){return k||(i.history&&br(e).on("popstate",u),i.hashchange?br(e).on("hashchange",u):c.addPollFn(u),k=!0),T.push(t),t},c.$$checkUrlChange=u,c.baseHref=function(){var e=S.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var A={},C="",O=c.baseHref();c.cookies=function(e,t){var i,o,a,s,u;if(!e){if(l.cookie!==C)for(C=l.cookie,o=C.split("; "),A={},s=0;s<o.length;s++)a=o[s],u=a.indexOf("="),u>0&&(e=unescape(a.substring(0,u)),A[e]===n&&(A[e]=unescape(a.substring(u+1))));return A}t===n?l.cookie=escape(e)+"=;path="+O+";expires=Thu, 01 Jan 1970 00:00:00 GMT":w(t)&&(i=(l.cookie=escape(e)+"="+escape(t)+";path="+O).length+1,i>4096&&r.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+i+" > 4096 bytes)!"))},c.defer=function(e,t){var n;return y++,n=p(function(){delete g[n],a(e)
},t||0),g[n]=!0,n},c.defer.cancel=function(e){return g[e]?(delete g[e],v(e),a(h),!0):!1}}function Pt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new Lt(e,r,t,n)}]}function It(){this.$get=function(){function e(e,n){function i(e){e!=d&&(p?p==e&&(p=e.n):p=e,o(e.n,e.p),o(e,d),d=e,d.n=null)}function o(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var a=0,s=f({},n,{id:e}),u={},c=n&&n.capacity||Number.MAX_VALUE,l={},d=null,p=null;return t[e]={put:function(e,t){if(c<Number.MAX_VALUE){var n=l[e]||(l[e]={key:e});i(n)}if(!m(t))return e in u||a++,u[e]=t,a>c&&this.remove(p.key),t},get:function(e){if(c<Number.MAX_VALUE){var t=l[e];if(!t)return;i(t)}return u[e]},remove:function(e){if(c<Number.MAX_VALUE){var t=l[e];if(!t)return;t==d&&(d=t.p),t==p&&(p=t.n),o(t.n,t.p),delete l[e]}delete u[e],a--},removeAll:function(){u={},a=0,l={},d=p=null},destroy:function(){u=null,s=null,l=null,delete t[e]},info:function(){return f({},s,{size:a})}}}var t={};return e.info=function(){var e={};return o(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function Ft(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Mt(e,r){var i={},a="Directive",s=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,c=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,l=/^(on[a-z]+|formaction)$/;this.directive=function d(t,n){return rt(t,"directive"),w(t)?(tt(n,"directiveFactory"),i.hasOwnProperty(t)||(i[t]=[],e.factory(t+a,["$injector","$exceptionHandler",function(e,n){var r=[];return o(i[t],function(i,o){try{var a=e.invoke(i);$(a)?a={compile:g(a)}:!a.compile&&a.link&&(a.compile=g(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||t,a.require=a.require||a.controller&&a.name,a.restrict=a.restrict||"A",r.push(a)}catch(s){n(s)}}),r}])),i[t].push(n)):o(t,u(d)),this},this.aHrefSanitizationWhitelist=function(e){return y(e)?(r.aHrefSanitizationWhitelist(e),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return y(e)?(r.imgSrcSanitizationWhitelist(e),this):r.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,r,u,d,h,g,m,y,_,x,S,E){function T(e,t,n,r,i){e instanceof br||(e=br(e)),o(e,function(t,n){3==t.nodeType&&t.nodeValue.match(/\S+/)&&(e[n]=t=br(t).wrap("<span></span>").parent()[0])});var a=A(e,t,e,n,r,i);return k(e,"ng-scope"),function(t,n,r,i){tt(t,"scope");var s=n?Wr.clone.call(e):e;o(r,function(e,t){s.data("$"+t+"Controller",e)});for(var u=0,c=s.length;c>u;u++){var l=s[u],f=l.nodeType;(1===f||9===f)&&s.eq(u).data("$scope",t)}return n&&n(s,t),a&&a(t,s,s,i),s}}function k(e,t){try{e.addClass(t)}catch(n){}}function A(e,t,r,i,o,a){function s(e,r,i,o){var a,s,u,c,l,f,d,p,v=r.length,g=new Array(v);for(l=0;v>l;l++)g[l]=r[l];for(l=0,d=0,f=h.length;f>l;d++)u=g[d],a=h[l++],s=h[l++],a?(a.scope?(c=e.$new(),br.data(u,"$scope",c)):c=e,p=a.transcludeOnThisElement?C(e,a.transclude,o):!a.templateOnThisElement&&o?o:!o&&t?C(e,t):null,a(s,c,u,i,p)):s&&s(e,u.childNodes,n,o)}for(var u,c,l,f,d,p,h=[],v=0;v<e.length;v++)u=new X,c=O(e[v],[],u,0===v?i:n,o),l=c.length?D(c,e[v],u,t,r,null,[],[],a):null,l&&l.scope&&k(u.$$element,"ng-scope"),d=l&&l.terminal||!(f=e[v].childNodes)||!f.length?null:A(f,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:t),h.push(l,d),p=p||l||d,a=null;return p?s:null}function C(e,t,n){var r=function(r,i,o){var a=!1;r||(r=e.$new(),r.$$transcluded=!0,a=!0);var s=t(r,i,o,n);return a&&s.on("$destroy",function(){r.$destroy()}),s};return r}function O(e,t,n,r,i){var o,a,u=e.nodeType,l=n.$attr;switch(u){case 1:q(t,Bt(xr(e).toLowerCase()),"E",r,i);for(var f,d,p,h,v,g,m=e.attributes,y=0,b=m&&m.length;b>y;y++){var _=!1,x=!1;if(f=m[y],!yr||yr>=8||f.specified){d=f.name,v=Or(f.value),h=Bt(d),(g=et.test(h))&&(d=Y(h.substr(6),"-"));var $=h.replace(/(Start|End)$/,"");h===$+"Start"&&(_=d,x=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),p=Bt(d.toLowerCase()),l[p]=d,(g||!n.hasOwnProperty(p))&&(n[p]=v,At(e,p)&&(n[p]=!0)),W(e,t,v,p),q(t,p,"A",r,i,_,x)}}if(a=e.className,w(a)&&""!==a)for(;o=c.exec(a);)p=Bt(o[2]),q(t,p,"C",r,i)&&(n[p]=Or(o[3])),a=a.substr(o.index+o[0].length);break;case 3:H(t,e.nodeValue);break;case 8:try{o=s.exec(e.nodeValue),o&&(p=Bt(o[1]),q(t,p,"M",r,i)&&(n[p]=Or(o[2])))}catch(S){}}return t.sort(B),t}function j(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw ni("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);1==e.nodeType&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0)}else r.push(e);return br(r)}function N(e,t,n){return function(r,i,o,a,s){return i=j(i[0],t,n),e(r,i,o,a,s)}}function D(e,i,a,s,c,l,f,d,p){function h(e,t,n,r){e&&(n&&(e=N(e,n,r)),e.require=x.require,e.directiveName=S,(B===x||x.$$isolateScope)&&(e=G(e,{isolateScope:!0})),f.push(e)),t&&(n&&(t=N(t,n,r)),t.require=x.require,t.directiveName=S,(B===x||x.$$isolateScope)&&(t=G(t,{isolateScope:!0})),d.push(t))}function v(e,t,n,r){var i,a="data",s=!1;if(w(t)){for(;"^"==(i=t.charAt(0))||"?"==i;)t=t.substr(1),"^"==i&&(a="inheritedData"),s=s||"?"==i;if(i=null,r&&"data"===a&&(i=r[t]),i=i||n[a]("$"+t+"Controller"),!i&&!s)throw ni("ctreq","Controller '{0}', required by directive '{1}', can't be found!",t,e);return i}return Cr(t)&&(i=[],o(t,function(t){i.push(v(e,t,n,r))})),i}function y(e,t,s,c,l){function p(e,t){var r;return arguments.length<2&&(t=e,e=n),Q&&(r=E),l(e,t,r)}var h,y,b,w,_,x,$,S,E={};if(h=i===s?a:L(a,new X(br(s),a.$attr)),y=h.$$element,B){var T=/^\s*([@=&])(\??)\s*(\w*)\s*$/;$=t.$new(!0),!H||H!==B&&H!==B.$$originalDirective?y.data("$isolateScopeNoTemplate",$):y.data("$isolateScope",$),k(y,"ng-isolate-scope"),o(B.scope,function(e,n){var i,o,a,s,u=e.match(T)||[],c=u[3]||n,l="?"==u[2],f=u[1];switch($.$$isolateBindings[n]=f+c,f){case"@":h.$observe(c,function(e){$[n]=e}),h.$$observers[c].$$scope=t,h[c]&&($[n]=r(h[c])(t));break;case"=":if(l&&!h[c])return;o=g(h[c]),s=o.literal?P:function(e,t){return e===t||e!==e&&t!==t},a=o.assign||function(){throw i=$[n]=o(t),ni("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",h[c],B.name)},i=$[n]=o(t),$.$watch(function(){var e=o(t);return s(e,$[n])||(s(e,i)?a(t,e=$[n]):$[n]=e),i=e},null,o.literal);break;case"&":o=g(h[c]),$[n]=function(e){return o(t,e)};break;default:throw ni("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",B.name,n,e)}})}for(S=l&&p,q&&o(q,function(e){var n,r={$scope:e===B||e.$$isolateScope?$:t,$element:y,$attrs:h,$transclude:S};x=e.controller,"@"==x&&(x=h[e.name]),n=m(x,r),E[e.name]=n,Q||y.data("$"+e.name+"Controller",n),e.controllerAs&&(r.$scope[e.controllerAs]=n)}),b=0,w=f.length;w>b;b++)try{_=f[b],_(_.isolateScope?$:t,y,h,_.require&&v(_.directiveName,_.require,y,E),S)}catch(A){u(A,V(y))}var C=t;for(B&&(B.template||null===B.templateUrl)&&(C=$),e&&e(C,s.childNodes,n,l),b=d.length-1;b>=0;b--)try{_=d[b],_(_.isolateScope?$:t,y,h,_.require&&v(_.directiveName,_.require,y,E),S)}catch(A){u(A,V(y))}}p=p||{};for(var _,x,S,E,A,C,D=-Number.MAX_VALUE,q=p.controllerDirectives,B=p.newIsolateScopeDirective,H=p.templateDirective,z=p.nonTlbTranscludeDirective,W=!1,K=!1,Q=p.hasElementTranscludeDirective,Y=a.$$element=br(i),et=l,tt=s,nt=0,rt=e.length;rt>nt;nt++){x=e[nt];var it=x.$$start,ot=x.$$end;if(it&&(Y=j(i,it,ot)),E=n,D>x.priority)break;if((C=x.scope)&&(_=_||x,x.templateUrl||(U("new/isolated scope",B,x,Y),b(C)&&(B=x))),S=x.name,!x.templateUrl&&x.controller&&(C=x.controller,q=q||{},U("'"+S+"' controller",q[S],x,Y),q[S]=x),(C=x.transclude)&&(W=!0,x.$$tlb||(U("transclusion",z,x,Y),z=x),"element"==C?(Q=!0,D=x.priority,E=Y,Y=a.$$element=br(t.createComment(" "+S+": "+a[S]+" ")),i=Y[0],J(c,F(E),i),tt=T(E,s,D,et&&et.name,{nonTlbTranscludeDirective:z})):(E=br(vt(i)).contents(),Y.empty(),tt=T(E,s))),x.template)if(K=!0,U("template",H,x,Y),H=x,C=$(x.template)?x.template(Y,a):x.template,C=Z(C),x.replace){if(et=x,E=ft(C)?[]:br(Or(C)),i=E[0],1!=E.length||1!==i.nodeType)throw ni("tplrt","Template for directive '{0}' must have exactly one root element. {1}",S,"");J(c,Y,i);var at={$attr:{}},st=O(i,[],at),ut=e.splice(nt+1,e.length-(nt+1));B&&R(st),e=e.concat(st).concat(ut),I(a,at),rt=e.length}else Y.html(C);if(x.templateUrl)K=!0,U("template",H,x,Y),H=x,x.replace&&(et=x),y=M(e.splice(nt,e.length-nt),Y,a,c,W&&tt,f,d,{controllerDirectives:q,newIsolateScopeDirective:B,templateDirective:H,nonTlbTranscludeDirective:z}),rt=e.length;else if(x.compile)try{A=x.compile(Y,a,tt),$(A)?h(null,A,it,ot):A&&h(A.pre,A.post,it,ot)}catch(ct){u(ct,V(Y))}x.terminal&&(y.terminal=!0,D=Math.max(D,x.priority))}return y.scope=_&&_.scope===!0,y.transcludeOnThisElement=W,y.templateOnThisElement=K,y.transclude=tt,p.hasElementTranscludeDirective=Q,y}function R(e){for(var t=0,n=e.length;n>t;t++)e[t]=p(e[t],{$$isolateScope:!0})}function q(t,r,o,s,c,l,f){if(r===c)return null;var d=null;if(i.hasOwnProperty(r))for(var h,v=e.get(r+a),g=0,m=v.length;m>g;g++)try{h=v[g],(s===n||s>h.priority)&&-1!=h.restrict.indexOf(o)&&(l&&(h=p(h,{$$start:l,$$end:f})),t.push(h),d=h)}catch(y){u(y)}return d}function I(e,t){var n=t.$attr,r=e.$attr,i=e.$$element;o(e,function(r,i){"$"!=i.charAt(0)&&(t[i]&&t[i]!==r&&(r+=("style"===i?";":" ")+t[i]),e.$set(i,r,!0,n[i]))}),o(t,function(t,o){"class"==o?(k(i,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==o?(i.attr("style",i.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==o.charAt(0)||e.hasOwnProperty(o)||(e[o]=t,r[o]=n[o])})}function M(e,t,n,r,i,a,s,u){var c,l,p=[],v=t[0],g=e.shift(),m=f({},g,{templateUrl:null,transclude:null,replace:null,$$originalDirective:g}),y=$(g.templateUrl)?g.templateUrl(t,n):g.templateUrl;return t.empty(),d.get(x.getTrustedResourceUrl(y),{cache:h}).success(function(f){var d,h,w,_;if(f=Z(f),g.replace){if(w=ft(f)?[]:br(Or(f)),d=w[0],1!=w.length||1!==d.nodeType)throw ni("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g.name,y);h={$attr:{}},J(r,t,d);var x=O(d,[],h);b(g.scope)&&R(x),e=x.concat(e),I(n,h)}else d=v,t.html(f);for(e.unshift(m),c=D(e,d,n,i,t,g,a,s,u),o(r,function(e,n){e==d&&(r[n]=t[0])}),l=A(t[0].childNodes,i);p.length;){var $=p.shift(),S=p.shift(),E=p.shift(),T=p.shift(),j=t[0];if(S!==v){var N=S.className;u.hasElementTranscludeDirective&&g.replace||(j=vt(d)),J(E,br(S),j),k(br(j),N)}_=c.transcludeOnThisElement?C($,c.transclude,T):T,c(l,$,j,r,_)}p=null}).error(function(e,t,n,r){throw ni("tpload","Failed to load template: {0}",r.url)}),function(e,t,n,r,i){var o=i;p?(p.push(t),p.push(n),p.push(r),p.push(o)):(c.transcludeOnThisElement&&(o=C(t,c.transclude,i)),c(l,t,n,r,o))}}function B(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function U(e,t,n,r){if(t)throw ni("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,V(r))}function H(e,t){var n=r(t,!0);n&&e.push({priority:0,compile:function(e){var t=e.parent(),r=t.length;return r&&k(e.parent(),"ng-binding"),function(e,t){var i=t.parent(),o=i.data("$binding")||[];o.push(n),i.data("$binding",o),r||k(i,"ng-binding"),e.$watch(n,function(e){t[0].nodeValue=e})}}})}function z(e,t){if("srcdoc"==t)return x.HTML;var n=xr(e);return"xlinkHref"==t||"FORM"==n&&"action"==t||"IMG"!=n&&("src"==t||"ngSrc"==t)?x.RESOURCE_URL:void 0}function W(e,t,n,i){var o=r(n,!0);if(o){if("multiple"===i&&"SELECT"===xr(e))throw ni("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",V(e));t.push({priority:100,compile:function(){return{pre:function(t,n,a){var s=a.$$observers||(a.$$observers={});if(l.test(i))throw ni("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");o=r(a[i],!0,z(e,i)),o&&(a[i]=o(t),(s[i]||(s[i]=[])).$$inter=!0,(a.$$observers&&a.$$observers[i].$$scope||t).$watch(o,function(e,t){"class"===i&&e!=t?a.$updateClass(e,t):a.$set(i,e)}))}}}})}}function J(e,n,r){var i,o,a=n[0],s=n.length,u=a.parentNode;if(e)for(i=0,o=e.length;o>i;i++)if(e[i]==a){e[i++]=r;for(var c=i,l=c+s-1,f=e.length;f>c;c++,l++)f>l?e[c]=e[l]:delete e[c];e.length-=s-1;break}u&&u.replaceChild(r,a);var d=t.createDocumentFragment();d.appendChild(a),r[br.expando]=a[br.expando];for(var p=1,h=n.length;h>p;p++){var v=n[p];br(v).remove(),d.appendChild(v),delete n[p]}n[0]=r,n.length=1}function G(e,t){return f(function(){return e.apply(null,arguments)},e,t)}var X=function(e,t){this.$$element=e,this.$attr=t||{}};X.prototype={$normalize:Bt,$addClass:function(e){e&&e.length>0&&S.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&S.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Ut(e,t),r=Ut(t,e);0===n.length?S.removeClass(this.$$element,r):0===r.length?S.addClass(this.$$element,n):S.setClass(this.$$element,n,r)},$set:function(e,t,r,i){var a,s=At(this.$$element[0],e);s&&(this.$$element.prop(e,t),i=s),this[e]=t,i?this.$attr[e]=i:(i=this.$attr[e],i||(this.$attr[e]=i=Y(e,"-"))),a=xr(this.$$element),("A"===a&&"href"===e||"IMG"===a&&"src"===e)&&(this[e]=t=E(t,"src"===e)),r!==!1&&(null===t||t===n?this.$$element.removeAttr(i):this.$$element.attr(i,t));var c=this.$$observers;c&&o(c[e],function(e){try{e(t)}catch(n){u(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers={}),i=r[e]||(r[e]=[]);return i.push(t),y.$evalAsync(function(){i.$$inter||t(n[e])}),t}};var K=r.startSymbol(),Q=r.endSymbol(),Z="{{"==K||"}}"==Q?v:function(e){return e.replace(/\{\{/g,K).replace(/}}/g,Q)},et=/^ngAttr[A-Z]/;return T}]}function Bt(e){return ct(e.replace(ri,""))}function Ut(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a==i[s])continue e;n+=(n.length>0?" ":"")+a}return n}function Ht(){var e={},t=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,n){rt(t,"controller"),b(t)?f(e,t):e[t]=n},this.$get=["$injector","$window",function(n,i){return function(o,a){var s,u,c,l;if(w(o)&&(u=o.match(t),c=u[1],l=u[3],o=e.hasOwnProperty(c)?e[c]:it(a.$scope,c,!0)||it(i,c,!0),nt(o,c,!0)),s=n.instantiate(o,a),l){if(!a||"object"!=typeof a.$scope)throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",c||o.name,l);a.$scope[l]=s}return s}}]}function zt(){this.$get=["$window",function(e){return br(e.document)}]}function Vt(){this.$get=["$log",function(e){return function(){e.error.apply(e,arguments)}}]}function Wt(e){var t,n,r,i={};return e?(o(e.split("\n"),function(e){r=e.indexOf(":"),t=pr(Or(e.substr(0,r))),n=Or(e.substr(r+1)),t&&(i[t]=i[t]?i[t]+", "+n:n)}),i):i}function Jt(e){var t=b(e)?e:n;return function(n){return t||(t=Wt(e)),n?t[pr(n)]||null:t}}function Gt(e,t,n){return $(n)?n(e,t):(o(n,function(n){e=n(e,t)}),e)}function Xt(e){return e>=200&&300>e}function Kt(){var e=/^\s*(\[|\{[^\{])/,t=/[\}\]]\s*$/,r=/^\)\]\}',?\n/,i={"Content-Type":"application/json;charset=utf-8"},a=this.defaults={transformResponse:[function(n){return w(n)&&(n=n.replace(r,""),e.test(n)&&t.test(n)&&(n=H(n))),n}],transformRequest:[function(e){return!b(e)||k(e)||A(e)?e:U(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:L(i),put:L(i),patch:L(i)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},u=this.interceptors=[],c=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(e,t,r,i,l,d){function p(e){function t(e){var t=f({},e,{data:Gt(e.data,e.headers,i.transformResponse)});return Xt(e.status)?t:l.reject(t)}function r(e){function t(e){var t;o(e,function(n,r){$(n)&&(t=n(),null!=t?e[r]=t:delete e[r])})}var n,r,i,s=a.headers,u=f({},e.headers);s=f({},s.common,s[pr(e.method)]);e:for(n in s){r=pr(n);for(i in u)if(pr(i)===r)continue e;u[n]=s[n]}return t(u),u}var i={method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse},s=r(e);f(i,e),i.headers=s,i.method=vr(i.method);var u=function(e){s=e.headers;var n=Gt(e.data,Jt(s),e.transformRequest);return m(n)&&o(s,function(e,t){"content-type"===pr(t)&&delete s[t]}),m(e.withCredentials)&&!m(a.withCredentials)&&(e.withCredentials=a.withCredentials),g(e,n,s).then(t,t)},c=[u,n],d=l.when(i);for(o(E,function(e){(e.request||e.requestError)&&c.unshift(e.request,e.requestError),(e.response||e.responseError)&&c.push(e.response,e.responseError)});c.length;){var p=c.shift(),h=c.shift();d=d.then(p,h)}return d.success=function(e){return d.then(function(t){e(t.data,t.status,t.headers,i)}),d},d.error=function(e){return d.then(null,function(t){e(t.data,t.status,t.headers,i)}),d},d}function h(){o(arguments,function(e){p[e]=function(t,n){return p(f(n||{},{method:e,url:t}))}})}function v(){o(arguments,function(e){p[e]=function(t,n,r){return p(f(r||{},{method:e,url:t,data:n}))}})}function g(r,o,s){function u(e,t,n,r){d&&(Xt(e)?d.put(w,[e,t,Wt(n),r]):d.remove(w)),c(t,e,n,r),i.$$phase||i.$apply()}function c(e,t,n,i){t=Math.max(t,0),(Xt(t)?v.resolve:v.reject)({data:e,status:t,headers:Jt(n),config:r,statusText:i})}function f(){var e=D(p.pendingRequests,r);-1!==e&&p.pendingRequests.splice(e,1)}var d,h,v=l.defer(),g=v.promise,w=_(r.url,r.params);if(p.pendingRequests.push(r),g.then(f,f),!r.cache&&!a.cache||r.cache===!1||"GET"!==r.method&&"JSONP"!==r.method||(d=b(r.cache)?r.cache:b(a.cache)?a.cache:S),d)if(h=d.get(w),y(h)){if(C(h))return h.then(f,f),h;Cr(h)?c(h[1],h[0],L(h[2]),h[3]):c(h,200,{},"OK")}else d.put(w,g);if(m(h)){var x=In(r.url)?t.cookies()[r.xsrfCookieName||a.xsrfCookieName]:n;x&&(s[r.xsrfHeaderName||a.xsrfHeaderName]=x),e(r.method,w,o,u,s,r.timeout,r.withCredentials,r.responseType)}return g}function _(e,t){if(!t)return e;var n=[];return s(t,function(e,t){null===e||m(e)||(Cr(e)||(e=[e]),o(e,function(e){b(e)&&(e=x(e)?e.toISOString():U(e)),n.push(K(t)+"="+K(e))}))}),n.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+n.join("&")),e}var S=r("$http"),E=[];return o(u,function(e){E.unshift(w(e)?d.get(e):d.invoke(e))}),o(c,function(e,t){var n=w(e)?d.get(e):d.invoke(e);E.splice(t,0,{response:function(e){return n(l.when(e))},responseError:function(e){return n(l.reject(e))}})}),p.pendingRequests=[],h("get","delete","head","jsonp"),v("post","put"),p.defaults=a,p}]}function Qt(t){if(8>=yr&&(!t.match(/^(get|post|head|put|delete|options)$/i)||!e.XMLHttpRequest))return new e.ActiveXObject("Microsoft.XMLHTTP");if(e.XMLHttpRequest)return new e.XMLHttpRequest;throw r("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function Zt(){this.$get=["$browser","$window","$document",function(e,t,n){return Yt(e,Qt,e.defer,t.angular.callbacks,n[0])}]}function Yt(e,t,n,r,i){function a(e,t,n){var o=i.createElement("script"),a=null;return o.type="text/javascript",o.src=e,o.async=!0,a=function(e){Pr(o,"load",a),Pr(o,"error",a),i.body.removeChild(o),o=null;var s=-1,u="unknown";e&&("load"!==e.type||r[t].called||(e={type:"error"}),u=e.type,s="error"===e.type?404:200),n&&n(s,u)},Lr(o,"load",a),Lr(o,"error",a),8>=yr&&(o.onreadystatechange=function(){w(o.readyState)&&/loaded|complete/.test(o.readyState)&&(o.onreadystatechange=null,a({type:"load"}))}),i.body.appendChild(o),a}var s=-1;return function(i,u,c,l,f,d,p,v){function g(){b=s,_&&_(),x&&x.abort()}function m(t,r,i,o,a){S&&n.cancel(S),_=x=null,0===r&&(r=i?200:"file"==Pn(u).protocol?404:0),r=1223===r?204:r,a=a||"",t(r,i,o,a),e.$$completeOutstandingRequest(h)}var b;if(e.$$incOutstandingRequestCount(),u=u||e.url(),"jsonp"==pr(i)){var w="_"+(r.counter++).toString(36);r[w]=function(e){r[w].data=e,r[w].called=!0};var _=a(u.replace("JSON_CALLBACK","angular.callbacks."+w),w,function(e,t){m(l,e,r[w].data,"",t),r[w]=h})}else{var x=t(i);if(x.open(i,u,!0),o(f,function(e,t){y(e)&&x.setRequestHeader(t,e)}),x.onreadystatechange=function(){if(x&&4==x.readyState){var e=null,t=null,n="";b!==s&&(e=x.getAllResponseHeaders(),t="response"in x?x.response:x.responseText),b===s&&10>yr||(n=x.statusText),m(l,b||x.status,t,e,n)}},p&&(x.withCredentials=!0),v)try{x.responseType=v}catch($){if("json"!==v)throw $}x.send(c||null)}if(d>0)var S=n(g,d);else C(d)&&d.then(g)}}function en(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(o,u,c){for(var l,f,d,p,h=0,v=[],g=o.length,m=!1,y=[];g>h;)-1!=(l=o.indexOf(e,h))&&-1!=(f=o.indexOf(t,l+a))?(h!=l&&v.push(o.substring(h,l)),v.push(d=n(p=o.substring(l+a,f))),d.exp=p,h=f+s,m=!0):(h!=g&&v.push(o.substring(h)),h=g);if((g=v.length)||(v.push(""),g=1),c&&v.length>1)throw ii("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",o);return!u||m?(y.length=g,d=function(e){try{for(var t,n=0,a=g;a>n;n++){if("function"==typeof(t=v[n]))if(t=t(e),t=c?i.getTrusted(c,t):i.valueOf(t),null==t)t="";else switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=U(t)}y[n]=t}return y.join("")}catch(s){var u=ii("interr","Can't interpolate: {0}\n{1}",o,s.toString());r(u)}},d.exp=o,d.parts=v,d):void 0}var a=e.length,s=t.length;return o.startSymbol=function(){return e},o.endSymbol=function(){return t},o}]}function tn(){this.$get=["$rootScope","$window","$q",function(e,t,n){function r(r,o,a,s){var u=t.setInterval,c=t.clearInterval,l=n.defer(),f=l.promise,d=0,p=y(s)&&!s;return a=y(a)?a:0,f.then(null,null,r),f.$$intervalId=u(function(){l.notify(d++),a>0&&d>=a&&(l.resolve(d),c(f.$$intervalId),delete i[f.$$intervalId]),p||e.$apply()},o),i[f.$$intervalId]=l,f}var i={};return r.cancel=function(e){return e&&e.$$intervalId in i?(i[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete i[e.$$intervalId],!0):!1},r}]}function nn(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(e){return 1===e?"one":"other"}}}}function rn(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=X(t[n]);return t.join("/")}function on(e,t,n){var r=Pn(e,n);t.$$protocol=r.protocol,t.$$host=r.hostname,t.$$port=d(r.port)||ai[r.protocol]||null}function an(e,t,n){var r="/"!==e.charAt(0);r&&(e="/"+e);var i=Pn(e,n);t.$$path=decodeURIComponent(r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),t.$$search=J(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function sn(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function un(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function cn(e){return e.substr(0,un(e).lastIndexOf("/")+1)}function ln(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function fn(e,t){this.$$html5=!0,t=t||"";var r=cn(e);on(e,this,e),this.$$parse=function(t){var n=sn(r,t);if(!w(n))throw si("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,r);an(n,this,e),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=G(this.$$search),t=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rn(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=r+this.$$url.substr(1)},this.$$rewrite=function(i){var o,a;return(o=sn(e,i))!==n?(a=o,(o=sn(t,o))!==n?r+(sn("/",o)||o):e+a):(o=sn(r,i))!==n?r+o:r==i+"/"?r:void 0}}function dn(e,t){var n=cn(e);on(e,this,e),this.$$parse=function(r){function i(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e),r?r[1]:e)}var o=sn(e,r)||sn(n,r),a="#"==o.charAt(0)?sn(t,o):this.$$html5?o:"";if(!w(a))throw si("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',r,t);an(a,this,e),this.$$path=i(this.$$path,a,e),this.$$compose()},this.$$compose=function(){var n=G(this.$$search),r=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rn(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=e+(this.$$url?t+this.$$url:"")},this.$$rewrite=function(t){return un(e)==un(t)?t:void 0}}function pn(e,t){this.$$html5=!0,dn.apply(this,arguments);var n=cn(e);this.$$rewrite=function(r){var i;return e==un(r)?r:(i=sn(n,r))?e+t+i:n===r+"/"?n:void 0},this.$$compose=function(){var n=G(this.$$search),r=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rn(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=e+t+this.$$url}}function hn(e){return function(){return this[e]}}function vn(e,t){return function(n){return m(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function gn(){var t="",n=!1;this.hashPrefix=function(e){return y(e)?(t=e,this):t},this.html5Mode=function(e){return y(e)?(n=e,this):n},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(r,i,o,a){function s(e){r.$broadcast("$locationChangeSuccess",u.absUrl(),e)}var u,c,l,f=i.baseHref(),d=i.url();n?(l=ln(d)+(f||"/"),c=o.history?fn:pn):(l=un(d),c=dn),u=new c(l,"#"+t),u.$$parse(u.$$rewrite(d));var p=/^\s*(javascript|mailto):/i;a.on("click",function(n){if(!n.ctrlKey&&!n.metaKey&&2!=n.which){for(var o=br(n.target);"a"!==pr(o[0].nodeName);)if(o[0]===a[0]||!(o=o.parent())[0])return;var s=o.prop("href");if(b(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=Pn(s.animVal).href),!p.test(s)){if(c===pn){var f=o.attr("href")||o.attr("xlink:href");if(f&&f.indexOf("://")<0){var d="#"+t;if("/"==f[0])s=l+d+f;else if("#"==f[0])s=l+d+(u.path()||"/")+f;else{var h=u.path().split("/"),v=f.split("/");2!==h.length||h[1]||(h.length=1);for(var g=0;g<v.length;g++)"."!=v[g]&&(".."==v[g]?h.pop():v[g].length&&h.push(v[g]));s=l+d+h.join("/")}}}var m=u.$$rewrite(s);s&&!o.attr("target")&&m&&!n.isDefaultPrevented()&&(n.preventDefault(),m!=i.url()&&(u.$$parse(m),r.$apply(),e.angular["ff-684208-preventDefault"]=!0))}}}),u.absUrl()!=d&&i.url(u.absUrl(),!0),i.onUrlChange(function(e){u.absUrl()!=e&&(r.$evalAsync(function(){var t=u.absUrl();u.$$parse(e),r.$broadcast("$locationChangeStart",e,t).defaultPrevented?(u.$$parse(t),i.url(t)):s(t)}),r.$$phase||r.$digest())});var h=0;return r.$watch(function(){var e=i.url(),t=u.$$replace;return h&&e==u.absUrl()||(h++,r.$evalAsync(function(){r.$broadcast("$locationChangeStart",u.absUrl(),e).defaultPrevented?u.$$parse(e):(i.url(u.absUrl(),t),s(e))})),u.$$replace=!1,h}),u}]}function mn(){var e=!0,t=this;this.debugEnabled=function(t){return y(t)?(e=t,this):e},this.$get=["$window",function(n){function r(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function i(e){var t=n.console||{},i=t[e]||t.log||h,a=!1;try{a=!!i.apply}catch(s){}return a?function(){var e=[];return o(arguments,function(t){e.push(r(t))}),i.apply(t,e)}:function(e,t){i(e,null==t?"":t)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function yn(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw ci("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function bn(e,t){if(e){if(e.constructor===e)throw ci("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.document&&e.location&&e.alert&&e.setInterval)throw ci("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw ci("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw ci("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function wn(e,t){if(e){if(e.constructor===e)throw ci("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===fi||e===di||pi&&e===pi)throw ci("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function _n(e,t,r,i,o){bn(e,i),o=o||{};for(var a,s=t.split("."),u=0;s.length>1;u++){a=yn(s.shift(),i);var c=bn(e[a],i);c||(c={},e[a]=c),e=c,e.then&&o.unwrapPromises&&(ui(i),"$$v"in e||!function(e){e.then(function(t){e.$$v=t})}(e),e.$$v===n&&(e.$$v={}),e=e.$$v)}return a=yn(s.shift(),i),bn(e[a],i),e[a]=r,r}function xn(e,t,r,i,o,a,s){return yn(e,a),yn(t,a),yn(r,a),yn(i,a),yn(o,a),s.unwrapPromises?function(s,u){var c,l=u&&u.hasOwnProperty(e)?u:s;return null==l?l:(l=l[e],l&&l.then&&(ui(a),"$$v"in l||(c=l,c.$$v=n,c.then(function(e){c.$$v=e})),l=l.$$v),t?null==l?n:(l=l[t],l&&l.then&&(ui(a),"$$v"in l||(c=l,c.$$v=n,c.then(function(e){c.$$v=e})),l=l.$$v),r?null==l?n:(l=l[r],l&&l.then&&(ui(a),"$$v"in l||(c=l,c.$$v=n,c.then(function(e){c.$$v=e})),l=l.$$v),i?null==l?n:(l=l[i],l&&l.then&&(ui(a),"$$v"in l||(c=l,c.$$v=n,c.then(function(e){c.$$v=e})),l=l.$$v),o?null==l?n:(l=l[o],l&&l.then&&(ui(a),"$$v"in l||(c=l,c.$$v=n,c.then(function(e){c.$$v=e})),l=l.$$v),l):l):l):l):l)}:function(a,s){var u=s&&s.hasOwnProperty(e)?s:a;return null==u?u:(u=u[e],t?null==u?n:(u=u[t],r?null==u?n:(u=u[r],i?null==u?n:(u=u[i],o?null==u?n:u=u[o]:u):u):u):u)}}function $n(e,t,r){if(yi.hasOwnProperty(e))return yi[e];var i,a=e.split("."),s=a.length;if(t.csp)i=6>s?xn(a[0],a[1],a[2],a[3],a[4],r,t):function(e,i){var o,u=0;do o=xn(a[u++],a[u++],a[u++],a[u++],a[u++],r,t)(e,i),i=n,e=o;while(s>u);return o};else{var u="var p;\n";o(a,function(e,n){yn(e,r),u+="if(s == null) return undefined;\ns="+(n?"s":'((k&&k.hasOwnProperty("'+e+'"))?k:s)')+'["'+e+'"];\n'+(t.unwrapPromises?'if (s && s.then) {\n pw("'+r.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")}),u+="return s;";var c=new Function("s","k","pw",u);c.toString=g(u),i=t.unwrapPromises?function(e,t){return c(e,t,ui)}:c}return"hasOwnProperty"!==e&&(yi[e]=i),i}function Sn(){var e={},t={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=function(e){return y(e)?(t.unwrapPromises=!!e,this):t.unwrapPromises},this.logPromiseWarnings=function(e){return y(e)?(t.logPromiseWarnings=e,this):t.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function(n,r,i){return t.csp=r.csp,ui=function(e){t.logPromiseWarnings&&!li.hasOwnProperty(e)&&(li[e]=!0,i.warn("[$parse] Promise found in the expression `"+e+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(r){var i;switch(typeof r){case"string":if(e.hasOwnProperty(r))return e[r];var o=new gi(t),a=new mi(o,n,t);return i=a.parse(r),"hasOwnProperty"!==r&&(e[r]=i),i;case"function":return r;default:return h}}}]}function En(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Tn(function(t){e.$evalAsync(t)},t)}]}function Tn(e,t){function r(e){return e}function i(e){return c(e)}function a(e){var t=s(),n=0,r=Cr(e)?[]:{};return o(e,function(e,i){n++,u(e).then(function(e){r.hasOwnProperty(i)||(r[i]=e,--n||t.resolve(r))},function(e){r.hasOwnProperty(i)||t.reject(e)})}),0===n&&t.resolve(r),t.promise}var s=function(){var o,a,c=[];return a={resolve:function(t){if(c){var r=c;c=n,o=u(t),r.length&&e(function(){for(var e,t=0,n=r.length;n>t;t++)e=r[t],o.then(e[0],e[1],e[2])})}},reject:function(e){a.resolve(l(e))},notify:function(t){if(c){var n=c;c.length&&e(function(){for(var e,r=0,i=n.length;i>r;r++)e=n[r],e[2](t)})}},promise:{then:function(e,n,a){var u=s(),l=function(n){try{u.resolve(($(e)?e:r)(n))
}catch(i){u.reject(i),t(i)}},f=function(e){try{u.resolve(($(n)?n:i)(e))}catch(r){u.reject(r),t(r)}},d=function(e){try{u.notify(($(a)?a:r)(e))}catch(n){t(n)}};return c?c.push([l,f,d]):o.then(l,f,d),u.promise},"catch":function(e){return this.then(null,e)},"finally":function(e){function t(e,t){var n=s();return t?n.resolve(e):n.reject(e),n.promise}function n(n,i){var o=null;try{o=(e||r)()}catch(a){return t(a,!1)}return C(o)?o.then(function(){return t(n,i)},function(e){return t(e,!1)}):t(n,i)}return this.then(function(e){return n(e,!0)},function(e){return n(e,!1)})}}}},u=function(t){return C(t)?t:{then:function(n){var r=s();return e(function(){r.resolve(n(t))}),r.promise}}},c=function(e){var t=s();return t.reject(e),t.promise},l=function(n){return{then:function(r,o){var a=s();return e(function(){try{a.resolve(($(o)?o:i)(n))}catch(e){a.reject(e),t(e)}}),a.promise}}},f=function(n,o,a,l){var f,d=s(),p=function(e){try{return($(o)?o:r)(e)}catch(n){return t(n),c(n)}},h=function(e){try{return($(a)?a:i)(e)}catch(n){return t(n),c(n)}},v=function(e){try{return($(l)?l:r)(e)}catch(n){t(n)}};return e(function(){u(n).then(function(e){f||(f=!0,d.resolve(u(e).then(p,h,v)))},function(e){f||(f=!0,d.resolve(h(e)))},function(e){f||d.notify(v(e))})}),d.promise};return{defer:s,reject:c,when:f,all:a}}function kn(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=i,o}]}function An(){var e=10,t=r("$rootScope"),n=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,a,s,u){function l(){this.$id=c(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}function f(e){if(m.$$phase)throw t("inprog","{0} already in progress",m.$$phase);m.$$phase=e}function d(){m.$$phase=null}function p(e,t){var n=s(e);return nt(n,t),n}function v(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function g(){}l.prototype={constructor:l,$new:function(e){var t;return e?(t=new l,t.$root=this.$root,t.$$asyncQueue=this.$$asyncQueue,t.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=c(),this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),t=new this.$$childScopeClass),t["this"]=t,t.$parent=this,t.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=t,this.$$childTail=t):this.$$childHead=this.$$childTail=t,t},$watch:function(e,t,r){var i=this,o=p(e,"watch"),a=i.$$watchers,s={fn:t,last:g,get:o,exp:e,eq:!!r};if(n=null,!$(t)){var u=p(t||h,"listener");s.fn=function(e,t,n){u(n)}}if("string"==typeof e&&o.constant){var c=s.fn;s.fn=function(e,t,n){c.call(this,e,t,n),R(a,s)}}return a||(a=i.$$watchers=[]),a.unshift(s),function(){R(a,s),n=null}},$watchCollection:function(e,t){function n(){o=d(c);var e,t,n;if(b(o))if(i(o)){a!==p&&(a=p,g=a.length=0,f++),e=o.length,g!==e&&(f++,a.length=g=e);for(var r=0;e>r;r++)n=a[r]!==a[r]&&o[r]!==o[r],n||a[r]===o[r]||(f++,a[r]=o[r])}else{a!==h&&(a=h={},g=0,f++),e=0;for(t in o)o.hasOwnProperty(t)&&(e++,a.hasOwnProperty(t)?(n=a[t]!==a[t]&&o[t]!==o[t],n||a[t]===o[t]||(f++,a[t]=o[t])):(g++,a[t]=o[t],f++));if(g>e){f++;for(t in a)a.hasOwnProperty(t)&&!o.hasOwnProperty(t)&&(g--,delete a[t])}}else a!==o&&(a=o,f++);return f}function r(){if(v?(v=!1,t(o,o,c)):t(o,u,c),l)if(b(o))if(i(o)){u=new Array(o.length);for(var e=0;e<o.length;e++)u[e]=o[e]}else{u={};for(var n in o)hr.call(o,n)&&(u[n]=o[n])}else u=o}var o,a,u,c=this,l=t.length>1,f=0,d=s(e),p=[],h={},v=!0,g=0;return this.$watch(n,r)},$digest:function(){var r,i,o,s,c,l,p,h,v,m,y,b=this.$$asyncQueue,w=this.$$postDigestQueue,_=e,x=this,S=[];f("$digest"),u.$$checkUrlChange(),n=null;do{for(l=!1,h=x;b.length;){try{y=b.shift(),y.scope.$eval(y.expression)}catch(E){d(),a(E)}n=null}e:do{if(s=h.$$watchers)for(c=s.length;c--;)try{if(r=s[c])if((i=r.get(h))===(o=r.last)||(r.eq?P(i,o):"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))){if(r===n){l=!1;break e}}else l=!0,n=r,r.last=r.eq?q(i,null):i,r.fn(i,o===g?i:o,h),5>_&&(v=4-_,S[v]||(S[v]=[]),m=$(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,m+="; newVal: "+U(i)+"; oldVal: "+U(o),S[v].push(m))}catch(E){d(),a(E)}if(!(p=h.$$childHead||h!==x&&h.$$nextSibling))for(;h!==x&&!(p=h.$$nextSibling);)h=h.$parent}while(h=p);if((l||b.length)&&!_--)throw d(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,U(S))}while(l||b.length);for(d();w.length;)try{w.shift()()}catch(E){a(E)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==m&&(o(this.$$listenerCount,M(null,v,this)),e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=h,this.$on=this.$watch=function(){return h})}},$eval:function(e,t){return s(e)(this,t)},$evalAsync:function(e){m.$$phase||m.$$asyncQueue.length||u.defer(function(){m.$$asyncQueue.length&&m.$digest()}),this.$$asyncQueue.push({scope:this,expression:e})},$$postDigest:function(e){this.$$postDigestQueue.push(e)},$apply:function(e){try{return f("$apply"),this.$eval(e)}catch(t){a(t)}finally{d();try{m.$digest()}catch(t){throw a(t),t}}},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var i=this;return function(){n[D(n,t)]=null,v(i,1,e)}},$emit:function(e){var t,n,r,i=[],o=this,s=!1,u={name:e,targetScope:o,stopPropagation:function(){s=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},c=I([u],arguments,1);do{for(t=o.$$listeners[e]||i,u.currentScope=o,n=0,r=t.length;r>n;n++)if(t[n])try{t[n].apply(null,c)}catch(l){a(l)}else t.splice(n,1),n--,r--;if(s)return u;o=o.$parent}while(o);return u},$broadcast:function(e){for(var t,n,r,i=this,o=i,s=i,u={name:e,targetScope:i,preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},c=I([u],arguments,1);o=s;){for(u.currentScope=o,t=o.$$listeners[e]||[],n=0,r=t.length;r>n;n++)if(t[n])try{t[n].apply(null,c)}catch(l){a(l)}else t.splice(n,1),n--,r--;if(!(s=o.$$listenerCount[e]&&o.$$childHead||o!==i&&o.$$nextSibling))for(;o!==i&&!(s=o.$$nextSibling);)o=o.$parent}return u}};var m=new l;return m}]}function Cn(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return y(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return y(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i,o=r?t:e;return yr&&!(yr>=8)||(i=Pn(n).href,""===i||i.match(o))?n:"unsafe:"+i}}}function On(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function jn(e){if("self"===e)return e;if(w(e)){if(e.indexOf("***")>-1)throw bi("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=On(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(S(e))return new RegExp("^"+e.source+"$");throw bi("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Nn(e){var t=[];return y(e)&&o(e,function(e){t.push(jn(e))}),t}function Dn(){this.SCE_CONTEXTS=wi;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Nn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Nn(e)),t},this.$get=["$injector",function(r){function i(e,t){return"self"===e?In(t):!!e.exec(t.href)}function o(n){var r,o,a=Pn(n.toString()),s=!1;for(r=0,o=e.length;o>r;r++)if(i(e[r],a)){s=!0;break}if(s)for(r=0,o=t.length;o>r;r++)if(i(t[r],a)){s=!1;break}return s}function a(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function s(e,t){var r=d.hasOwnProperty(e)?d[e]:null;if(!r)throw bi("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||t===n||""===t)return t;if("string"!=typeof t)throw bi("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new r(t)}function u(e){return e instanceof f?e.$$unwrapTrustedValue():e}function c(e,t){if(null===t||t===n||""===t)return t;var r=d.hasOwnProperty(e)?d[e]:null;if(r&&t instanceof r)return t.$$unwrapTrustedValue();if(e===wi.RESOURCE_URL){if(o(t))return t;throw bi("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===wi.HTML)return l(t);throw bi("unsafe","Attempting to use an unsafe value in a safe context.")}var l=function(){throw bi("unsafe","Attempting to use an unsafe value in a safe context.")};r.has("$sanitize")&&(l=r.get("$sanitize"));var f=a(),d={};return d[wi.HTML]=a(f),d[wi.CSS]=a(f),d[wi.URL]=a(f),d[wi.JS]=a(f),d[wi.RESOURCE_URL]=a(d[wi.URL]),{trustAs:s,getTrusted:c,valueOf:u}}]}function Rn(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sniffer","$sceDelegate",function(t,n,r){if(e&&n.msie&&n.msieDocumentMode<8)throw bi("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=L(wi);i.isEnabled=function(){return e},i.trustAs=r.trustAs,i.getTrusted=r.getTrusted,i.valueOf=r.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=v),i.parseAs=function(e,n){var r=t(n);return r.literal&&r.constant?r:function(t,n){return i.getTrusted(e,r(t,n))}};var a=i.parseAs,s=i.getTrusted,u=i.trustAs;return o(wi,function(e,t){var n=pr(t);i[ct("parse_as_"+n)]=function(t){return a(e,t)},i[ct("get_trusted_"+n)]=function(t){return s(e,t)},i[ct("trust_as_"+n)]=function(t){return u(e,t)}}),i}]}function qn(){this.$get=["$window","$document",function(e,t){var n,r,i={},o=d((/android (\d+)/.exec(pr((e.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},u=s.documentMode,c=/^(Moz|webkit|O|ms)(?=[A-Z])/,l=s.body&&s.body.style,f=!1,p=!1;if(l){for(var h in l)if(r=c.exec(h)){n=r[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in l&&"webkit"),f=!!("transition"in l||n+"Transition"in l),p=!!("animation"in l||n+"Animation"in l),!o||f&&p||(f=w(s.body.style.webkitTransition),p=w(s.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>o||a),hashchange:"onhashchange"in e&&(!u||u>7),hasEvent:function(e){if("input"==e&&9==yr)return!1;if(m(i[e])){var t=s.createElement("div");i[e]="on"+e in t}return i[e]},csp:jr(),vendorPrefix:n,transitions:f,animations:p,android:o,msie:yr,msieDocumentMode:u}}]}function Ln(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(e,t,n,r){function i(i,a,s){var u,c=n.defer(),l=c.promise,f=y(s)&&!s;return u=t.defer(function(){try{c.resolve(i())}catch(t){c.reject(t),r(t)}finally{delete o[l.$$timeoutId]}f||e.$apply()},a),l.$$timeoutId=u,o[u]=c,l}var o={};return i.cancel=function(e){return e&&e.$$timeoutId in o?(o[e.$$timeoutId].reject("canceled"),delete o[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},i}]}function Pn(e){var t=e;return yr&&(_i.setAttribute("href",t),t=_i.href),_i.setAttribute("href",t),{href:_i.href,protocol:_i.protocol?_i.protocol.replace(/:$/,""):"",host:_i.host,search:_i.search?_i.search.replace(/^\?/,""):"",hash:_i.hash?_i.hash.replace(/^#/,""):"",hostname:_i.hostname,port:_i.port,pathname:"/"===_i.pathname.charAt(0)?_i.pathname:"/"+_i.pathname}}function In(e){var t=w(e)?Pn(e):e;return t.protocol===xi.protocol&&t.host===xi.host}function Fn(){this.$get=g(e)}function Mn(e){function t(r,i){if(b(r)){var a={};return o(r,function(e,n){a[n]=t(n,e)}),a}return e.factory(r+n,i)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",Un),t("date",Kn),t("filter",Bn),t("json",Qn),t("limitTo",Zn),t("lowercase",ki),t("number",Hn),t("orderBy",Yn),t("uppercase",Ai)}function Bn(){return function(e,t,n){if(!Cr(e))return e;var r=typeof n,i=[];i.check=function(e){for(var t=0;t<i.length;t++)if(!i[t](e))return!1;return!0},"function"!==r&&(n="boolean"===r&&n?function(e,t){return kr.equals(e,t)}:function(e,t){if(e&&t&&"object"==typeof e&&"object"==typeof t){for(var r in e)if("$"!==r.charAt(0)&&hr.call(e,r)&&n(e[r],t[r]))return!0;return!1}return t=(""+t).toLowerCase(),(""+e).toLowerCase().indexOf(t)>-1});var o=function(e,t){if("string"==typeof t&&"!"===t.charAt(0))return!o(e,t.substr(1));switch(typeof e){case"boolean":case"number":case"string":return n(e,t);case"object":switch(typeof t){case"object":return n(e,t);default:for(var r in e)if("$"!==r.charAt(0)&&o(e[r],t))return!0}return!1;case"array":for(var i=0;i<e.length;i++)if(o(e[i],t))return!0;return!1;default:return!1}};switch(typeof t){case"boolean":case"number":case"string":t={$:t};case"object":for(var a in t)!function(e){"undefined"!=typeof t[e]&&i.push(function(n){return o("$"==e?n:n&&n[e],t[e])})}(a);break;case"function":i.push(t);break;default:return e}for(var s=[],u=0;u<e.length;u++){var c=e[u];i.check(c)&&s.push(c)}return s}}function Un(e){var t=e.NUMBER_FORMATS;return function(e,n){return m(n)&&(n=t.CURRENCY_SYM),zn(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,2).replace(/\u00A4/g,n)}}function Hn(e){var t=e.NUMBER_FORMATS;return function(e,n){return zn(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function zn(e,t,n,r,i){if(null==e||!isFinite(e)||b(e))return"";var o=0>e;e=Math.abs(e);var a=e+"",s="",u=[],c=!1;if(-1!==a.indexOf("e")){var l=a.match(/([\d\.]+)e(-?)(\d+)/);l&&"-"==l[2]&&l[3]>i+1?(a="0",e=0):(s=a,c=!0)}if(c)i>0&&e>-1&&1>e&&(s=e.toFixed(i));else{var f=(a.split($i)[1]||"").length;m(i)&&(i=Math.min(Math.max(t.minFrac,f),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+i)).toString()+"e"+-i),0===e&&(o=!1);var d=(""+e).split($i),p=d[0];d=d[1]||"";var h,v=0,g=t.lgSize,y=t.gSize;if(p.length>=g+y)for(v=p.length-g,h=0;v>h;h++)(v-h)%y===0&&0!==h&&(s+=n),s+=p.charAt(h);for(h=v;h<p.length;h++)(p.length-h)%g===0&&0!==h&&(s+=n),s+=p.charAt(h);for(;d.length<i;)d+="0";i&&"0"!==i&&(s+=r+d.substr(0,i))}return u.push(o?t.negPre:t.posPre),u.push(s),u.push(o?t.negSuf:t.posSuf),u.join("")}function Vn(e,t,n){var r="";for(0>e&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function Wn(e,t,n,r){return n=n||0,function(i){var o=i["get"+e]();return(n>0||o>-n)&&(o+=n),0===o&&-12==n&&(o=12),Vn(o,t,r)}}function Jn(e,t){return function(n,r){var i=n["get"+e](),o=vr(t?"SHORT"+e:e);return r[o][i]}}function Gn(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=Vn(Math[t>0?"floor":"ceil"](t/60),2)+Vn(Math.abs(t%60),2)}function Xn(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function Kn(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,o=0,a=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=d(t[9]+t[10]),o=d(t[9]+t[11])),a.call(r,d(t[1]),d(t[2])-1,d(t[3]));var u=d(t[4]||0)-i,c=d(t[5]||0)-o,l=d(t[6]||0),f=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,u,c,l,f),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r){var i,a,s="",u=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,w(n)&&(n=Ti.test(n)?d(n):t(n)),_(n)&&(n=new Date(n)),!x(n))return n;for(;r;)a=Ei.exec(r),a?(u=I(u,a,1),r=u.pop()):(u.push(r),r=null);return o(u,function(t){i=Si[t],s+=i?i(n,e.DATETIME_FORMATS):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),s}}function Qn(){return function(e){return U(e,!0)}}function Zn(){return function(e,t){if(!Cr(e)&&!w(e))return e;if(t=1/0===Math.abs(Number(t))?Number(t):d(t),w(e))return t?t>=0?e.slice(0,t):e.slice(t,e.length):"";var n,r,i=[];for(t>e.length?t=e.length:t<-e.length&&(t=-e.length),t>0?(n=0,r=t):(n=e.length+t,r=e.length);r>n;n++)i.push(e[n]);return i}}function Yn(e){return function(t,n,r){function o(e,t){for(var r=0;r<n.length;r++){var i=n[r](e,t);if(0!==i)return i}return 0}function a(e,t){return z(t)?function(t,n){return e(n,t)}:e}function s(e,t){var n=typeof e,r=typeof t;return n==r?(x(e)&&x(t)&&(e=e.valueOf(),t=t.valueOf()),"string"==n&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:t>e?-1:1):r>n?-1:1}if(!i(t))return t;if(!n)return t;n=Cr(n)?n:[n],n=j(n,function(t){var n=!1,r=t||v;if(w(t)&&(("+"==t.charAt(0)||"-"==t.charAt(0))&&(n="-"==t.charAt(0),t=t.substring(1)),r=e(t),r.constant)){var i=r();return a(function(e,t){return s(e[i],t[i])},n)}return a(function(e,t){return s(r(e),r(t))},n)});for(var u=[],c=0;c<t.length;c++)u.push(t[c]);return u.sort(a(o,r))}}function er(e){return $(e)&&(e={link:e}),e.restrict=e.restrict||"AC",g(e)}function tr(e,t,n,r){function i(t,n){n=n?"-"+Y(n,"-"):"",r.setClass(e,(t?Bi:Ui)+n,(t?Ui:Bi)+n)}var a=this,s=e.parent().controller("form")||ji,u=0,c=a.$error={},l=[];a.$name=t.name||t.ngForm,a.$dirty=!1,a.$pristine=!0,a.$valid=!0,a.$invalid=!1,s.$addControl(a),e.addClass(Hi),i(!0),a.$addControl=function(e){rt(e.$name,"input"),l.push(e),e.$name&&(a[e.$name]=e)},a.$removeControl=function(e){e.$name&&a[e.$name]===e&&delete a[e.$name],o(c,function(t,n){a.$setValidity(n,!0,e)}),R(l,e)},a.$setValidity=function(e,t,n){var r=c[e];if(t)r&&(R(r,n),r.length||(u--,u||(i(t),a.$valid=!0,a.$invalid=!1),c[e]=!1,i(!0,e),s.$setValidity(e,!0,a)));else{if(u||i(t),r){if(N(r,n))return}else c[e]=r=[],u++,i(!1,e),s.$setValidity(e,!1,a);r.push(n),a.$valid=!1,a.$invalid=!0}},a.$setDirty=function(){r.removeClass(e,Hi),r.addClass(e,zi),a.$dirty=!0,a.$pristine=!1,s.$setDirty()},a.$setPristine=function(){r.removeClass(e,zi),r.addClass(e,Hi),a.$dirty=!1,a.$pristine=!0,o(l,function(e){e.$setPristine()})}}function nr(e,t,r,i){return e.$setValidity(t,r),r?i:n}function rr(e,t){var n,r;if(t)for(n=0;n<t.length;++n)if(r=t[n],e[r])return!0;return!1}function ir(e,t,n,r,i){if(b(i)){e.$$hasNativeValidators=!0;var o=function(o){return e.$error[t]||rr(i,r)||!rr(i,n)?o:void e.$setValidity(t,!1)};e.$parsers.push(o)}}function or(e,t,n,i,o,a){var s=t.prop(dr),u=t[0].placeholder,c={},l=pr(t[0].type);if(i.$$validityState=s,!o.android){var f=!1;t.on("compositionstart",function(){f=!0}),t.on("compositionend",function(){f=!1,p()})}var p=function(r){if(!f){var o=t.val();if(yr&&"input"===(r||c).type&&t[0].placeholder!==u)return void(u=t[0].placeholder);"password"!==l&&z(n.ngTrim||"T")&&(o=Or(o));var a=s&&i.$$hasNativeValidators;(i.$viewValue!==o||""===o&&a)&&(e.$root.$$phase?i.$setViewValue(o):e.$apply(function(){i.$setViewValue(o)}))}};if(o.hasEvent("input"))t.on("input",p);else{var h,v=function(){h||(h=a.defer(function(){p(),h=null}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||v()}),o.hasEvent("paste")&&t.on("paste cut",v)}t.on("change",p),i.$render=function(){t.val(i.$isEmpty(i.$viewValue)?"":i.$viewValue)};var g,m,y=n.ngPattern;if(y){var b=function(e,t){return nr(i,"pattern",i.$isEmpty(t)||e.test(t),t)};m=y.match(/^\/(.*)\/([gim]*)$/),m?(y=new RegExp(m[1],m[2]),g=function(e){return b(y,e)}):g=function(n){var i=e.$eval(y);if(!i||!i.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",y,i,V(t));return b(i,n)},i.$formatters.push(g),i.$parsers.push(g)}if(n.ngMinlength){var w=d(n.ngMinlength),_=function(e){return nr(i,"minlength",i.$isEmpty(e)||e.length>=w,e)};i.$parsers.push(_),i.$formatters.push(_)}if(n.ngMaxlength){var x=d(n.ngMaxlength),$=function(e){return nr(i,"maxlength",i.$isEmpty(e)||e.length<=x,e)};i.$parsers.push($),i.$formatters.push($)}}function ar(e,t,r,i,o,a){if(or(e,t,r,i,o,a),i.$parsers.push(function(e){var t=i.$isEmpty(e);return t||Pi.test(e)?(i.$setValidity("number",!0),""===e?null:t?e:parseFloat(e)):(i.$setValidity("number",!1),n)}),ir(i,"number",Fi,null,i.$$validityState),i.$formatters.push(function(e){return i.$isEmpty(e)?"":""+e}),r.min){var s=function(e){var t=parseFloat(r.min);return nr(i,"min",i.$isEmpty(e)||e>=t,e)};i.$parsers.push(s),i.$formatters.push(s)}if(r.max){var u=function(e){var t=parseFloat(r.max);return nr(i,"max",i.$isEmpty(e)||t>=e,e)};i.$parsers.push(u),i.$formatters.push(u)}i.$formatters.push(function(e){return nr(i,"number",i.$isEmpty(e)||_(e),e)})}function sr(e,t,n,r,i,o){or(e,t,n,r,i,o);var a=function(e){return nr(r,"url",r.$isEmpty(e)||qi.test(e),e)};r.$formatters.push(a),r.$parsers.push(a)}function ur(e,t,n,r,i,o){or(e,t,n,r,i,o);var a=function(e){return nr(r,"email",r.$isEmpty(e)||Li.test(e),e)};r.$formatters.push(a),r.$parsers.push(a)}function cr(e,t,n,r){m(n.name)&&t.attr("name",c()),t.on("click",function(){t[0].checked&&e.$apply(function(){r.$setViewValue(n.value)})}),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)}function lr(e,t,n,r){var i=n.ngTrueValue,o=n.ngFalseValue;w(i)||(i=!0),w(o)||(o=!1),t.on("click",function(){e.$apply(function(){r.$setViewValue(t[0].checked)})}),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e!==i},r.$formatters.push(function(e){return e===i}),r.$parsers.push(function(e){return e?i:o})}function fr(e,t){return e="ngClass"+e,["$animate",function(n){function r(e,t){var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],o=0;o<t.length;o++)if(i==t[o])continue e;n.push(i)}return n}function i(e){if(Cr(e))return e;if(w(e))return e.split(" ");if(b(e)){var t=[];return o(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t}return e}return{restrict:"AC",link:function(a,s,u){function c(e){var t=f(e,1);u.$addClass(t)}function l(e){var t=f(e,-1);u.$removeClass(t)}function f(e,t){var n=s.data("$classCounts")||{},r=[];return o(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&r.push(e))}),s.data("$classCounts",n),r.join(" ")}function d(e,t){var i=r(t,e),o=r(e,t);o=f(o,-1),i=f(i,1),0===i.length?n.removeClass(s,o):0===o.length?n.addClass(s,i):n.setClass(s,i,o)}function p(e){if(t===!0||a.$index%2===t){var n=i(e||[]);if(h){if(!P(e,h)){var r=i(h);d(r,n)}}else c(n)}h=L(e)}var h;a.$watch(u[e],p,!0),u.$observe("class",function(){p(a.$eval(u[e]))}),"ngClass"!==e&&a.$watch("$index",function(n,r){var o=1&n;if(o!==(1&r)){var s=i(a.$eval(u[e]));o===t?c(s):l(s)}})}}}]}var dr="validity",pr=function(e){return w(e)?e.toLowerCase():e},hr=Object.prototype.hasOwnProperty,vr=function(e){return w(e)?e.toUpperCase():e},gr=function(e){return w(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},mr=function(e){return w(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(pr=gr,vr=mr);var yr,br,wr,_r,xr,$r=[].slice,Sr=[].push,Er=Object.prototype.toString,Tr=r("ng"),kr=e.angular||(e.angular={}),Ar=["0","0","0"];yr=d((/msie (\d+)/.exec(pr(navigator.userAgent))||[])[1]),isNaN(yr)&&(yr=d((/trident\/.*; rv:(\d+)/.exec(pr(navigator.userAgent))||[])[1])),h.$inject=[],v.$inject=[];var Cr=function(){return $(Array.isArray)?Array.isArray:function(e){return"[object Array]"===Er.call(e)}}(),Or=function(){return String.prototype.trim?function(e){return w(e)?e.trim():e}:function(e){return w(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e}}();xr=9>yr?function(e){return e=e.nodeName?e:e[0],e.scopeName&&"HTML"!=e.scopeName?vr(e.scopeName+":"+e.nodeName):e.nodeName}:function(e){return e.nodeName?e.nodeName:e[0].nodeName};var jr=function(){if(y(jr.isActive_))return jr.isActive_;var e=!(!t.querySelector("[ng-csp]")&&!t.querySelector("[data-ng-csp]"));if(!e)try{new Function("")}catch(n){e=!0}return jr.isActive_=e},Nr=/[A-Z]/g,Dr={full:"1.2.26",major:1,minor:2,dot:26,codeName:"captivating-disinterest"};ht.expando="ng339";var Rr=ht.cache={},qr=1,Lr=e.document.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},Pr=e.document.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)},Ir=(ht._data=function(e){return this.cache[e[this.expando]]||{}},/([\:\-\_]+(.))/g),Fr=/^moz([A-Z])/,Mr=r("jqLite"),Br=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ur=/<|&#?\w+;/,Hr=/<([\w:]+)/,zr=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Vr={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Vr.optgroup=Vr.option,Vr.tbody=Vr.tfoot=Vr.colgroup=Vr.caption=Vr.thead,Vr.th=Vr.td;var Wr=ht.prototype={ready:function(n){function r(){i||(i=!0,n())}var i=!1;"complete"===t.readyState?setTimeout(r):(this.on("DOMContentLoaded",r),ht(e).on("load",r))},toString:function(){var e=[];return o(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return br(e>=0?this[e]:this[this.length+e])},length:0,push:Sr,sort:[].sort,splice:[].splice},Jr={};o("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Jr[pr(e)]=e});var Gr={};o("input,select,option,textarea,button,form,details".split(","),function(e){Gr[vr(e)]=!0}),o({data:wt,removeData:yt},function(e,t){ht[t]=e}),o({data:wt,inheritedData:Tt,scope:function(e){return br.data(e,"$scope")||Tt(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return br.data(e,"$isolateScope")||br.data(e,"$isolateScopeNoTemplate")},controller:Et,injector:function(e){return Tt(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:_t,css:function(e,t,r){if(t=ct(t),!y(r)){var i;return 8>=yr&&(i=e.currentStyle&&e.currentStyle[t],""===i&&(i="auto")),i=i||e.style[t],8>=yr&&(i=""===i?n:i),i}e.style[t]=r},attr:function(e,t,r){var i=pr(t);if(Jr[i]){if(!y(r))return e[t]||(e.attributes.getNamedItem(t)||h).specified?i:n;r?(e[t]=!0,e.setAttribute(t,i)):(e[t]=!1,e.removeAttribute(i))}else if(y(r))e.setAttribute(t,r);else if(e.getAttribute){var o=e.getAttribute(t,2);return null===o?n:o}},prop:function(e,t,n){return y(n)?void(e[t]=n):e[t]},text:function(){function e(e,n){var r=t[e.nodeType];return m(n)?r?e[r]:"":void(e[r]=n)}var t=[];return 9>yr?(t[1]="innerText",t[3]="nodeValue"):t[1]=t[3]="textContent",e.$dv="",e}(),val:function(e,t){if(m(t)){if("SELECT"===xr(e)&&e.multiple){var n=[];return o(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){if(m(t))return e.innerHTML;for(var n=0,r=e.childNodes;n<r.length;n++)gt(r[n]);e.innerHTML=t},empty:kt},function(e,t){ht.prototype[t]=function(t,r){var i,o,a=this.length;if(e!==kt&&(2==e.length&&e!==_t&&e!==Et?t:r)===n){if(b(t)){for(i=0;a>i;i++)if(e===wt)e(this[i],t);else for(o in t)e(this[i],o,t[o]);return this}for(var s=e.$dv,u=s===n?Math.min(a,1):a,c=0;u>c;c++){var l=e(this[c],t,r);s=s?s+l:l}return s}for(i=0;a>i;i++)e(this[i],t,r);return this}}),o({removeData:yt,dealoc:gt,on:function Co(e,n,r,i){if(y(i))throw Mr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var a=bt(e,"events"),s=bt(e,"handle");a||bt(e,"events",a={}),s||bt(e,"handle",s=Ct(e,a)),o(n.split(" "),function(n){var i=a[n];if(!i){if("mouseenter"==n||"mouseleave"==n){var o=t.body.contains||t.body.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1};a[n]=[];var u={mouseleave:"mouseout",mouseenter:"mouseover"};Co(e,u[n],function(e){var t=this,r=e.relatedTarget;(!r||r!==t&&!o(t,r))&&s(e,n)})}else Lr(e,n,s),a[n]=[];i=a[n]}i.push(r)})},off:mt,one:function(e,t,n){e=br(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;gt(e),o(new ht(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(e){var t=[];return o(e.childNodes,function(e){1===e.nodeType&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){o(new ht(t),function(t){(1===e.nodeType||11===e.nodeType)&&e.appendChild(t)})},prepend:function(e,t){if(1===e.nodeType){var n=e.firstChild;o(new ht(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=br(t)[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:function(e){gt(e);var t=e.parentNode;t&&t.removeChild(e)},after:function(e,t){var n=e,r=e.parentNode;o(new ht(t),function(e){r.insertBefore(e,n.nextSibling),n=e})},addClass:$t,removeClass:xt,toggleClass:function(e,t,n){t&&o(t.split(" "),function(t){var r=n;m(r)&&(r=!_t(e,t)),(r?$t:xt)(e,t)})},parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},next:function(e){if(e.nextElementSibling)return e.nextElementSibling;for(var t=e.nextSibling;null!=t&&1!==t.nodeType;)t=t.nextSibling;return t},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:vt,triggerHandler:function(e,t,n){var r,i,a,s=t.type||t,u=(bt(e,"events")||{})[s];u&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopPropagation:h,type:s,target:e},t.type&&(r=f(r,t)),i=L(u),a=n?[r].concat(n):[r],o(i,function(t){t.apply(e,a)}))}},function(e,t){ht.prototype[t]=function(t,n,r){for(var i,o=0;o<this.length;o++)m(i)?(i=e(this[o],t,n,r),y(i)&&(i=br(i))):St(i,e(this[o],t,n,r));return y(i)?i:this},ht.prototype.bind=ht.prototype.on,ht.prototype.unbind=ht.prototype.off}),jt.prototype={put:function(e,t){this[Ot(e,this.nextUid)]=t},get:function(e){return this[Ot(e,this.nextUid)]},remove:function(e){var t=this[e=Ot(e,this.nextUid)];return delete this[e],t}};var Xr=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Kr=/,/,Qr=/^\s*(_?)(\S+?)\1\s*$/,Zr=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Yr=r("$injector"),ei=r("$animate"),ti=["$provide",function(e){this.$$selectors={},this.register=function(t,n){var r=t+"-animation";if(t&&"."!=t.charAt(0))throw ei("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=r,e.factory(r,n)},this.classNameFilter=function(e){return 1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function(e,t){function n(e){e&&t(e)}return{enter:function(e,t,r,i){r?r.after(e):(t&&t[0]||(t=r.parent()),t.append(e)),n(i)},leave:function(e,t){e.remove(),n(t)},move:function(e,t,n,r){this.enter(e,t,n,r)},addClass:function(e,t,r){t=w(t)?t:Cr(t)?t.join(" "):"",o(e,function(e){$t(e,t)}),n(r)},removeClass:function(e,t,r){t=w(t)?t:Cr(t)?t.join(" "):"",o(e,function(e){xt(e,t)}),n(r)},setClass:function(e,t,r,i){o(e,function(e){$t(e,t),xt(e,r)}),n(i)},enabled:h}}]}],ni=r("$compile");Mt.$inject=["$provide","$$sanitizeUriProvider"];var ri=/^(x[\:\-_]|data[\:\-_])/i,ii=r("$interpolate"),oi=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,ai={http:80,https:443,ftp:21},si=r("$location");pn.prototype=dn.prototype=fn.prototype={$$html5:!1,$$replace:!1,absUrl:hn("$$absUrl"),url:function(e){if(m(e))return this.$$url;
var t=oi.exec(e);return t[1]&&this.path(decodeURIComponent(t[1])),(t[2]||t[1])&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:hn("$$protocol"),host:hn("$$host"),port:hn("$$port"),path:vn("$$path",function(e){return e=e?e.toString():"","/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(w(e)||_(e))e=e.toString(),this.$$search=J(e);else{if(!b(e))throw si("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");o(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:m(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:vn("$$hash",function(e){return e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};var ui,ci=r("$parse"),li={},fi=Function.prototype.call,di=Function.prototype.apply,pi=Function.prototype.bind,hi={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:h,"+":function(e,t,r,i){return r=r(e,t),i=i(e,t),y(r)?y(i)?r+i:r:y(i)?i:n},"-":function(e,t,n,r){return n=n(e,t),r=r(e,t),(y(n)?n:0)-(y(r)?r:0)},"*":function(e,t,n,r){return n(e,t)*r(e,t)},"/":function(e,t,n,r){return n(e,t)/r(e,t)},"%":function(e,t,n,r){return n(e,t)%r(e,t)},"^":function(e,t,n,r){return n(e,t)^r(e,t)},"=":h,"===":function(e,t,n,r){return n(e,t)===r(e,t)},"!==":function(e,t,n,r){return n(e,t)!==r(e,t)},"==":function(e,t,n,r){return n(e,t)==r(e,t)},"!=":function(e,t,n,r){return n(e,t)!=r(e,t)},"<":function(e,t,n,r){return n(e,t)<r(e,t)},">":function(e,t,n,r){return n(e,t)>r(e,t)},"<=":function(e,t,n,r){return n(e,t)<=r(e,t)},">=":function(e,t,n,r){return n(e,t)>=r(e,t)},"&&":function(e,t,n,r){return n(e,t)&&r(e,t)},"||":function(e,t,n,r){return n(e,t)||r(e,t)},"&":function(e,t,n,r){return n(e,t)&r(e,t)},"|":function(e,t,n,r){return r(e,t)(e,t,n(e,t))},"!":function(e,t,n){return!n(e,t)}},vi={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},gi=function(e){this.options=e};gi.prototype={constructor:gi,lex:function(e){for(this.text=e,this.index=0,this.ch=n,this.lastCh=":",this.tokens=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var t=this.ch+this.peek(),r=t+this.peek(2),i=hi[this.ch],o=hi[t],a=hi[r];a?(this.tokens.push({index:this.index,text:r,fn:a}),this.index+=3):o?(this.tokens.push({index:this.index,text:t,fn:o}),this.index+=2):i?(this.tokens.push({index:this.index,text:this.ch,fn:i}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(e){return-1!==e.indexOf(this.ch)},was:function(e){return-1!==e.indexOf(this.lastCh)},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||""===e||" "===e},isIdent:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=y(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw ci("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=pr(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}e=1*e,this.tokens.push({index:t,text:e,literal:!0,constant:!0,fn:function(){return e}})},readIdent:function(){for(var e,t,n,r,i=this,o="",a=this.index;this.index<this.text.length&&(r=this.text.charAt(this.index),"."===r||this.isIdent(r)||this.isNumber(r));)"."===r&&(e=this.index),o+=r,this.index++;if(e)for(t=this.index;t<this.text.length;){if(r=this.text.charAt(t),"("===r){n=o.substr(e-a+1),o=o.substr(0,e-a),this.index=t;break}if(!this.isWhitespace(r))break;t++}var s={index:a,text:o};if(hi.hasOwnProperty(o))s.fn=hi[o],s.literal=!0,s.constant=!0;else{var u=$n(o,this.options,this.text);s.fn=f(function(e,t){return u(e,t)},{assign:function(e,t){return _n(e,o,t,i.text,i.options)}})}this.tokens.push(s),n&&(this.tokens.push({index:e,text:"."}),this.tokens.push({index:e+1,text:n}))},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=vi[o];n+=s||o}i=!1}else if("\\"===o)i=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:r,string:n,literal:!0,constant:!0,fn:function(){return n}});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var mi=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n};mi.ZERO=f(function(){return 0},{constant:!0}),mi.prototype={constructor:mi,parse:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var e;if(this.expect("("))e=this.filterChain(),this.consume(")");else if(this.expect("["))e=this.arrayDeclaration();else if(this.expect("{"))e=this.object();else{var t=this.expect();e=t.fn,e||this.throwError("not a primary expression",t),e.literal=!!t.literal,e.constant=!!t.constant}for(var n,r;n=this.expect("(","[",".");)"("===n.text?(e=this.functionCall(e,r),r=null):"["===n.text?(r=e,e=this.objectIndex(e)):"."===n.text?(r=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw ci("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(0===this.tokens.length)throw ci("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){if(this.tokens.length>0){var i=this.tokens[0],o=i.text;if(o===e||o===t||o===n||o===r||!e&&!t&&!n&&!r)return i}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return i?(this.tokens.shift(),i):!1},consume:function(e){this.expect(e)||this.throwError("is unexpected, expecting ["+e+"]",this.peek())},unaryFn:function(e,t){return f(function(n,r){return e(n,r,t)},{constant:t.constant})},ternaryFn:function(e,t,n){return f(function(r,i){return e(r,i)?t(r,i):n(r,i)},{constant:e.constant&&t.constant&&n.constant})},binaryFn:function(e,t,n){return f(function(r,i){return t(r,i,e,n)},{constant:e.constant&&n.constant})},statements:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.filterChain()),!this.expect(";"))return 1===e.length?e[0]:function(t,n){for(var r,i=0;i<e.length;i++){var o=e[i];o&&(r=o(t,n))}return r}},filterChain:function(){for(var e,t=this.expression();;){if(!(e=this.expect("|")))return t;t=this.binaryFn(t,e.fn,this.filter())}},filter:function(){for(var e=this.expect(),t=this.$filter(e.text),n=[];;){if(!(e=this.expect(":"))){var r=function(e,r,i){for(var o=[i],a=0;a<n.length;a++)o.push(n[a](e,r));return t.apply(e,o)};return function(){return r}}n.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var e,t,n=this.ternary();return(t=this.expect("="))?(n.assign||this.throwError("implies assignment but ["+this.text.substring(0,t.index)+"] can not be assigned to",t),e=this.ternary(),function(t,r){return n.assign(t,e(t,r),r)}):n},ternary:function(){var e,t,n=this.logicalOR();return(t=this.expect("?"))?(e=this.assignment(),(t=this.expect(":"))?this.ternaryFn(n,e,this.assignment()):void this.throwError("expected :",t)):n},logicalOR:function(){for(var e,t=this.logicalAND();;){if(!(e=this.expect("||")))return t;t=this.binaryFn(t,e.fn,this.logicalAND())}},logicalAND:function(){var e,t=this.equality();return(e=this.expect("&&"))&&(t=this.binaryFn(t,e.fn,this.logicalAND())),t},equality:function(){var e,t=this.relational();return(e=this.expect("==","!=","===","!=="))&&(t=this.binaryFn(t,e.fn,this.equality())),t},relational:function(){var e,t=this.additive();return(e=this.expect("<",">","<=",">="))&&(t=this.binaryFn(t,e.fn,this.relational())),t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t=this.binaryFn(t,e.fn,this.multiplicative());return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t=this.binaryFn(t,e.fn,this.unary());return t},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(mi.ZERO,e.fn,this.unary()):(e=this.expect("!"))?this.unaryFn(e.fn,this.unary()):this.primary()},fieldAccess:function(e){var t=this,n=this.expect().text,r=$n(n,this.options,this.text);return f(function(t,n,i){return r(i||e(t,n))},{assign:function(r,i,o){var a=e(r,o);return a||e.assign(r,a={}),_n(a,n,i,t.text,t.options)}})},objectIndex:function(e){var t=this,r=this.expression();return this.consume("]"),f(function(i,o){var a,s,u=e(i,o),c=r(i,o);return yn(c,t.text),u?(a=bn(u[c],t.text),a&&a.then&&t.options.unwrapPromises&&(s=a,"$$v"in a||(s.$$v=n,s.then(function(e){s.$$v=e})),a=a.$$v),a):n},{assign:function(n,i,o){var a=yn(r(n,o),t.text),s=bn(e(n,o),t.text);return s||e.assign(n,s={}),s[a]=i}})},functionCall:function(e,t){var n=[];if(")"!==this.peekToken().text)do n.push(this.expression());while(this.expect(","));this.consume(")");var r=this;return function(i,o){for(var a=[],s=t?t(i,o):i,u=0;u<n.length;u++)a.push(bn(n[u](i,o),r.text));var c=e(i,o,s)||h;bn(s,r.text),wn(c,r.text);var l=c.apply?c.apply(s,a):c(a[0],a[1],a[2],a[3],a[4]);return bn(l,r.text)}},arrayDeclaration:function(){var e=[],t=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var n=this.expression();e.push(n),n.constant||(t=!1)}while(this.expect(","));return this.consume("]"),f(function(t,n){for(var r=[],i=0;i<e.length;i++)r.push(e[i](t,n));return r},{literal:!0,constant:t})},object:function(){var e=[],t=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var n=this.expect(),r=n.string||n.text;this.consume(":");var i=this.expression();e.push({key:r,value:i}),i.constant||(t=!1)}while(this.expect(","));return this.consume("}"),f(function(t,n){for(var r={},i=0;i<e.length;i++){var o=e[i];r[o.key]=o.value(t,n)}return r},{literal:!0,constant:t})}};var yi={},bi=r("$sce"),wi={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},_i=t.createElement("a"),xi=Pn(e.location.href,!0);Mn.$inject=["$provide"],Un.$inject=["$locale"],Hn.$inject=["$locale"];var $i=".",Si={yyyy:Wn("FullYear",4),yy:Wn("FullYear",2,0,!0),y:Wn("FullYear",1),MMMM:Jn("Month"),MMM:Jn("Month",!0),MM:Wn("Month",2,1),M:Wn("Month",1,1),dd:Wn("Date",2),d:Wn("Date",1),HH:Wn("Hours",2),H:Wn("Hours",1),hh:Wn("Hours",2,-12),h:Wn("Hours",1,-12),mm:Wn("Minutes",2),m:Wn("Minutes",1),ss:Wn("Seconds",2),s:Wn("Seconds",1),sss:Wn("Milliseconds",3),EEEE:Jn("Day"),EEE:Jn("Day",!0),a:Xn,Z:Gn},Ei=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,Ti=/^\-?\d+$/;Kn.$inject=["$locale"];var ki=g(pr),Ai=g(vr);Yn.$inject=["$parse"];var Ci=g({restrict:"E",compile:function(e,n){return 8>=yr&&(n.href||n.name||n.$set("href",""),e.append(t.createComment("IE fix"))),n.href||n.xlinkHref||n.name?void 0:function(e,t){var n="[object SVGAnimatedString]"===Er.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}),Oi={};o(Jr,function(e,t){if("multiple"!=e){var n=Bt("ng-"+t);Oi[n]=function(){return{priority:100,link:function(e,r,i){e.$watch(i[n],function(e){i.$set(t,!!e)})}}}}}),o(["src","srcset","href"],function(e){var t=Bt("ng-"+e);Oi[t]=function(){return{priority:99,link:function(n,r,i){var o=e,a=e;"href"===e&&"[object SVGAnimatedString]"===Er.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(t,function(t){return t?(i.$set(a,t),void(yr&&o&&r.prop(o,i[a]))):void("href"===e&&i.$set(a,null))})}}}});var ji={$addControl:h,$removeControl:h,$setValidity:h,$setDirty:h,$setPristine:h};tr.$inject=["$element","$attrs","$scope","$animate"];var Ni=function(e){return["$timeout",function(t){var r={name:"form",restrict:e?"EAC":"E",controller:tr,compile:function(){return{pre:function(e,r,i,o){if(!i.action){var a=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1};Lr(r[0],"submit",a),r.on("$destroy",function(){t(function(){Pr(r[0],"submit",a)},0,!1)})}var s=r.parent().controller("form"),u=i.name||i.ngForm;u&&_n(e,u,o,u),s&&r.on("$destroy",function(){s.$removeControl(o),u&&_n(e,u,n,u),f(o,ji)})}}}};return r}]},Di=Ni(),Ri=Ni(!0),qi=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Li=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Pi=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Ii={text:or,number:ar,url:sr,email:ur,radio:cr,checkbox:lr,hidden:h,button:h,submit:h,reset:h,file:h},Fi=["badInput"],Mi=["$browser","$sniffer",function(e,t){return{restrict:"E",require:"?ngModel",link:function(n,r,i,o){o&&(Ii[pr(i.type)]||Ii.text)(n,r,i,o,t,e)}}}],Bi="ng-valid",Ui="ng-invalid",Hi="ng-pristine",zi="ng-dirty",Vi=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(e,t,n,i,a,s){function u(e,t){t=t?"-"+Y(t,"-"):"",s.removeClass(i,(e?Ui:Bi)+t),s.addClass(i,(e?Bi:Ui)+t)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=n.name;var c=a(n.ngModel),l=c.assign;if(!l)throw r("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",n.ngModel,V(i));this.$render=h,this.$isEmpty=function(e){return m(e)||""===e||null===e||e!==e};var f=i.inheritedData("$formController")||ji,d=0,p=this.$error={};i.addClass(Hi),u(!0),this.$setValidity=function(e,t){p[e]!==!t&&(t?(p[e]&&d--,d||(u(!0),this.$valid=!0,this.$invalid=!1)):(u(!1),this.$invalid=!0,this.$valid=!1,d++),p[e]=!t,u(t,e),f.$setValidity(e,t,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,s.removeClass(i,zi),s.addClass(i,Hi)},this.$setViewValue=function(n){this.$viewValue=n,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,s.removeClass(i,Hi),s.addClass(i,zi),f.$setDirty()),o(this.$parsers,function(e){n=e(n)}),this.$modelValue!==n&&(this.$modelValue=n,l(e,n),o(this.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}}))};var v=this;e.$watch(function(){var t=c(e);if(v.$modelValue!==t){var n=v.$formatters,r=n.length;for(v.$modelValue=t;r--;)t=n[r](t);v.$viewValue!==t&&(v.$viewValue=t,v.$render())}return t})}],Wi=function(){return{require:["ngModel","^?form"],controller:Vi,link:function(e,t,n,r){var i=r[0],o=r[1]||ji;o.$addControl(i),e.$on("$destroy",function(){o.$removeControl(i)})}}},Ji=g({require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Gi=function(){return{require:"?ngModel",link:function(e,t,n,r){if(r){n.required=!0;var i=function(e){return n.required&&r.$isEmpty(e)?void r.$setValidity("required",!1):(r.$setValidity("required",!0),e)};r.$formatters.push(i),r.$parsers.unshift(i),n.$observe("required",function(){i(r.$viewValue)})}}}},Xi=function(){return{require:"ngModel",link:function(e,t,r,i){var a=/\/(.*)\//.exec(r.ngList),s=a&&new RegExp(a[1])||r.ngList||",",u=function(e){if(!m(e)){var t=[];return e&&o(e.split(s),function(e){e&&t.push(Or(e))}),t}};i.$parsers.push(u),i.$formatters.push(function(e){return Cr(e)?e.join(", "):n}),i.$isEmpty=function(e){return!e||!e.length}}}},Ki=/^(true|false|\d+)$/,Qi=function(){return{priority:100,compile:function(e,t){return Ki.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},Zi=er({compile:function(e){return e.addClass("ng-binding"),function(e,t,r){t.data("$binding",r.ngBind),e.$watch(r.ngBind,function(e){t.text(e==n?"":e)})}}}),Yi=["$interpolate",function(e){return function(t,n,r){var i=e(n.attr(r.$attr.ngBindTemplate));n.addClass("ng-binding").data("$binding",i),r.$observe("ngBindTemplate",function(e){n.text(e)})}}],eo=["$sce","$parse",function(e,t){return{compile:function(n){return n.addClass("ng-binding"),function(n,r,i){function o(){return(a(n)||"").toString()}r.data("$binding",i.ngBindHtml);var a=t(i.ngBindHtml);n.$watch(o,function(){r.html(e.getTrustedHtml(a(n))||"")})}}}}],to=fr("",!0),no=fr("Odd",0),ro=fr("Even",1),io=er({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),oo=[function(){return{scope:!0,controller:"@",priority:500}}],ao={},so={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Bt("ng-"+e);ao[t]=["$parse","$rootScope",function(n,r){return{compile:function(i,o){var a=n(o[t]);return function(t,n){n.on(e,function(n){var i=function(){a(t,{$event:n})};so[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var uo=["$animate",function(e){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,u,c;n.$watch(i.ngIf,function(o){z(o)?u||(u=n.$new(),a(u,function(n){n[n.length++]=t.createComment(" end ngIf: "+i.ngIf+" "),s={clone:n},e.enter(n,r.parent(),r)})):(c&&(c.remove(),c=null),u&&(u.$destroy(),u=null),s&&(c=ot(s.clone),e.leave(c,function(){c=null}),s=null))})}}}],co=["$http","$templateCache","$anchorScroll","$animate","$sce",function(e,t,n,r,i){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:kr.noop,compile:function(o,a){var s=a.ngInclude||a.src,u=a.onload||"",c=a.autoscroll;return function(o,a,l,f,d){var p,h,v,g=0,m=function(){h&&(h.remove(),h=null),p&&(p.$destroy(),p=null),v&&(r.leave(v,function(){h=null}),h=v,v=null)};o.$watch(i.parseAsResourceUrl(s),function(i){var s=function(){!y(c)||c&&!o.$eval(c)||n()},l=++g;i?(e.get(i,{cache:t}).success(function(e){if(l===g){var t=o.$new();f.template=e;var n=d(t,function(e){m(),r.enter(e,null,a,s)});p=t,v=n,p.$emit("$includeContentLoaded"),o.$eval(u)}}).error(function(){l===g&&m()}),o.$emit("$includeContentRequested")):(m(),f.template=null)})}}}}],lo=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(t,n,r,i){n.html(i.template),e(n.contents())(t)}}}],fo=er({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),po=er({terminal:!0,priority:1e3}),ho=["$locale","$interpolate",function(e,t){var n=/{}/g;return{restrict:"EA",link:function(r,i,a){var s=a.count,u=a.$attr.when&&i.attr(a.$attr.when),c=a.offset||0,l=r.$eval(u)||{},f={},d=t.startSymbol(),p=t.endSymbol(),h=/^when(Minus)?(.+)$/;o(a,function(e,t){h.test(t)&&(l[pr(t.replace("when","").replace("Minus","-"))]=i.attr(a.$attr[t]))}),o(l,function(e,r){f[r]=t(e.replace(n,d+s+"-"+c+p))}),r.$watch(function(){var t=parseFloat(r.$eval(s));return isNaN(t)?"":(t in l||(t=e.pluralCat(t-c)),f[t](r,i,!0))},function(e){i.text(e)})}}}],vo=["$parse","$animate",function(e,n){function a(e){return e.clone[0]}function s(e){return e.clone[e.clone.length-1]}var u="$$NG_REMOVED",c=r("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function(r,l,f,d,p){var h,v,g,m,y,b,w,_,x,$=f.ngRepeat,S=$.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),E={$id:Ot};if(!S)throw c("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",$);if(b=S[1],w=S[2],h=S[3],h?(v=e(h),g=function(e,t,n){return x&&(E[x]=e),E[_]=t,E.$index=n,v(r,E)}):(m=function(e,t){return Ot(t)},y=function(e){return e}),S=b.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!S)throw c("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",b);_=S[3]||S[1],x=S[2];var T={};r.$watchCollection(w,function(e){var f,d,h,v,b,w,S,E,k,A,C,O,j=l[0],N={},D=[];if(i(e))A=e,k=g||m;else{k=g||y,A=[];for(w in e)e.hasOwnProperty(w)&&"$"!=w.charAt(0)&&A.push(w);A.sort()}for(v=A.length,d=D.length=A.length,f=0;d>f;f++)if(w=e===A?f:A[f],S=e[w],E=k(w,S,f),rt(E,"`track by` id"),T.hasOwnProperty(E))C=T[E],delete T[E],N[E]=C,D[f]=C;else{if(N.hasOwnProperty(E))throw o(D,function(e){e&&e.scope&&(T[e.id]=e)}),c("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",$,E,U(S));D[f]={id:E},N[E]=!1}for(w in T)T.hasOwnProperty(w)&&(C=T[w],O=ot(C.clone),n.leave(O),o(O,function(e){e[u]=!0}),C.scope.$destroy());for(f=0,d=A.length;d>f;f++){if(w=e===A?f:A[f],S=e[w],C=D[f],D[f-1]&&(j=s(D[f-1])),C.scope){b=C.scope,h=j;do h=h.nextSibling;while(h&&h[u]);a(C)!=h&&n.move(ot(C.clone),null,br(j)),j=s(C)}else b=r.$new();b[_]=S,x&&(b[x]=w),b.$index=f,b.$first=0===f,b.$last=f===v-1,b.$middle=!(b.$first||b.$last),b.$odd=!(b.$even=0===(1&f)),C.scope||p(b,function(e){e[e.length++]=t.createComment(" end ngRepeat: "+$+" "),n.enter(e,null,br(j)),j=e,C.scope=b,C.clone=e,N[C.id]=C})}T=N})}}}],go=["$animate",function(e){return function(t,n,r){t.$watch(r.ngShow,function(t){e[z(t)?"removeClass":"addClass"](n,"ng-hide")})}}],mo=["$animate",function(e){return function(t,n,r){t.$watch(r.ngHide,function(t){e[z(t)?"addClass":"removeClass"](n,"ng-hide")})}}],yo=er(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&o(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),bo=["$animate",function(e){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(t,n,r,i){var a=r.ngSwitch||r.on,s=[],u=[],c=[],l=[];t.$watch(a,function(n){var a,f;for(a=0,f=c.length;f>a;++a)c[a].remove();for(c.length=0,a=0,f=l.length;f>a;++a){var d=u[a];l[a].$destroy(),c[a]=d,e.leave(d,function(){c.splice(a,1)})}u.length=0,l.length=0,(s=i.cases["!"+n]||i.cases["?"])&&(t.$eval(r.change),o(s,function(n){var r=t.$new();l.push(r),n.transclude(r,function(t){var r=n.element;u.push(t),e.enter(t,r.parent(),r)})}))})}}}],wo=er({transclude:"element",priority:800,require:"^ngSwitch",link:function(e,t,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:t})}}),_o=er({transclude:"element",priority:800,require:"^ngSwitch",link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),xo=er({link:function(e,t,n,i,o){if(!o)throw r("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",V(t));o(function(e){t.empty(),t.append(e)})}}),$o=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],So=r("ngOptions"),Eo=g({terminal:!0}),To=["$compile","$parse",function(e,r){var i=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s={$setViewValue:h};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,n){var r,i,o=this,a={},u=s;o.databound=n.ngModel,o.init=function(e,t,n){u=e,r=t,i=n},o.addOption=function(t){rt(t,'"option value"'),a[t]=!0,u.$viewValue==t&&(e.val(t),i.parent()&&i.remove())},o.removeOption=function(e){this.hasOption(e)&&(delete a[e],u.$viewValue==e&&this.renderUnknownOption(e))},o.renderUnknownOption=function(t){var n="? "+Ot(t)+" ?";i.val(n),e.prepend(i),e.val(n),i.prop("selected",!0)},o.hasOption=function(e){return a.hasOwnProperty(e)},t.$on("$destroy",function(){o.renderUnknownOption=h})}],link:function(s,u,c,l){function f(e,t,n,r){n.$render=function(){var e=n.$viewValue;r.hasOption(e)?(S.parent()&&S.remove(),t.val(e),""===e&&h.prop("selected",!0)):m(e)&&h?t.val(""):r.renderUnknownOption(e)},t.on("change",function(){e.$apply(function(){S.parent()&&S.remove(),n.$setViewValue(t.val())})})}function d(e,t,n){var r;n.$render=function(){var e=new jt(n.$viewValue);o(t.find("option"),function(t){t.selected=y(e.get(t.value))})},e.$watch(function(){P(r,n.$viewValue)||(r=L(n.$viewValue),n.$render())}),t.on("change",function(){e.$apply(function(){var e=[];o(t.find("option"),function(t){t.selected&&e.push(t.value)}),n.$setViewValue(e)})})}function p(t,o,s){function u(){var e=!1;if(b){var n=s.$modelValue;if(E&&Cr(n)){e=new jt([]);for(var r={},i=0;i<n.length;i++)r[d]=n[i],e.put(E(t,r),n[i])}else e=new jt(n)}return e}function c(){var e,n,r,i,c,l,w,S,k,A,C,O,j,N,D,R={"":[]},q=[""],L=s.$modelValue,P=m(t)||[],I=p?a(P):P,F={},M=u();for(C=0;k=I.length,k>C;C++){if(w=C,p){if(w=I[C],"$"===w.charAt(0))continue;F[p]=w}if(F[d]=P[w],e=h(t,F)||"",(n=R[e])||(n=R[e]=[],q.push(e)),b)O=y(M.remove(E?E(t,F):g(t,F)));else{if(E){var B={};B[d]=L,O=E(t,B)===E(t,F)}else O=L===g(t,F);M=M||O}D=f(t,F),D=y(D)?D:"",n.push({id:E?E(t,F):p?I[C]:C,label:D,selected:O})}for(b||(_||null===L?R[""].unshift({id:"",label:"",selected:!M}):M||R[""].unshift({id:"?",label:"",selected:!0})),A=0,S=q.length;S>A;A++){for(e=q[A],n=R[e],T.length<=A?(i={element:$.clone().attr("label",e),label:n.label},c=[i],T.push(c),o.append(i.element)):(c=T[A],i=c[0],i.label!=e&&i.element.attr("label",i.label=e)),j=null,C=0,k=n.length;k>C;C++)r=n[C],(l=c[C+1])?(j=l.element,l.label!==r.label&&j.text(l.label=r.label),l.id!==r.id&&j.val(l.id=r.id),j[0].selected!==r.selected&&(j.prop("selected",l.selected=r.selected),yr&&j.prop("selected",l.selected))):(""===r.id&&_?N=_:(N=x.clone()).val(r.id).prop("selected",r.selected).attr("selected",r.selected).text(r.label),c.push(l={element:N,label:r.label,id:r.id,selected:r.selected}),v.addOption(r.label,N),j?j.after(N):i.element.append(N),j=N);for(C++;c.length>C;)r=c.pop(),v.removeOption(r.label),r.element.remove()}for(;T.length>A;)T.pop()[0].element.remove()}var l;if(!(l=w.match(i)))throw So("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",w,V(o));var f=r(l[2]||l[1]),d=l[4]||l[6],p=l[5],h=r(l[3]||""),g=r(l[2]?l[1]:d),m=r(l[7]),S=l[8],E=S?r(l[8]):null,T=[[{element:o,label:""}]];_&&(e(_)(t),_.removeClass("ng-scope"),_.remove()),o.empty(),o.on("change",function(){t.$apply(function(){var e,r,i,a,u,l,f,h,v,y=m(t)||[],w={};if(b){for(i=[],l=0,h=T.length;h>l;l++)for(e=T[l],u=1,f=e.length;f>u;u++)if((a=e[u].element)[0].selected){if(r=a.val(),p&&(w[p]=r),E)for(v=0;v<y.length&&(w[d]=y[v],E(t,w)!=r);v++);else w[d]=y[r];i.push(g(t,w))}}else if(r=o.val(),"?"==r)i=n;else if(""===r)i=null;else if(E){for(v=0;v<y.length;v++)if(w[d]=y[v],E(t,w)==r){i=g(t,w);break}}else w[d]=y[r],p&&(w[p]=r),i=g(t,w);s.$setViewValue(i),c()})}),s.$render=c,t.$watchCollection(m,c),t.$watchCollection(function(){var e={},n=m(t);if(n){for(var r=new Array(n.length),i=0,o=n.length;o>i;i++)e[d]=n[i],r[i]=f(t,e);return r}},c),b&&t.$watchCollection(function(){return s.$modelValue},c)}if(l[1]){for(var h,v=l[0],g=l[1],b=c.multiple,w=c.ngOptions,_=!1,x=br(t.createElement("option")),$=br(t.createElement("optgroup")),S=x.clone(),E=0,T=u.children(),k=T.length;k>E;E++)if(""===T[E].value){h=_=T.eq(E);break}v.init(g,_,S),b&&(g.$isEmpty=function(e){return!e||0===e.length}),w?p(s,u,g):b?d(s,u,g):f(s,u,g,v)}}}}],ko=["$interpolate",function(e){var t={addOption:h,removeOption:h};return{restrict:"E",priority:100,compile:function(n,r){if(m(r.value)){var i=e(n.text(),!0);i||r.$set("value",n.text())}return function(e,n,r){var o="$selectController",a=n.parent(),s=a.data(o)||a.parent().data(o);s&&s.databound?n.prop("selected",!1):s=t,i?e.$watch(i,function(e,t){r.$set("value",e),e!==t&&s.removeOption(t),s.addOption(e)}):s.addOption(r.value),n.on("$destroy",function(){s.removeOption(r.value)})}}}}],Ao=g({restrict:"E",terminal:!0});return e.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(et(),st(kr),void br(t).ready(function(){Q(t,Z)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>'),define("angular",["jquery"],function(e){return function(){var t;return t||e.angular}}(this)),!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define("pouchdb",e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.PouchDB=e()}}(function(){var define,module,exports;return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t){function n(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n)===!0)return e[n];return!1}function r(e){return function(t,n){t||n[0].error?e(t||n[0]):e(null,n[0])}}function i(e){var t={},n=[];return u.traverseRevTree(e,function(e,r,i,o){var a=r+"-"+i;return e&&(t[a]=0),void 0!==o&&n.push({from:o,to:a}),a}),n.reverse(),n.forEach(function(e){t[e.from]=void 0===t[e.from]?1+t[e.to]:Math.min(t[e.from],1+t[e.to])}),t}function o(e,t,n){var r="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;if(t.descending&&r.reverse(),!r.length)return e._allDocs({limit:0},n);var i={offset:t.skip};return p.all(r.map(function(n){var r=s.extend(!0,{key:n,deleted:"ok"},t);return["limit","skip","keys"].forEach(function(e){delete r[e]}),new p(function(t,o){e._allDocs(r,function(e,r){return e?o(e):(i.total_rows=r.total_rows,void t(r.rows[0]||{key:n,error:"not_found"}))})})})).then(function(e){return i.rows=e,i})}function a(){var e=this;l.call(this),e.autoCompact=function(t){return e.auto_compaction?function(n,r){if(n)t(n);else{var i=r.length,o=function(){i--,i||t(null,r)};r.forEach(function(t){t.ok?e.compactDocument(t.id,1,o):o()})}}:t};var t,n=0,r=["change","delete","create","update"];this.on("newListener",function(i){if(~r.indexOf(i)){if(n)return void n++;n++;var o=0;t=this.changes({conflicts:!0,include_docs:!0,continuous:!0,since:"now",onChange:function(t){t.seq<=o||(o=t.seq,e.emit("change",t),t.doc._deleted?e.emit("delete",t):"1"===t.doc._rev.split("-")[0]?e.emit("create",t):e.emit("update",t))}})}}),this.on("removeListener",function(e){~r.indexOf(e)&&(n--,n||t.cancel())})}var s=e("./utils"),u=e("./merge"),c=e("./deps/errors"),l=e("events").EventEmitter,f=e("./deps/upsert"),d=e("./changes"),p=s.Promise;s.inherits(a,l),t.exports=a,a.prototype.post=s.adapterFun("post",function(e,t,n){return"function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e)?n(c.NOT_AN_OBJECT):void this.bulkDocs({docs:[e]},t,this.autoCompact(r(n)))}),a.prototype.put=s.adapterFun("put",s.getArguments(function(e){var t,n,i,o,a=e.shift(),u="_id"in a;if("object"!=typeof a||Array.isArray(a))return(o=e.pop())(c.NOT_AN_OBJECT);for(a=s.clone(a);;)if(t=e.shift(),n=typeof t,"string"!==n||u?"string"!==n||!u||"_rev"in a?"object"===n?i=t:"function"===n&&(o=t):a._rev=t:(a._id=t,u=!0),!e.length)break;
i=i||{};var l=s.invalidIdError(a._id);return l?o(l):void this.bulkDocs({docs:[a]},i,this.autoCompact(r(o)))})),a.prototype.putAttachment=s.adapterFun("putAttachment",function(e,t,n,r,i,o){function a(e){return e._attachments=e._attachments||{},e._attachments[t]={content_type:i,data:r},s.put(e)}var s=this;return"function"==typeof i&&(o=i,i=r,r=n,n=null),"undefined"==typeof i&&(i=r,r=n,n=null),s.get(e).then(function(e){if(e._rev!==n)throw c.REV_CONFLICT;return a(e)},function(t){if(t.error===c.MISSING_DOC.error)return a({_id:e});throw t})}),a.prototype.removeAttachment=s.adapterFun("removeAttachment",function(e,t,n,r){var i=this;i.get(e,function(e,o){return e?void r(e):o._rev!==n?void r(c.REV_CONFLICT):o._attachments?(delete o._attachments[t],0===Object.keys(o._attachments).length&&delete o._attachments,void i.put(o,r)):r()})}),a.prototype.remove=s.adapterFun("remove",function(e,t,n){"function"==typeof t?(n=t,t={}):"string"==typeof t?e={_id:e,_rev:t}:void 0===t&&(t={}),t=s.clone(t),t.was_delete=!0;var i={_id:e._id,_rev:e._rev};i._deleted=!0,this.bulkDocs({docs:[i]},t,r(n))}),a.prototype.revsDiff=s.adapterFun("revsDiff",function(e,t,n){function r(e,t){c[e]||(c[e]={missing:[]}),c[e].missing.push(t)}function i(t,n){var i=e[t].slice(0);u.traverseRevTree(n,function(e,n,o,a,s){var u=n+"-"+o,c=i.indexOf(u);-1!==c&&(i.splice(c,1),"available"!==s.status&&r(t,u))}),i.forEach(function(e){r(t,e)})}"function"==typeof t&&(n=t,t={}),t=s.clone(t);var o=Object.keys(e),a=0,c={};o.map(function(t){this._getRevisionTree(t,function(r,s){if(r&&"not_found"===r.name&&"missing"===r.message)c[t]={missing:e[t]};else{if(r)return n(r);i(t,s)}return++a===o.length?n(null,c):void 0})},this)}),a.prototype.compactDocument=function(e,t,n){var r=this;this._getRevisionTree(e,function(o,a){if(o)return n(o);var s=i(a),c=[],l=[];Object.keys(s).forEach(function(e){s[e]>t&&c.push(e)}),u.traverseRevTree(a,function(e,t,n,r,i){var o=t+"-"+n;"available"===i.status&&-1!==c.indexOf(o)&&(i.status="missing",l.push(o))}),r._doCompaction(e,a,l,n)})},a.prototype.compact=s.adapterFun("compact",function(e,t){"function"==typeof e&&(t=e,e={});var n=this;this.changes({complete:function(e,r){if(e)return void t();var i=r.results.length;return i?void r.results.forEach(function(e){n.compactDocument(e.id,0,function(){i--,i||t()})}):void t()}})}),a.prototype.get=s.adapterFun("get",function(e,t,r){function i(){var n=[],i=o.length;return i?void o.forEach(function(o){a.get(e,{rev:o,revs:t.revs,attachments:t.attachments},function(e,t){n.push(e?{missing:o}:{ok:t}),i--,i||r(null,n)})}):r(null,n)}if("function"==typeof t&&(r=t,t={}),"string"!=typeof e)return r(c.INVALID_ID);var o=[],a=this;if(!t.open_revs)return this._get(e,t,function(e,i){if(t=s.clone(t),e)return r(e);var o=i.doc;if(!o)return r(new Error("no doc!"));var c=i.metadata,l=i.ctx;if(t.conflicts){var f=u.collectConflicts(c);f.length&&(o._conflicts=f)}if(t.revs||t.revs_info){var d=u.rootToLeaf(c.rev_tree),p=n(d,function(e){return-1!==e.ids.map(function(e){return e.id}).indexOf(o._rev.split("-")[1])}),h=p.ids.map(function(e){return e.id}).indexOf(o._rev.split("-")[1])+1,v=p.ids.length-h;if(p.ids.splice(h,v),p.ids.reverse(),t.revs&&(o._revisions={start:p.pos+p.ids.length-1,ids:p.ids.map(function(e){return e.id})}),t.revs_info){var g=p.pos+p.ids.length;o._revs_info=p.ids.map(function(e){return g--,{rev:g+"-"+e.id,status:e.opts.status}})}}if(t.local_seq&&(o._local_seq=i.metadata.seq),t.attachments&&o._attachments){var m=o._attachments,y=Object.keys(m).length;if(0===y)return r(null,o);Object.keys(m).forEach(function(e){this._getAttachment(m[e],{encode:!0,ctx:l},function(t,n){o._attachments[e].data=n,--y||r(null,o)})},a)}else{if(o._attachments)for(var b in o._attachments)o._attachments.hasOwnProperty(b)&&(o._attachments[b].stub=!0);r(null,o)}});if("all"===t.open_revs)this._getRevisionTree(e,function(e,t){e&&(t=[]),o=u.collectLeaves(t).map(function(e){return e.rev}),i()});else{if(!Array.isArray(t.open_revs))return r(c.error(c.UNKNOWN_ERROR,"function_clause"));o=t.open_revs;for(var l=0;l<o.length;l++){var f=o[l];if("string"!=typeof f||!/^\d+-/.test(f))return r(c.error(c.BAD_REQUEST,"Invalid rev format"))}i()}}),a.prototype.getAttachment=s.adapterFun("getAttachment",function(e,t,n,r){var i=this;n instanceof Function&&(r=n,n={}),n=s.clone(n),this._get(e,n,function(e,o){return e?r(e):o.doc._attachments&&o.doc._attachments[t]?(n.ctx=o.ctx,void i._getAttachment(o.doc._attachments[t],n,r)):r(c.MISSING_DOC)})}),a.prototype.allDocs=s.adapterFun("allDocs",function(e,t){if("function"==typeof e&&(t=e,e={}),e=s.clone(e),e.skip="undefined"!=typeof e.skip?e.skip:0,"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(t){return t in e})[0];if(n)return void t(c.error(c.QUERY_PARSE_ERROR,"Query parameter `"+n+"` is not compatible with multi-get"));if("http"!==this.type())return o(this,e,t)}return this._allDocs(e,t)}),a.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),new d(this,e,t)},a.prototype.close=s.adapterFun("close",function(e){return this._closed=!0,this._close(e)}),a.prototype.info=s.adapterFun("info",function(e){var t=this;this._info(function(n,r){if(n)return e(n);var i=t.prefix.length;r.db_name.length>i&&r.db_name.slice(0,i)===t.prefix&&(r.db_name=r.db_name.slice(i)),e(null,r)})}),a.prototype.id=s.adapterFun("id",function(e){return this._id(e)}),a.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},a.prototype.bulkDocs=s.adapterFun("bulkDocs",function(e,t,n){if("function"==typeof t&&(n=t,t={}),t=s.clone(t),Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return n(c.MISSING_BULK_DOCS);for(var r=0;r<e.docs.length;++r)if("object"!=typeof e.docs[r]||Array.isArray(e.docs[r]))return n(c.NOT_AN_OBJECT);return e=s.clone(e),"new_edits"in t||(t.new_edits="new_edits"in e?e.new_edits:!0),this._bulkDocs(e,t,this.autoCompact(n))}),a.prototype.registerDependentDatabase=s.adapterFun("registerDependentDatabase",function(e,t){function n(t){return t.dependentDbs=t.dependentDbs||{},t.dependentDbs[e]?!1:(t.dependentDbs[e]=!0,t)}var r=new this.constructor(e,{adapter:this._adapter});f(this,"_local/_pouch_dependentDbs",n,function(e){return e?t(e):t(null,{db:r})})})},{"./changes":6,"./deps/errors":10,"./deps/upsert":11,"./merge":16,"./utils":21,events:25}],2:[function(e,t){function n(e){for(var t=n.options,r=t.parser[t.strictMode?"strict":"loose"].exec(e),i={},o=14;o--;)i[t.key[o]]=r[o]||"";return i[t.q.name]={},i[t.key[12]].replace(t.q.parser,function(e,n,r){n&&(i[t.q.name][n]=r)}),i}function r(e){return/^_(design|local)/.test(e)?e:encodeURIComponent(e)}function i(e,t){if(/http(s?):/.test(e)){var r=n(e);r.remote=!0,(r.user||r.password)&&(r.auth={username:r.user,password:r.password});var i=r.path.replace(/(^\/|\/$)/g,"").split("/");if(r.db=i.pop(),r.path=i.join("/"),t=t||{},t=u.clone(t),r.headers=t.headers||{},t.auth||r.auth){var o=t.auth||r.auth,a=u.btoa(o.username+":"+o.password);r.headers.Authorization="Basic "+a}return t.headers&&(r.headers=t.headers),r}return{host:"",path:"/",db:e,auth:!1}}function o(e,t){return a(e,e.db+"/"+t)}function a(e,t){if(e.remote){var n=e.path?"/":"";return e.protocol+"://"+e.host+":"+e.port+"/"+e.path+n+t}return"/"+t}function s(e,t){function n(e,t){return u.ajax(u.extend({},p,e),t)}function s(e,r,i,o){r=u.clone(r);var s=l.getHost(o),c={source:f.db,target:s.protocol===f.protocol&&s.authority===f.authority?s.db:s.source};r.continuous&&(c.continuous=!0),r.create_target&&(c.create_target=!0),r.doc_ids&&(c.doc_ids=r.doc_ids),r.filter&&"string"==typeof r.filter&&(c.filter=r.filter),r.query_params&&(c.query_params=r.query_params);var d,p={},h={headers:f.headers,method:"POST",url:a(f,"_replicate"),body:c};i.cancel=function(){this.cancelled=!0,d&&!p.ok&&d.abort(),p._local_id&&(h.body={replication_id:p._local_id}),h.body.cancel=!0,n(h,function(e,n,i){return e?t(e):void u.call(r.complete,null,p,i)})},i.cancelled||(d=n(h,function(e,n,i){return e?t(e):(p.ok=!0,n._local_id&&(p._local_id=n._local_id),void u.call(r.complete,null,n,i))}))}var l=this;l.getHost=e.getHost?e.getHost:i;var f=l.getHost(e.name,e),d=o(f,"");l.getUrl=function(){return d};var p=e.ajax||{};e=u.clone(e);var h=function(){n({headers:f.headers,method:"PUT",url:d},function(e){e&&401===e.status?n({headers:f.headers,method:"HEAD",url:d},function(e){e?t(e):t(null,l)}):e&&412!==e.status?t(e):t(null,l)})};e.skipSetup||n({headers:f.headers,method:"GET",url:d},function(e){e?404===e.status?h():t(e):t(null,l)}),l.type=function(){return"http"},l.id=u.adapterFun("id",function(e){n({headers:f.headers,method:"GET",url:a(f,"")},function(t,n){var r=n&&n.uuid?n.uuid+f.db:o(f,"");e(null,r)})}),l.request=u.adapterFun("request",function(e,t){e.headers=f.headers,e.url=o(f,e.url),n(e,t)}),l.compact=u.adapterFun("compact",function(e,t){"function"==typeof e&&(t=e,e={}),e=u.clone(e),n({headers:f.headers,url:o(f,"_compact"),method:"POST"},function(){function n(){l.info(function(r,i){i.compact_running?setTimeout(n,e.interval||200):t()})}"function"==typeof t&&n()})}),l._info=function(e){n({headers:f.headers,method:"GET",url:o(f,"")},function(t,n){t?e(t):(n.host=o(f,""),e(null,n))})},l.get=u.adapterFun("get",function(e,t,i){"function"==typeof t&&(i=t,t={}),t=u.clone(t),void 0===t.auto_encode&&(t.auto_encode=!0);var a=[];t.revs&&a.push("revs=true"),t.revs_info&&a.push("revs_info=true"),t.local_seq&&a.push("local_seq=true"),t.open_revs&&("all"!==t.open_revs&&(t.open_revs=JSON.stringify(t.open_revs)),a.push("open_revs="+t.open_revs)),t.attachments&&a.push("attachments=true"),t.rev&&a.push("rev="+t.rev),t.conflicts&&a.push("conflicts="+t.conflicts),a=a.join("&"),a=""===a?"":"?"+a,t.auto_encode&&(e=r(e));var s={headers:f.headers,method:"GET",url:o(f,e+a)},c=e.split("/");(c.length>1&&"_design"!==c[0]&&"_local"!==c[0]||c.length>2&&"_design"===c[0]&&"_local"!==c[0])&&(s.binary=!0),n(s,function(e,t,n){return e?i(e):void i(null,t,n)})}),l.remove=u.adapterFun("remove",function(e,t,i){"function"==typeof t?(i=t,t={}):"string"==typeof t?e={_id:e,_rev:t}:void 0===t&&(t={}),n({headers:f.headers,method:"DELETE",url:o(f,r(e._id))+"?rev="+e._rev},i)}),l.getAttachment=u.adapterFun("getAttachment",function(e,t,n,i){"function"==typeof n&&(i=n,n={}),n=u.clone(n),void 0===n.auto_encode&&(n.auto_encode=!0),n.auto_encode&&(e=r(e)),n.auto_encode=!1,l.get(e+"/"+t,n,i)}),l.removeAttachment=u.adapterFun("removeAttachment",function(e,t,i,a){n({headers:f.headers,method:"DELETE",url:o(f,r(e)+"/"+t)+"?rev="+i},a)}),l.putAttachment=u.adapterFun("putAttachment",function(e,t,i,a,s,u){"function"==typeof s&&(u=s,s=a,a=i,i=null),"undefined"==typeof s&&(s=a,a=i,i=null);var c=r(e)+"/"+t,l=o(f,c);i&&(l+="?rev="+i);var d={headers:f.headers,method:"PUT",url:l,processData:!1,body:a,timeout:6e4};d.headers["Content-Type"]=s,n(d,u)}),l.put=u.adapterFun("put",u.getArguments(function(e){var t,i,a,s,l=e.shift(),d="_id"in l;if("object"!=typeof l||Array.isArray(l))return(s=e.pop())(c.NOT_AN_OBJECT);for(l=u.clone(l);;)if(t=e.shift(),i=typeof t,"string"!==i||d?"string"!==i||!d||"_rev"in l?"object"===i?a=u.clone(t):"function"===i&&(s=t):l._rev=t:(l._id=t,d=!0),!e.length)break;a=a||{};var p=u.invalidIdError(l._id);if(p)return s(p);var h=[];a&&"undefined"!=typeof a.new_edits&&h.push("new_edits="+a.new_edits),h=h.join("&"),""!==h&&(h="?"+h),n({headers:f.headers,method:"PUT",url:o(f,r(l._id))+h,body:l},s)})),l.post=u.adapterFun("post",function(e,t,n){return"function"==typeof t&&(n=t,t={}),t=u.clone(t),"object"!=typeof e?n(c.NOT_AN_OBJECT):("_id"in e||(e._id=u.uuid()),void l.put(e,t,n))}),l._bulkDocs=function(e,t,r){"undefined"!=typeof t.new_edits&&(e.new_edits=t.new_edits),n({headers:f.headers,method:"POST",url:o(f,"_bulk_docs"),body:e},r)},l.allDocs=u.adapterFun("allDocs",function(e,t){"function"==typeof e&&(t=e,e={}),e=u.clone(e);var r,i=[],a="GET";if(e.conflicts&&i.push("conflicts=true"),e.descending&&i.push("descending=true"),e.include_docs&&i.push("include_docs=true"),e.key&&i.push("key="+encodeURIComponent(JSON.stringify(e.key))),e.startkey&&i.push("startkey="+encodeURIComponent(JSON.stringify(e.startkey))),e.endkey&&i.push("endkey="+encodeURIComponent(JSON.stringify(e.endkey))),"undefined"!=typeof e.inclusive_end&&i.push("inclusive_end="+!!e.inclusive_end),"undefined"!=typeof e.limit&&i.push("limit="+e.limit),"undefined"!=typeof e.skip&&i.push("skip="+e.skip),i=i.join("&"),""!==i&&(i="?"+i),"undefined"!=typeof e.keys){var s=2e3,c="keys="+encodeURIComponent(JSON.stringify(e.keys));c.length+i.length+1<=s?i+=(-1!==i.indexOf("?")?"&":"?")+c:(a="POST",r=JSON.stringify({keys:e.keys}))}n({headers:f.headers,method:a,url:o(f,"_all_docs"+i),body:r},t)}),l._changes=function(e){var t=25;e=u.clone(e),e.timeout=e.timeout||3e4;var r={timeout:e.timeout-5e3},i="undefined"!=typeof e.limit?e.limit:!1;0===i&&(i=1);var a;a="returnDocs"in e?e.returnDocs:!0;var s=i;if(e.style&&(r.style=e.style),(e.include_docs||e.filter&&"function"==typeof e.filter)&&(r.include_docs=!0),e.continuous&&(r.feed="longpoll"),e.conflicts&&(r.conflicts=!0),e.descending&&(r.descending=!0),e.filter&&"string"==typeof e.filter&&(r.filter=e.filter,"_view"===e.filter&&e.view&&"string"==typeof e.view&&(r.view=e.view)),e.query_params&&"object"==typeof e.query_params)for(var l in e.query_params)e.query_params.hasOwnProperty(l)&&(r[l]=e.query_params[l]);var d,p,h=function(a,u){if(!e.aborted){r.since=a,e.descending?i&&(r.limit=s):r.limit=!i||s>t?t:s;var c="?"+Object.keys(r).map(function(e){return e+"="+r[e]}).join("&"),l={headers:f.headers,method:"GET",url:o(f,"_changes"+c),timeout:e.timeout};p=a,e.aborted||(d=n(l,u))}},v=10,g=0,m={results:[]},y=function(n,r){if(!e.aborted){var o=0;if(r&&r.results){o=r.results.length,m.last_seq=r.last_seq;var l={};l.query=e.query_params,r.results=r.results.filter(function(t){s--;var n=u.filterChange(e)(t);return n&&(a&&m.results.push(t),u.call(e.onChange,t)),n})}else if(n)return e.aborted=!0,void u.call(e.complete,n);r&&r.last_seq&&(p=r.last_seq);var f=i&&0>=s||r&&t>o||e.descending;if((!e.continuous||i&&0>=s)&&f)u.call(e.complete,null,m);else{n?g+=1:g=0;var d=1<<g,b=v*d,w=e.maximumWait||3e4;if(b>w)return void u.call(e.complete,n||c.UNKNOWN_ERROR);setTimeout(function(){h(p,y)},b)}}};return h(e.since||0,y),{cancel:function(){e.aborted=!0,d&&d.abort()}}},l.revsDiff=u.adapterFun("revsDif",function(e,t,r){"function"==typeof t&&(r=t,t={}),n({headers:f.headers,method:"POST",url:o(f,"_revs_diff"),body:e},function(e,t){r(e,t)})}),l._close=function(e){e()},l.replicateOnServer=function(e,t,n){return l.taskqueue.isReady?void e.info(function(r,i){s(e,t,n,i.host)}):(l.taskqueue.addTask("replicateOnServer",[e,t,n]),n)},l.destroy=u.adapterFun("destroy",function(e){n({url:o(f,""),method:"DELETE",headers:f.headers},function(t,n){t?(l.emit("error",t),e(t)):(l.emit("destroyed"),e(null,n))})})}var u=e("../utils"),c=e("../deps/errors");n.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},s.destroy=u.toPromise(function(e,t,n){var r=i(e,t);t=t||{},"function"==typeof t&&(n=t,t={}),t=u.clone(t),t.headers=r.headers,t.method="DELETE",t.url=o(r,"");var a=t.ajax||{};t=u.extend({},t,a),u.ajax(t,n)}),s.valid=function(){return!0},t.exports=s},{"../deps/errors":10,"../utils":21}],3:[function(e,t){(function(n,r){function i(e,t,n){try{e.apply(t,n)}catch(r){window.PouchDB&&window.PouchDB.emit("error",r)}}function o(){if(!v.running&&v.queue.length){v.running=!0;var e=v.queue.shift();e.action(function(t,r){i(e.callback,this,[t,r]),v.running=!1,n.nextTick(o)})}}function a(e){return function(t){var n=t.target&&t.target.error&&t.target.error.name||t.target;e(p.error(p.IDB_ERROR,n,t.type))}}function s(){var e="_pouch__checkModernIdb_"+(r.navigator&&r.navigator.appVersion),t=f.hasLocalStorage()&&r.localStorage[e];if(t)return JSON.parse(t);var n="_pouch__checkModernIdb",i=null===r.indexedDB.open(n,1).onupgradeneeded;return r.indexedDB.deleteDatabase&&r.indexedDB.deleteDatabase(n),f.hasLocalStorage()&&(r.localStorage[e]=JSON.stringify(i)),i}function u(e,t){var n=this;v.queue.push({action:function(t){c(n,e,t)},callback:t}),o()}function c(e,t,i){function o(e){e.createObjectStore(m,{keyPath:"id"}).createIndex("seq","seq",{unique:!0}),e.createObjectStore(y,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(b,{keyPath:"digest"}),e.createObjectStore(w,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(_)}function s(e){var t=e.currentTarget.transaction.objectStore(m);t.openCursor().onsuccess=function(e){var n=e.target.result;if(n){var r=n.value,i=f.isDeleted(r),o=f.isLocalId(r.id);r.deletedOrLocal=i||o?"1":"0",t.put(r),n["continue"]()}else t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1})}}function c(e,t){return e._bulk_seq-t._bulk_seq}function l(e,t,n){var i="startkey"in t?t.startkey:!1,o="endkey"in t?t.endkey:!1,a="key"in t?t.key:!1,s=t.skip||0,u="number"==typeof t.limit?t.limit:-1,c=t.inclusive_end!==!1,l="descending"in t&&t.descending?"prev":null,h=!1;l&&i&&o&&(h=o,o=!1);var v=null;try{var g=r.IDBKeyRange;i&&o?v=g.bound(i,o,!1,!c):i?v=l?g.upperBound(i):g.lowerBound(i):o?v=l?g.lowerBound(o,!c):g.upperBound(o,!c):a&&(v=g.only(a))}catch(b){return"DataError"===b.name&&0===b.code?n(null,{total_rows:e,offset:t.skip,rows:[]}):n(p.error(p.IDB_ERROR,b.name,b.message))}var w=T.transaction([m,y],"readonly");w.oncomplete=function(){n(null,{total_rows:e,offset:t.skip,rows:$})};var _=w.objectStore(m),x=l?_.openCursor(v,l):_.openCursor(v),$=[];x.onsuccess=function(e){function n(e,n){if(f.isLocalId(e.id))return r["continue"]();var i={id:e.id,key:e.id,value:{rev:o}};if(t.include_docs){i.doc=n,i.doc._rev=o,i.doc._doc_id_rev&&delete i.doc._doc_id_rev,t.conflicts&&(i.doc._conflicts=d.collectConflicts(e));for(var a in i.doc._attachments)i.doc._attachments.hasOwnProperty(a)&&(i.doc._attachments[a].stub=!0)}var l=f.isDeleted(e,o);if("ok"===t.deleted)l&&(i.value.deleted=!0,i.doc=null),$.push(i);else if(!l&&s--<=0){if(h){if(c&&i.key<h)return;if(!c&&i.key<=h)return}if($.push(i),0===--u)return}r["continue"]()}if(e.target.result){var r=e.target.result,i=r.value,o=i.winningRev||d.winningRev(i);if(t.include_docs){var a=w.objectStore(y).index("_doc_id_rev"),l=i.id+"::"+o;a.get(l).onsuccess=function(e){n(r.value,e.target.result)}}else n(i)}}}function v(e){if(-1!==k)return e(null,k);var t,n=T.transaction([m],"readonly"),i=n.objectStore(m).index("deletedOrLocal"),o=r.IDBKeyRange;i.count(o.only("0")).onsuccess=function(e){t=e.target.result},n.onerror=a(e),n.oncomplete=function(){k=t,e(null,k)}}var g=2,m="document-store",y="by-sequence",b="attach-store",w="meta-store",_="detect-blob-support",x=t.name,$=null,S=null,E=!1,T=null,k=-1;e.type=function(){return"idb"},e._id=f.toPromise(function(e){e(null,S)}),e._bulkDocs=function(e,t,n){function r(e){var t=e.target.result;t.updateSeq=(t.updateSeq||0)+R,j.objectStore(w).put(t)}function i(){if(!C.length)return void(j.objectStore(w).get(w).onsuccess=r);var e=C.shift(),t=e.metadata.id;if(t in D)return v(D[t],e);var n=j.objectStore(m).get(t);n.onsuccess=function(t){var n=t.target.result;n?v(n,e):g(e)}}function o(){var e=[];N.sort(c),N.forEach(function(t){if(delete t._bulk_seq,t.error)return void e.push(t);var n=t.metadata,r=d.winningRev(n);e.push({ok:!0,id:n.id,rev:r}),f.isLocalId(n.id)}),u.Changes.notify(x),k=-1,n(null,e)}function s(e,t){if(e.stub)return t();if("string"==typeof e.data){var r;try{r=atob(e.data)}catch(i){var o=p.error(p.BAD_ARG,"Attachments need to be base64 encoded");return n(o)}if(e.digest="md5-"+f.MD5(r),$){var a=e.content_type;r=f.fixBinary(r),e.data=f.createBlob([r],{type:a})}return t()}var s=new FileReader;s.onloadend=function(){var n=f.arrayBufferToBinaryString(this.result);e.digest="md5-"+f.MD5(n),$||(e.data=btoa(n)),t()},s.readAsArrayBuffer(e.data)}function l(e){function t(){n++,C.length===n&&e()}if(!C.length)return e();var n=0;C.forEach(function(e){function n(){i++,i===r.length&&t()}var r=e.data&&e.data._attachments?Object.keys(e.data._attachments):[];if(!r.length)return t();var i=0;for(var o in e.data._attachments)e.data._attachments.hasOwnProperty(o)&&s(e.data._attachments[o],n)})}function h(e,t,n,r){function i(e){s||(e?(s=e,r(s)):u===c.length&&a())}function o(e){u++,i(e)}function a(){e.data._doc_id_rev=e.data._id+"::"+e.data._rev;var i=j.objectStore(y).index("_doc_id_rev");i.getKey(e.data._doc_id_rev).onsuccess=function(i){var o=i.target.result?j.objectStore(y).put(e.data,i.target.result):j.objectStore(y).put(e.data);o.onsuccess=function(i){var o=e.metadata;o.seq=i.target.result,delete o.rev;var a=f.isLocalId(o.id);o.deletedOrLocal=n||a?"1":"0",o.winningRev=t;var s=j.objectStore(m).put(o);s.onsuccess=function(){delete o.deletedOrLocal,delete o.winningRev,N.push(e),D[e.metadata.id]=e.metadata,f.call(r)}}}}var s=null,u=0;e.data._id=e.metadata.id,e.data._rev=e.metadata.rev,R++,n&&(e.data._deleted=!0);var c=e.data._attachments?Object.keys(e.data._attachments):[];for(var l in e.data._attachments)if(e.data._attachments[l].stub)u++,i();else{var d=e.data._attachments[l].data;delete e.data._attachments[l].data;var p=e.data._attachments[l].digest;S(e,p,d,o)}c.length||a()}function v(e,t){var n=d.merge(e.rev_tree,t.metadata.rev_tree[0],1e3),r=f.isDeleted(e),o=f.isDeleted(t.metadata),a=r&&o&&E||!r&&E&&"new_leaf"!==n.conflicts;if(a)return N.push(_(p.REV_CONFLICT,t._bulk_seq)),i();t.metadata.rev_tree=n.tree;var s=d.winningRev(t.metadata);o=f.isDeleted(t.metadata,s),h(t,s,o,i)}function g(e){var n=d.winningRev(e.metadata),r=f.isDeleted(e.metadata,n);return"was_delete"in t&&r?(N.push(p.MISSING_DOC),i()):void h(e,n,r,i)}function _(e,t){return e._bulk_seq=t,e}function S(e,t,n,r){var i=j.objectStore(b);i.get(t).onsuccess=function(o){var a=o.target.result&&o.target.result.refs||{},s=[e.metadata.id,e.metadata.rev].join("@"),u={digest:t,body:n,refs:a};u.refs[s]=!0,i.put(u).onsuccess=function(){f.call(r)}}}var E=t.new_edits,A=e.docs,C=A.map(function(e,t){var n=f.parseDoc(e,E);return n._bulk_seq=t,n}),O=C.filter(function(e){return e.error});if(O.length)return n(O[0]);var j,N=[],D={},R=0;l(function(){j=T.transaction([m,y,b,w],"readwrite"),j.onerror=a(n),j.ontimeout=a(n),j.oncomplete=o,i()})},e._get=function(e,t,n){function r(){n(a,{doc:i,metadata:o,ctx:s})}var i,o,a,s;t=f.clone(t),s=t.ctx?t.ctx:T.transaction([m,y,b],"readonly"),s.objectStore(m).get(e).onsuccess=function(e){if(o=e.target.result,!o)return a=p.MISSING_DOC,r();if(f.isDeleted(o)&&!t.rev)return a=p.error(p.MISSING_DOC,"deleted"),r();var n=s.objectStore(y),u=t.rev||o.winningRev||d.winningRev(o),c=o.id+"::"+u;n.index("_doc_id_rev").get(c).onsuccess=function(e){return i=e.target.result,i&&i._doc_id_rev&&delete i._doc_id_rev,i?void r():(a=p.MISSING_DOC,r())}}},e._getAttachment=function(e,t,n){var r,i;t=f.clone(t),i=t.ctx?t.ctx:T.transaction([m,y,b],"readonly");var o=e.digest,a=e.content_type;i.objectStore(b).get(o).onsuccess=function(e){var i=e.target.result.body;if(t.encode)if($){var o=new FileReader;o.onloadend=function(){var e=f.arrayBufferToBinaryString(this.result);r=btoa(e),n(null,r)},o.readAsArrayBuffer(i)}else r=i,n(null,r);else $?r=i:(i=f.fixBinary(atob(i)),r=f.createBlob([i],{type:a})),n(null,r)}},e._allDocs=function(e,t){v(function(n,r){return n?t(n):0===e.limit?t(null,{total_rows:r,offset:e.skip,rows:[]}):void l(r,e,t)})},e._info=function(e){v(function(t,n){if(t)return e(t);if(null===T){var r=new Error("db isn't open");return r.id="idbNull",e(r)}var i=0,o=T.transaction([w],"readonly");o.objectStore(w).get(w).onsuccess=function(e){i=e.target.result&&e.target.result.updateSeq||0},o.oncomplete=function(){e(null,{db_name:x,doc_count:n,update_seq:i})}})},e._changes=function(t){function n(){h=T.transaction([m,y]),h.oncomplete=o;var e,n=r.IDBKeyRange;e=s?h.objectStore(y).openCursor(n.lowerBound(t.since,!0),s):h.objectStore(y).openCursor(n.lowerBound(t.since,!0)),e.onsuccess=i,e.onerror=onerror}function i(e){var n=e.target.result;if(n){var r=n.value;if(f.isLocalId(r._id)||t.doc_ids&&-1===t.doc_ids.indexOf(r._id))return n["continue"]();var i=h.objectStore(m);i.get(r._id).onsuccess=function(e){var i=e.target.result;c<i.seq&&(c=i.seq);var o=i.winningRev||d.winningRev(i);if(r._rev!==o)return n["continue"]();delete r._doc_id_rev;var a=t.processChange(r,i,t);a.seq=n.key,b(a)&&(g++,p&&v.push(a),t.onChange(a)),g!==l&&n["continue"]()}}}function o(){t.continuous||t.complete(null,{results:v,last_seq:c})}if(t=f.clone(t),t.continuous){var a=x+":"+f.uuid();return u.Changes.addListener(x,a,e,t),u.Changes.notify(x),{cancel:function(){u.Changes.removeListener(x,a)}}}var s=t.descending?"prev":null,c=0;t.since=t.since&&!s?t.since:0;var l="limit"in t?t.limit:-1;0===l&&(l=1);var p;p="returnDocs"in t?t.returnDocs:!0;var h,v=[],g=0,b=f.filterChange(t);n()},e._close=function(e){return null===T?e(p.NOT_OPEN):(T.close(),delete h[x],T=null,void e())},e._getRevisionTree=function(e,t){var n=T.transaction([m],"readonly"),r=n.objectStore(m).get(e);r.onsuccess=function(e){var n=e.target.result;n?t(null,n.rev_tree):t(p.MISSING_DOC)}},e._doCompaction=function(e,t,n,r){var i=T.transaction([m,y],"readwrite"),o=i.objectStore(m);o.get(e).onsuccess=function(r){var o=r.target.result;o.rev_tree=t;var a=n.length;n.forEach(function(t){var n=i.objectStore(y).index("_doc_id_rev"),r=e+"::"+t;n.getKey(r).onsuccess=function(e){var t=e.target.result;t&&(i.objectStore(y)["delete"](t),a--,a||i.objectStore(m).put(o))}})},i.oncomplete=function(){f.call(r)}};var A=h[x];if(A)return T=A.idb,$=A.blobSupport,S=A.instanceId,E=A.idStored,void n.nextTick(function(){i(null,e)});var C=r.indexedDB.open(x,g);"openReqList"in u||(u.openReqList={}),u.openReqList[x]=C,C.onupgradeneeded=function(e){var t=e.target.result;e.oldVersion<1&&o(t),e.oldVersion<2&&s(e)},C.onsuccess=function(t){T=t.target.result,T.onversionchange=function(){T.close(),delete h[x]},T.onabort=function(){T.close(),delete h[x]};var n=T.transaction([w,_],"readwrite"),r=n.objectStore(w).get(w);r.onsuccess=function(t){var r=function(){null!==$&&E&&(h[x]={idb:T,blobSupport:$,instanceId:S,idStored:E,loaded:!0},i(null,e))},o=t.target.result||{id:w};x+"_id"in o?(S=o[x+"_id"],E=!0,r()):(S=f.uuid(),o[x+"_id"]=S,n.objectStore(w).put(o).onsuccess=function(){E=!0,r()});try{n.objectStore(_).put(f.createBlob(),"key"),$=!0}catch(a){$=!1}finally{r()}}},C.onerror=a(i)}function l(e,t,n){"openReqList"in u||(u.openReqList={}),u.Changes.removeAllListeners(e),u.openReqList[e]&&u.openReqList[e].result&&u.openReqList[e].result.close();var i=r.indexedDB.deleteDatabase(e);i.onsuccess=function(){u.openReqList[e]&&(u.openReqList[e]=null),f.hasLocalStorage()&&delete r.localStorage[e],delete h[e],n(null,{ok:!0})},i.onerror=a(n)}var f=e("../utils"),d=e("../merge"),p=e("../deps/errors"),h={},v={running:!1,queue:[]};u.valid=function(){return r.indexedDB&&s()},u.destroy=f.toPromise(function(e,t,n){v.queue.push({action:function(n){l(e,t,n)},callback:n}),o()}),u.Changes=new f.Changes,t.exports=u}).call(this,e("/Users/daleharvey/src/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../deps/errors":10,"../merge":16,"../utils":21,"/Users/daleharvey/src/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":26}],4:[function(e,t){t.exports=["idb","websql"]},{}],5:[function(e,t){(function(n){function r(e){return"'"+e+"'"}function i(e,t,n,r,i){return"SELECT "+e+" FROM "+("string"==typeof t?t:t.join(" JOIN "))+(n?" ON "+n:"")+(r?" WHERE "+("string"==typeof r?r:r.join(" AND ")):"")+(i?" ORDER BY "+i:"")}function o(e){return function(t){var n=t&&t.constructor.toString().match(/function ([^\(]+)/),r=n&&n[1]||t.type,i=t.target||t.message;e(f.error(f.WSQ_ERROR,i,r))}}function a(e){return decodeURIComponent(window.escape(e))}function s(e,t){for(var n="",r="UTF-8"===t?2:4,i=0,o=e.length;o>i;i+=r){var s=e.substring(i,i+r);4===r&&(s=s.substring(2,4)+s.substring(0,2)),n+=String.fromCharCode(parseInt(s,16))}return n="UTF-8"===t?a(n):n}function u(e,t){function r(){c.hasLocalStorage()&&(n.localStorage["_pouch__websqldb_"+D]=!0),t(null,j)}function a(e){e.executeSql($),e.executeSql("ALTER TABLE "+y+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){e.executeSql(_),e.executeSql("ALTER TABLE "+m+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){e.executeSql(x);var t="SELECT "+m+".winningseq AS seq, "+m+".json AS metadata FROM "+y+" JOIN "+m+" ON "+y+".seq = "+m+".winningseq";e.executeSql(t,[],function(e,t){for(var n=[],r=[],i=0;i<t.rows.length;i++){var o=t.rows.item(i),a=o.seq,s=JSON.parse(o.metadata);c.isDeleted(s)&&n.push(a),c.isLocalId(s.id)&&r.push(s.id)}e.executeSql("UPDATE "+m+"SET local = 1 WHERE id IN ("+r.map(function(){return"?"}).join(",")+")",r),e.executeSql("UPDATE "+y+" SET deleted = 1 WHERE seq IN ("+n.map(function(){return"?"}).join(",")+")",n)})})})}function d(e){for(;R.length>0;){var t=R.pop();t(null,N)}T(e)}function T(e){e.executeSql("SELECT dbid, hex(dbid) AS hexId FROM "+w,[],function(e,t){var n=t.rows.item(0).dbid,r=t.rows.item(0).hexId;O=r.length===2*n.length?"UTF-8":"UTF-16"})}function k(e,t){if(0===t){var n="CREATE TABLE IF NOT EXISTS "+w+" (update_seq, dbid, db_version INTEGER)",r="CREATE TABLE IF NOT EXISTS "+b+" (digest, json, body BLOB)",i="CREATE TABLE IF NOT EXISTS "+m+" (id unique, json, winningseq, local TINYINT(1))",o="CREATE TABLE IF NOT EXISTS "+y+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, doc_id_rev UNIQUE, json, deleted TINYINT(1))";e.executeSql(r),e.executeSql(i,[],function(){e.executeSql($),e.executeSql(x)}),e.executeSql(o,[],function(){e.executeSql(_)}),e.executeSql(n,[],function(){var t="INSERT INTO "+w+" (update_seq, db_version, dbid) VALUES (?, ?, ?)";N=c.uuid(),e.executeSql(t,[0,g,N]),d(e)})}else 1===t&&(a(e),e.executeSql("UPDATE "+w+" SET db_version = "+g)),e.executeSql("SELECT dbid FROM "+w,[],function(e,t){N=t.rows.item(0).dbid,d(e)})}function A(){L.transaction(function(e){e.executeSql("SELECT sql FROM sqlite_master WHERE tbl_name = "+w,[],function(e,t){t.rows.length?/db_version/.test(t.rows.item(0).sql)?e.executeSql("SELECT db_version FROM "+w,[],function(e,t){var n=t.rows.item(0).db_version;k(e,n)}):e.executeSql("ALTER TABLE "+w+" ADD COLUMN db_version INTEGER",[],function(){k(e,1)}):k(e,0)})},o(t),r)}function C(e,t){if(-1!==q)return t(q);var n=i("COUNT("+m+".id) AS 'num'",[m,y],S,[y+".deleted=0",m+".local=0"]);e.executeSql(n,[],function(e,n){q=n.rows.item(0).num,t(q)})}var O,j=this,N=null,D=e.name,R=[],q=-1,L=p(D,h,D,v);return L?("function"!=typeof L.readTransaction&&(L.readTransaction=L.transaction),c.isCordova()&&"undefined"!=typeof n?n.addEventListener(D+"_pouch",function P(){n.removeEventListener(D+"_pouch",P,!1),A()},!1):A(),j.type=function(){return"websql"},j._id=c.toPromise(function(e){e(null,N)}),j._info=function(e){L.readTransaction(function(t){C(t,function(n){var r="SELECT update_seq FROM "+w;t.executeSql(r,[],function(t,r){var i=r.rows.item(0).update_seq;e(null,{db_name:D,doc_count:n,update_seq:i})})})},o(e))},j._bulkDocs=function(e,t,n){function r(e,t){return e._bulk_seq-t._bulk_seq}function a(){var e=[];C.sort(r),C.forEach(function(t){if(delete t._bulk_seq,t.error)return void e.push(t);var n=t.metadata,r=l.winningRev(n);e.push({ok:!0,id:n.id,rev:r}),c.isLocalId(n.id)||E++}),u.Changes.notify(D);var t="SELECT update_seq FROM "+w;A.executeSql(t,[],function(t,r){var i=r.rows.item(0).update_seq+E,o="UPDATE "+w+" SET update_seq=?";t.executeSql(o,[i],function(){n(null,e)})})}function s(e,t){if(e.stub)return t();if("string"==typeof e.data){try{e.data=atob(e.data)
}catch(r){var i=f.error(f.BAD_ARG,"Attachments need to be base64 encoded");return n(i)}var o=c.fixBinary(e.data);e.data=c.createBlob([o],{type:e.content_type})}var a=new FileReader;a.onloadend=function(){var n=c.arrayBufferToBinaryString(this.result);e.data=n,e.digest="md5-"+c.MD5(n),t()},a.readAsArrayBuffer(e.data)}function d(e){function t(){n++,T.length===n&&e()}if(!T.length)return e();var n=0;T.forEach(function(e){function n(){i++,i===r.length&&t()}var r=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],i=0;if(!r.length)return t();for(var o in e.data._attachments)e.data._attachments.hasOwnProperty(o)&&s(e.data._attachments[o],n)})}function p(e,t,n,r,o){function a(){var t=e.data,r=t._id+"::"+t._rev,o=n?1:0,a=i("seq",y,null,"doc_id_rev=?");A.executeSql(a,[r],function(e,n){var i,a;n.rows.length?(i="UPDATE "+y+" SET json=?, deleted=? WHERE doc_id_rev=?;",a=[JSON.stringify(t),o,r],A.executeSql(i,a,function(e){l(e,n.rows.item(0).seq)})):(i="INSERT INTO "+y+" (doc_id_rev, json, deleted) VALUES (?, ?, ?);",a=[r,JSON.stringify(t),o],A.executeSql(i,a,function(e,t){l(e,t.insertId)}))})}function s(e){f||(e?(f=e,r(f)):d===p.length&&a())}function u(e){d++,s(e)}function l(n,i){e.metadata.seq=i,delete e.metadata.rev;var a=o?"UPDATE "+m+" SET json=?, winningseq=(SELECT seq FROM "+y+" WHERE doc_id_rev=?) WHERE id=?":"INSERT INTO "+m+" (id, winningseq, json, local) VALUES (?, ?, ?, ?);",s=JSON.stringify(e.metadata),u=e.metadata.id+"::"+t,l=c.isLocalId(e.metadata.id)?1:0,f=o?[s,u,e.metadata.id]:[e.metadata.id,i,s,l];n.executeSql(a,f,function(){C.push(e),O[e.metadata.id]=e.metadata,r()})}var f=null,d=0;e.data._id=e.metadata.id,e.data._rev=e.metadata.rev,n&&(e.data._deleted=!0);var p=e.data._attachments?Object.keys(e.data._attachments):[];for(var h in e.data._attachments)if(e.data._attachments[h].stub)d++,s();else{var v=e.data._attachments[h].data;delete e.data._attachments[h].data;var g=e.data._attachments[h].digest;x(e,g,v,u)}p.length||a()}function h(e,t){var n=l.merge(e.rev_tree,t.metadata.rev_tree[0],1e3),r=c.isDeleted(t.metadata),i=c.isDeleted(e),o=i&&r&&$||!i&&$&&"new_leaf"!==n.conflicts;if(o)return C.push(_(f.REV_CONFLICT,t._bulk_seq)),g();t.metadata.rev_tree=n.tree;var a=l.winningRev(t.metadata);r=c.isDeleted(t.metadata,a),p(t,a,r,g,!0)}function v(e){var n=l.winningRev(e.metadata),r=c.isDeleted(e.metadata,n);return"was_delete"in t&&r?(C.push(f.MISSING_DOC),g()):void p(e,n,r,g,!1)}function g(){if(!T.length)return a();var e=T.shift(),t=e.metadata.id;return t in O?h(O[t],e):void A.executeSql("SELECT json FROM "+m+" WHERE id = ?",[t],function(t,n){if(n.rows.length){var r=JSON.parse(n.rows.item(0).json);h(r,e)}else v(e)})}function _(e,t){return e._bulk_seq=t,e}function x(e,t,n,r){var i=[e.metadata.id,e.metadata.rev].join("@"),o={digest:t},a="SELECT digest, json FROM "+b+" WHERE digest=?";A.executeSql(a,[t],function(e,s){s.rows.length?(o.refs=JSON.parse(s.rows.item(0).json).refs,a="UPDATE "+b+" SET json=?, body=? WHERE digest=?",e.executeSql(a,[JSON.stringify(o),n,t],function(){r()})):(o.refs={},o.refs[i]=!0,a="INSERT INTO "+b+"(digest, json, body) VALUES (?, ?, ?)",e.executeSql(a,[t,JSON.stringify(o),n],function(){r()}))})}var $=t.new_edits,S=e.docs,E=0,T=S.map(function(e,t){var n=c.parseDoc(e,$);return n._bulk_seq=t,n}),k=T.filter(function(e){return e.error});if(k.length)return n(k[0]);var A,C=[],O={};d(function(){L.transaction(function(e){A=e,g()},o(n),function(){q=-1})})},j._get=function(e,t,n){function r(){n(s,{doc:o,metadata:a,ctx:d})}t=c.clone(t);var o,a,s;if(!t.ctx)return void L.readTransaction(function(r){t.ctx=r,j._get(e,t,n)});var u,l,d=t.ctx;t.rev?(u=i(E,[m,y],null,[y+".doc_id_rev=?",m+".id=?"]),l=[e+"::"+t.rev,e]):(u=i(E,[m,y],S,m+".id=?"),l=[e]),d.executeSql(u,l,function(e,n){if(!n.rows.length)return s=f.MISSING_DOC,r();var i=n.rows.item(0);return a=JSON.parse(i.metadata),i.deleted&&!t.rev?(s=f.error(f.MISSING_DOC,"deleted"),r()):(o=JSON.parse(i.data),void r())})},j._allDocs=function(e,t){var n,r=[],a="startkey"in e?e.startkey:!1,s="endkey"in e?e.endkey:!1,u="key"in e?e.key:!1,c="descending"in e?e.descending:!1,f="limit"in e?e.limit:-1,d="skip"in e?e.skip:0,p=e.inclusive_end!==!1,h=[],v=[m+".local = 0"];if(u!==!1)v.push(m+".id = ?"),h.push(u);else if(a!==!1||s!==!1){if(a!==!1&&(v.push(m+".id "+(c?"<=":">=")+" ?"),h.push(a)),s!==!1){var g=c?">":"<";p&&(g+="="),v.push(m+".id "+g+" ?"),h.push(s)}u!==!1&&(v.push(m+".id = ?"),h.push(u))}"ok"!==e.deleted&&v.push(y+".deleted = 0"),L.readTransaction(function(t){C(t,function(o){if(n=o,0!==f){var a=i(E,[m,y],S,v,m+".id "+(c?"DESC":"ASC"));a+=" LIMIT "+f+" OFFSET "+d,t.executeSql(a,h,function(t,n){for(var i=0,o=n.rows.length;o>i;i++){var a=n.rows.item(i),s=JSON.parse(a.metadata),u=JSON.parse(a.data),c=u._rev,f={id:s.id,key:s.id,value:{rev:c}};if(e.include_docs){f.doc=u,f.doc._rev=c,e.conflicts&&(f.doc._conflicts=l.collectConflicts(s));for(var d in f.doc._attachments)f.doc._attachments.hasOwnProperty(d)&&(f.doc._attachments[d].stub=!0)}if(a.deleted){if("ok"!==e.deleted)continue;f.value.deleted=!0,f.doc=null}r.push(f)}})}})},o(t),function(){t(null,{total_rows:n,offset:e.skip,rows:r})})},j._changes=function(e){function t(){var t=[m+".winningseq > "+e.since,m+".local = 0"],n=[];e.doc_ids&&(t.push(m+".id IN ("+e.doc_ids.map(function(){return"?"}).join(",")+")"),n=e.doc_ids);var u=i(E,[m,y],S,t,m+".winningseq "+(r?"DESC":"ASC")),f=c.filterChange(e);e.view||e.filter||(u+=" LIMIT "+o),L.readTransaction(function(t){t.executeSql(u,n,function(t,n){for(var r=0,i=0,u=n.rows.length;u>i;i++){var c=n.rows.item(i),d=JSON.parse(c.metadata);r<c.seq&&(r=c.seq);var p=JSON.parse(c.data),h=e.processChange(p,d,e);if(h.seq=c.seq,f(h)&&(l++,a&&s.push(h),e.onChange(h)),l===o)break}e.continuous||e.complete(null,{results:s,last_seq:r})})})}if(e=c.clone(e),e.continuous){var n=D+":"+c.uuid();return u.Changes.addListener(D,n,j,e),u.Changes.notify(D),{cancel:function(){u.Changes.removeListener(D,n)}}}var r=e.descending;e.since=e.since&&!r?e.since:0;var o="limit"in e?e.limit:-1;0===o&&(o=1);var a;a="returnDocs"in e?e.returnDocs:!0;var s=[],l=0;t()},j._close=function(e){e()},j._getAttachment=function(e,t,n){var r,i=t.ctx,o=e.digest,a=e.content_type,u="SELECT hex(body) as body FROM "+b+" WHERE digest=?";i.executeSql(u,[o],function(e,i){var o=s(i.rows.item(0).body,O);t.encode?r=btoa(o):(o=c.fixBinary(o),r=c.createBlob([o],{type:a})),n(null,r)})},j._getRevisionTree=function(e,t){L.readTransaction(function(n){var r="SELECT json AS metadata FROM "+m+" WHERE id = ?";n.executeSql(r,[e],function(e,n){if(n.rows.length){var r=JSON.parse(n.rows.item(0).metadata);t(null,r.rev_tree)}else t(f.MISSING_DOC)})})},void(j._doCompaction=function(e,t,n,r){return n.length?void L.transaction(function(i){var o="SELECT json AS metadata FROM "+m+" WHERE id = ?";i.executeSql(o,[e],function(i,o){if(!o.rows.length)return c.call(r);var a=JSON.parse(o.rows.item(0).metadata);a.rev_tree=t;var s=0;n.forEach(function(t){var o=e+"::"+t,u="DELETE FROM "+y+" WHERE doc_id_rev = ?";i.executeSql(u,[o],function(t){if(++s===n.length){var i="UPDATE "+m+" SET json = ? WHERE id = ?";t.executeSql(i,[JSON.stringify(a),e],function(){r()})}})})})}):r()})):t(f.UNKNOWN_ERROR)}var c=e("../utils"),l=e("../merge"),f=e("../deps/errors"),d={},p=c.getArguments(function(e){if("undefined"!=typeof n){if(n.navigator&&n.navigator.sqlitePlugin&&n.navigator.sqlitePlugin.openDatabase)return navigator.sqlitePlugin.openDatabase.apply(navigator.sqlitePlugin,e);if(n.sqlitePlugin&&n.sqlitePlugin.openDatabase)return n.sqlitePlugin.openDatabase.apply(n.sqlitePlugin,e);var t=d[e[0]];return t||(t=d[e[0]]=n.openDatabase.apply(n,e)),t}}),h=1,v=0,g=2,m=r("document-store"),y=r("by-sequence"),b=r("attach-store"),w=r("metadata-store"),_="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+y+" (seq, deleted)",x="CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+m+" (local, id)",$="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+m+" (winningseq)",S=y+".seq = "+m+".winningseq",E=y+".seq AS seq, "+y+".deleted AS deleted, "+y+".json AS data, "+m+".json AS metadata";u.valid=function(){if("undefined"!=typeof n){if(n.navigator&&n.navigator.sqlitePlugin&&n.navigator.sqlitePlugin.openDatabase)return!0;if(n.sqlitePlugin&&n.sqlitePlugin.openDatabase)return!0;if(n.openDatabase)return!0}return!1},u.destroy=c.toPromise(function(e,t,r){u.Changes.removeAllListeners(e);var i=p(e,h,e,v);i.transaction(function(e){var t=[m,y,b,w];t.forEach(function(t){e.executeSql("DROP TABLE IF EXISTS "+t,[])})},o(r),function(){c.hasLocalStorage()&&(delete n.localStorage["_pouch__websqldb_"+e],delete n.localStorage[e]),r(null,{ok:!0})})}),u.Changes=new c.Changes,t.exports=u}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../deps/errors":10,"../merge":16,"../utils":21}],6:[function(e,t){function n(e,t,n){function r(){o.cancel()}s.call(this);var o=this;this.db=e,t=t?i.clone(t):{};var a=n||t.complete||function(){},u=t.complete=i.once(function(t,n){t?o.emit("error",t):o.emit("complete",n),o.removeAllListeners(),e.removeListener("destroyed",r)});a&&(o.on("complete",function(e){a(null,e)}),o.on("error",function(e){a(e)}));var c=t.onChange;c&&o.on("change",c),e.once("destroyed",r),t.onChange=function(e){t.isCancelled||(o.emit("change",e),o.startSeq&&o.startSeq<=e.seq&&(o.emit("uptodate"),o.startSeq=!1),e.deleted?o.emit("delete",e):1===e.changes.length&&"1-"===e.changes[0].rev.slice(0,2)?o.emit("create",e):o.emit("update",e))};var l=new i.Promise(function(e,n){t.complete=function(t,r){t?n(t):e(r)}});o.once("cancel",function(){c&&o.removeListener("change",c),t.complete(null,{status:"cancelled"})}),this.then=l.then.bind(l),this["catch"]=l["catch"].bind(l),this.then(function(e){u(null,e)},u),e.taskqueue.isReady?o.doChanges(t):e.taskqueue.addTask(function(){o.isCancelled?o.emit("cancel"):o.doChanges(t)})}function r(e,t,n){var r=[{rev:e._rev}];"all_docs"===n.style&&(r=o.collectLeaves(t.rev_tree).map(function(e){return{rev:e.rev}}));var a={id:t.id,changes:r,doc:e};return i.isDeleted(t,e._rev)&&(a.deleted=!0),n.conflicts&&(a.doc._conflicts=o.collectConflicts(t),a.doc._conflicts.length||delete a.doc._conflicts),a}var i=e("./utils"),o=e("./merge"),a=e("./deps/errors"),s=e("events").EventEmitter,u=e("./evalFilter"),c=e("./evalView");t.exports=n,i.inherits(n,s),n.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},n.prototype.doChanges=function(e){var t=this,n=e.complete;if(e=i.clone(e),"live"in e&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=r,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"===e.since)return void this.db.info().then(function(r){return t.isCancelled?void n(null,{status:"cancelled"}):(e.since=r.update_seq-1,void t.doChanges(e))},n);if(e.continuous&&"now"!==e.since&&this.db.info().then(function(e){t.startSeq=e.update_seq-1},function(e){if("idbNull"!==e.id)throw e}),"http"!==this.db.type()&&e.filter&&"string"==typeof e.filter)return this.filterChanges(e);"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=n;var o=this.db._changes(e);if(o&&"function"==typeof o.cancel){var a=t.cancel;t.cancel=i.getArguments(function(e){o.cancel(),a.apply(this,e)})}},n.prototype.filterChanges=function(e){var t=this,n=e.complete;if("_view"===e.filter){if(!e.view||"string"!=typeof e.view){var r=new Error("`view` filter parameter is not provided.");return r.status=a.BAD_REQUEST.status,r.name=a.BAD_REQUEST.name,r.error=!0,void n(r)}var i=e.view.split("/");this.db.get("_design/"+i[0],function(r,o){if(t.isCancelled)return void n(null,{status:"cancelled"});if(r)return void n(r);if(o&&o.views&&o.views[i[1]]){var s=c(o.views[i[1]].map);return e.filter=s,void t.doChanges(e)}var u=o.views?"missing json key: "+i[1]:"missing json key: views";r||(r=new Error(u),r.status=a.MISSING_DOC.status,r.name=a.MISSING_DOC.name,r.error=!0),n(r)})}else{var o=e.filter.split("/");this.db.get("_design/"+o[0],function(r,i){if(t.isCancelled)return void n(null,{status:"cancelled"});if(r)return void n(r);if(i&&i.filters&&i.filters[o[1]]){var s=u(i.filters[o[1]]);return e.filter=s,void t.doChanges(e)}var c=i&&i.filters?"missing json key: "+o[1]:"missing json key: filters";return r||(r=new Error(c),r.status=a.MISSING_DOC.status,r.name=a.MISSING_DOC.name,r.error=!0),void n(r)})}}},{"./deps/errors":10,"./evalFilter":13,"./evalView":14,"./merge":16,"./utils":21,events:25}],7:[function(e,t){(function(n){function r(e){e&&n.debug&&console.error(e)}function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);var c=this;("function"==typeof t||"undefined"==typeof t)&&(n=t,t={}),"object"==typeof e&&(t=e,e=void 0),"undefined"==typeof n&&(n=r),t=t||{};var l=n;c.auto_compaction=t.auto_compaction,c.prefix=i.prefix,o.call(c),c.taskqueue=new s;var f=new u(function(r,o){n=function(e,t){return e?o(e):(delete t.then,void r(t))},t=a.clone(t);var s,u,l=t.name||e;return function(){try{if("string"!=typeof l)throw u=new Error("Missing/invalid DB name"),u.code=400,u;if(s=i.parseAdapter(l,t),t.originalName=l,t.name=s.name,t.adapter=t.adapter||s.adapter,c._adapter=t.adapter,!i.adapters[t.adapter])throw u=new Error("Adapter is missing"),u.code=404,u;if(!i.adapters[t.adapter].valid())throw u=new Error("Invalid Adapter"),u.code=404,u}catch(e){c.taskqueue.fail(e),c.changes=a.toPromise(function(t){t.complete&&t.complete(e)})}}(),u?o(u):(c.adapter=t.adapter,c.replicate={},c.replicate.from=function(e,t,n){return i.replicate(e,c,t,n)},c.replicate.to=function(e,t,n){return i.replicate(c,e,t,n)},c.sync=function(e,t,n){return i.sync(c,e,t,n)},c.replicate.sync=c.sync,c.destroy=a.adapterFun("destroy",function(e){var t=this;t.info(function(t,n){return t?e(t):void i.destroy(n.db_name,e)})}),i.adapters[t.adapter].call(c,t,function(e){function r(e){"destroyed"===e&&(c.emit("destroyed"),i.removeListener(t.name,r))}return e?void(n&&(c.taskqueue.fail(e),n(e))):(i.on(t.name,r),c.emit("created",c),i.emit("created",t.originalName),c.taskqueue.ready(c),void n(null,c))}),t.skipSetup&&c.taskqueue.ready(c),void(a.isCordova()&&cordova.fireWindowEvent(t.name+"_pouch",{})))});f.then(function(e){l(null,e)},l),c.then=f.then.bind(f),c["catch"]=f["catch"].bind(f)}var o=e("./adapter"),a=e("./utils"),s=e("./taskqueue"),u=a.Promise;a.inherits(i,o),t.exports=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./adapter":1,"./taskqueue":20,"./utils":21}],8:[function(e,t){function n(e,t){function n(t,n,r){if(e.binary||e.json||!e.processData||"string"==typeof t){if(!e.binary&&e.json&&"string"==typeof t)try{t=JSON.parse(t)}catch(i){return r(i)}}else t=JSON.stringify(t);Array.isArray(t)&&(t=t.map(function(e){var t;return e.ok?e:e.error&&"conflict"===e.error?(t=o.REV_CONFLICT,t.id=e.id,t):e.error&&"forbidden"===e.error?(t=o.FORBIDDEN,t.id=e.id,t.reason=e.reason,t):e.missing?(t=o.MISSING_DOC,t.missing=e.missing,t):e})),r(null,t,n)}function s(e,t){var n,r,i,a;try{n=JSON.parse(e.responseText);for(a in o)if(o.hasOwnProperty(a)&&o[a].name===n.error){i=o[a];break}i||(i=o.UNKNOWN_ERROR,e.status&&(i.status=e.status),e.statusText&&(e.name=e.statusText)),r=o.error(i,n.reason)}catch(s){for(var a in o)if(o.hasOwnProperty(a)&&o[a].status===e.status){i=o[a];break}i||(i=o.UNKNOWN_ERROR,e.status&&(i.status=e.status),e.statusText&&(e.name=e.statusText)),r=o.error(i)}t(r)}var u=!1,c=a.getArguments(function(e){u||(t.apply(this,e),u=!0)});"function"==typeof e&&(c=e,e={}),e=a.clone(e);var l={method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1};if(e=a.extend(!0,l,e),"GET"===e.method&&!e.cache){var f=-1!==e.url.indexOf("?");e.url+=(f?"&":"?")+"_nonce="+a.uuid(16)}var d,p;p=e.xhr?new e.xhr:new XMLHttpRequest,p.open(e.method,e.url),p.withCredentials=!0,e.json&&(e.headers.Accept="application/json",e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.body&&e.processData&&"string"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.binary&&(p.responseType="arraybuffer");var h=function(e,t,n){var r="";if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),r="; expires="+i.toGMTString()}document.cookie=e+"="+t+r+"; path=/"};for(var v in e.headers)if("Cookie"===v){var g=e.headers[v].split("=");h(g[0],g[1],10)}else p.setRequestHeader(v,e.headers[v]);"body"in e||(e.body=null);var m=function(){u||(p.abort(),s(p,c))};if(p.onreadystatechange=function(){if(4===p.readyState&&!u)if(clearTimeout(d),p.status>=200&&p.status<300){var t;t=e.binary?i([p.response||""],{type:p.getResponseHeader("Content-Type")}):p.responseText,n(t,p,c)}else s(p,c)},e.timeout>0&&(d=setTimeout(m,e.timeout),p.onprogress=function(){clearTimeout(d),d=setTimeout(m,e.timeout)},"undefined"==typeof r&&(r=-1!==Object.keys(p).indexOf("upload")),r&&(p.upload.onprogress=p.onprogress)),e.body&&e.body instanceof Blob){var y=new FileReader;y.onloadend=function(){for(var e="",t=new Uint8Array(this.result),n=t.byteLength,r=0;n>r;r++)e+=String.fromCharCode(t[r]);e=a.fixBinary(e),p.send(e)},y.readAsArrayBuffer(e.body)}else p.send(e.body);return{abort:m}}var r,i=e("./blob.js"),o=e("./errors"),a=e("../utils");t.exports=n},{"../utils":21,"./blob.js":9,"./errors":10}],9:[function(e,t){(function(e){function n(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(r){if("TypeError"!==r.name)throw r;for(var i=e.BlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder||e.WebKitBlobBuilder,o=new i,a=0;a<t.length;a+=1)o.append(t[a]);return o.getBlob(n.type)}}t.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(e,t,n){function r(e){this.status=e.status,this.name=e.error,this.message=e.reason,this.error=!0}r.prototype__proto__=Error.prototype,r.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message})},n.UNAUTHORIZED=new r({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),n.MISSING_BULK_DOCS=new r({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),n.MISSING_DOC=new r({status:404,error:"not_found",reason:"missing"}),n.REV_CONFLICT=new r({status:409,error:"conflict",reason:"Document update conflict"}),n.INVALID_ID=new r({status:400,error:"invalid_id",reason:"_id field must contain a string"}),n.MISSING_ID=new r({status:412,error:"missing_id",reason:"_id is required for puts"}),n.RESERVED_ID=new r({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),n.NOT_OPEN=new r({status:412,error:"precondition_failed",reason:"Database not open"}),n.UNKNOWN_ERROR=new r({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),n.BAD_ARG=new r({status:500,error:"badarg",reason:"Some query argument is invalid"}),n.INVALID_REQUEST=new r({status:400,error:"invalid_request",reason:"Request was invalid"}),n.QUERY_PARSE_ERROR=new r({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),n.DOC_VALIDATION=new r({status:500,error:"doc_validation",reason:"Bad special document member"}),n.BAD_REQUEST=new r({status:400,error:"bad_request",reason:"Something wrong with the request"}),n.NOT_AN_OBJECT=new r({status:400,error:"bad_request",reason:"Document must be a JSON object"}),n.DB_MISSING=new r({status:404,error:"not_found",reason:"Database not found"}),n.IDB_ERROR=new r({status:500,error:"indexed_db_went_bad",reason:"unknown"}),n.WSQ_ERROR=new r({status:500,error:"web_sql_went_bad",reason:"unknown"}),n.LDB_ERROR=new r({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),n.FORBIDDEN=new r({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),n.error=function(e,t,n){function r(){this.message=t,n&&(this.name=n)}return r.prototype=e,new r(t)}},{}],11:[function(e,t){function n(e,t,n){return new i(function(i,o){return t&&"object"==typeof t&&(t=t._id),"string"!=typeof t?o(new Error("doc id is required")):void e.get(t,function(a,s){if(a)return"not_found"!==a.name?o(a):i(r(e,n({_id:t}),n));var u=n(s);return u?void i(r(e,u,n)):i(s)})})}function r(e,t,r){return e.put(t)["catch"](function(i){if("conflict"!==i.name)throw i;return n(e,t,r)})}var i=e("../utils").Promise;t.exports=function(e,t,r,i){return"function"!=typeof i?n(e,t,r):void n(e,t,r).then(function(e){i(null,e)},i)}},{"../utils":21}],12:[function(e,t){function n(e){return 0|Math.random()*e}function r(e,t){t=t||i.length;var r="",o=-1;if(e){for(;++o<e;)r+=i[n(t)];return r}for(;++o<36;)switch(o){case 8:case 13:case 18:case 23:r+="-";break;case 19:r+=i[3&n(16)|8];break;default:r+=i[n(16)]}return r}var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");t.exports=r},{}],13:[function(_dereq_,module,exports){function evalFilter(input){return eval(["(function () { return ",input," })()"].join(""))}module.exports=evalFilter},{}],14:[function(_dereq_,module,exports){function evalView(input){return eval(["(function () {","  return function (doc) {","    var emitted = false;","    var emit = function (a, b) {","      emitted = true;","    };","    var view = "+input+";","    view(doc);","    if (emitted) {","      return true;","    }","  }","})()"].join("\n"))}module.exports=evalView},{}],15:[function(e,t){(function(n){var r=e("./setup");t.exports=r,r.ajax=e("./deps/ajax"),r.extend=e("pouchdb-extend"),r.utils=e("./utils"),r.Errors=e("./deps/errors"),r.replicate=e("./replicate").replicate,r.sync=e("./sync"),r.version=e("./version");var i=e("./adapters/http");if(r.adapter("http",i),r.adapter("https",i),r.adapter("idb",e("./adapters/idb")),r.adapter("websql",e("./adapters/websql")),r.plugin(e("pouchdb-mapreduce")),!n.browser){var o=e("./adapters/leveldb");r.adapter("ldb",o),r.adapter("leveldb",o)}}).call(this,e("/Users/daleharvey/src/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./adapters/http":2,"./adapters/idb":3,"./adapters/leveldb":24,"./adapters/websql":5,"./deps/ajax":8,"./deps/errors":10,"./replicate":17,"./setup":18,"./sync":19,"./utils":21,"./version":22,"/Users/daleharvey/src/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":26,"pouchdb-extend":47,"pouchdb-mapreduce":50}],16:[function(e,t){function n(e){for(var t,n=e.shift(),r=[n.id,n.opts,[]],i=r;e.length;)n=e.shift(),t=[n.id,n.opts,[]],i[2].push(t),i=t;return r}function r(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;n.length>0;){var i=n.pop(),o=i.tree1,a=i.tree2;(o[1].status||a[1].status)&&(o[1].status="available"===o[1].status||"available"===a[1].status?"available":"missing");for(var s=0;s<a[2].length;s++)if(o[2][0]){for(var u=!1,c=0;c<o[2].length;c++)o[2][c][0]===a[2][s][0]&&(n.push({tree1:o[2][c],tree2:a[2][s]}),u=!0);u||(r="new_branch",o[2].push(a[2][s]),o[2].sort())}else r="new_leaf",o[2][0]=a[2][s]}return{conflicts:r,tree:e}}function i(e,t,n){var i,o=[],a=!1,s=!1;return e.length?(e.forEach(function(e){if(e.pos===t.pos&&e.ids[0]===t.ids[0])i=r(e.ids,t.ids),o.push({pos:e.pos,ids:i.tree}),a=a||i.conflicts,s=!0;else if(n!==!0){var u=e.pos<t.pos?e:t,c=e.pos<t.pos?t:e,l=c.pos-u.pos,f=[],d=[];for(d.push({ids:u.ids,diff:l,parent:null,parentIdx:null});d.length>0;){var p=d.pop();0!==p.diff?p.ids&&p.ids[2].forEach(function(e,t){d.push({ids:e,diff:p.diff-1,parent:p.ids,parentIdx:t})}):p.ids[0]===c.ids[0]&&f.push(p)}var h=f[0];h?(i=r(h.ids,c.ids),h.parent[2][h.parentIdx]=i.tree,o.push({pos:u.pos,ids:u.ids}),a=a||i.conflicts,s=!0):o.push(e)}else o.push(e)}),s||o.push(t),o.sort(function(e,t){return e.pos-t.pos}),{tree:o,conflicts:a||"internal_node"}):{tree:[t],conflicts:"new_leaf"}}function o(e,t){var r=s.rootToLeaf(e).map(function(e){var r=e.ids.slice(-t);return{pos:e.pos+(e.ids.length-r.length),ids:n(r)}});return r.reduce(function(e,t){return i(e,t,!0).tree},[r.shift()])}var a=e("pouchdb-extend"),s={};s.merge=function(e,t,n){e=a(!0,[],e),t=a(!0,{},t);var r=i(e,t);return{tree:o(r.tree,n),conflicts:r.conflicts}},s.winningRev=function(e){var t=[];return s.traverseRevTree(e.rev_tree,function(e,n,r,i,o){e&&t.push({pos:n,id:r,deleted:!!o.deleted})}),t.sort(function(e,t){return e.deleted!==t.deleted?e.deleted>t.deleted?1:-1:e.pos!==t.pos?t.pos-e.pos:e.id<t.id?1:-1}),t[0].pos+"-"+t[0].id},s.traverseRevTree=function(e,t){for(var n,r=e.slice();n=r.pop();)for(var i=n.pos,o=n.ids,a=o[2],s=t(0===a.length,i,o[0],n.ctx,o[1]),u=0,c=a.length;c>u;u++)r.push({pos:i+1,ids:a[u],ctx:s})},s.collectLeaves=function(e){var t=[];return s.traverseRevTree(e,function(e,n,r,i,o){e&&t.unshift({rev:n+"-"+r,pos:n,opts:o})}),t.sort(function(e,t){return t.pos-e.pos}),t.map(function(e){delete e.pos}),t},s.collectConflicts=function(e){var t=s.winningRev(e),n=s.collectLeaves(e.rev_tree),r=[];return n.forEach(function(e){e.rev===t||e.opts.deleted||r.push(e.rev)}),r},s.rootToLeaf=function(e){var t=[];return s.traverseRevTree(e,function(e,n,r,i,o){if(i=i?i.slice(0):[],i.push({id:r,opts:o}),e){var a=n+1-i.length;t.unshift({pos:a,ids:i})}return i}),t},t.exports=s},{"pouchdb-extend":47}],17:[function(e,t,n){function r(){d.call(this),this.cancelled=!1;var e=this,t=new l.Promise(function(t,n){e.once("complete",t),e.once("error",n)});e.then=function(e,n){return t.then(e,n)},e["catch"]=function(e){return t["catch"](e)},e["catch"](function(){})}function i(e,t,n){var r=n.filter?n.filter.toString():"";return e.id().then(function(e){return t.id().then(function(t){var i=e+t+r+JSON.stringify(n.query_params)+n.doc_ids;return"_local/"+l.MD5(i)})})}function o(e,t,n){return e.get(t)["catch"](function(e){if(404===e.status)return{_id:t};throw e}).then(function(t){return t.last_seq=n,e.put(t)})}function a(e,t,n){this.src=e,this.target=t,this.id=n}function s(e,t,n,r,i){function o(){if(0!==$.docs.length){var e=$.docs;return n.bulkDocs({docs:e},{new_edits:!1}).then(function(e){if(i.cancelled)throw m(),new Error("cancelled");var t=[];if(e.forEach(function(e){e.ok||(P.doc_write_failures++,t.push(new Error(e.reason||e.message||"Unknown reason")))}),t.length>0){var n=new Error("bulkDocs error");throw n.other_errors=t,g("target.bulkDocs failed to write docs",n),new Error("bulkWrite partial failure")}},function(t){throw P.doc_write_failures+=e.length,t})}}function s(){var e=$.diffs,n=Object.keys(e)[0],r=e[n].missing;return t.get(n,{revs:!0,open_revs:r,attachments:!0}).then(function(t){t.forEach(function(t){return i.cancelled?m():void(t.ok&&(P.docs_read++,$.pendingRevs++,$.docs.push(t.ok),delete e[t.ok._id]))})})}function u(){return Object.keys($.diffs).length>0?s().then(u):l.Promise.resolve()}function c(){var e=Object.keys($.diffs).filter(function(e){var t=$.diffs[e].missing;return 1===t.length&&"1-"===t[0].slice(0,2)});return t.allDocs({keys:e,include_docs:!0}).then(function(e){if(i.cancelled)throw m(),new Error("cancelled");e.rows.forEach(function(e){!e.doc||e.deleted||"1-"!==e.value.rev.slice(0,2)||e.doc._attachments&&0!==Object.keys(e.doc._attachments).length||(P.docs_read++,$.pendingRevs++,$.docs.push(e.doc),delete $.diffs[e.id])})})}function f(){return"http"===t.type()?c().then(u):u()}function d(){return T=!0,L.writeCheckpoint($.seq).then(function(){if(T=!1,i.cancelled)throw m(),new Error("cancelled");P.last_seq=C=$.seq,P.docs_written+=$.docs.length,i.emit("change",l.clone(P)),$=void 0,_()})["catch"](function(e){throw T=!1,g("writeCheckpoint completed with error",e),e})}function p(){var e={};return $.changes.forEach(function(t){e[t.id]=t.changes.map(function(e){return e.rev})}),n.revsDiff(e).then(function(e){if(i.cancelled)throw m(),new Error("cancelled");$.diffs=e,$.pendingRevs=0})}function h(){if(!i.cancelled&&!$){if(0===S.length)return void v(!0);$=S.shift(),p().then(f).then(o).then(d).then(h)["catch"](function(e){g("batch processing terminated with error",e)})}}function v(e){return 0===E.changes.length?void(0!==S.length||$||((O&&I.live||k)&&i.emit("uptodate",l.clone(P)),k&&m())):void((e||k||E.changes.length>=j)&&(S.push(E),E={seq:0,changes:[],docs:[]},h()))}function g(e,t){A||(P.ok=!1,P.status="aborted",t.message=e,P.errors.push(t),S=[],E={seq:0,changes:[],docs:[]},m())}function m(){if(!(A||i.cancelled&&(P.status="cancelled",T)))if(P.status=P.status||"complete",P.end_time=new Date,P.last_seq=C,A=i.cancelled=!0,P.errors.length>0){var e=P.errors.pop();P.errors.length>0&&(e.other_errors=P.errors),e.result=P,i.emit("error",e)}else i.emit("complete",P)}function y(e){return i.cancelled?m():(R++,0!==E.changes.length||0!==S.length||$||i.emit("outofdate",l.clone(P)),E.seq=e.seq,E.changes.push(e),void v(0===S.length))}function b(e){return D=!1,i.cancelled?m():(R>0?(I.since=e.last_seq,_()):O?(I.live=!0,_()):k=!0,void v(!0))}function w(e){return D=!1,i.cancelled?m():void g("changes rejected",e)}function _(){!D&&!k&&S.length<N&&(D=!0,R=0,t.changes(I).on("change",y).then(b)["catch"](w))}function x(){L.getCheckpoint().then(function(e){C=e,I={since:C,limit:j,style:"all_docs",doc_ids:q,returnDocs:!1},r.filter&&(I.filter=r.filter),r.query_params&&(I.query_params=r.query_params),_()})["catch"](function(e){g("getCheckpoint rejected with ",e)})}var $,S=[],E={seq:0,changes:[],docs:[]},T=!1,k=!1,A=!1,C=0,O=r.continuous||r.live||!1,j=r.batch_size||100,N=r.batches_limit||10,D=!1,R=0,q=r.doc_ids,L=new a(t,n,e),P={ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]},I={};i.ready(t,n),i.once("cancel",m),"function"==typeof r.onChange&&i.on("change",r.onChange),"function"==typeof r.complete&&(i.once("error",r.complete),i.once("complete",function(e){r.complete(null,e)})),"undefined"==typeof r.since?x():(T=!0,L.writeCheckpoint(r.since).then(function(){return T=!1,i.cancelled?void m():(C=r.since,void x())})["catch"](function(e){throw T=!1,g("writeCheckpoint completed with error",e),e}))}function u(e){return"string"==typeof e?new f(e):e.then?e:l.Promise.resolve(e)}function c(e,t,n,o){"function"==typeof n&&(o=n,n={}),"undefined"==typeof n&&(n={}),n.complete||(n.complete=o||function(){}),n=l.clone(n),n.continuous=n.continuous||n.live;var a=new r(n);return u(e).then(function(e){return u(t).then(function(t){if(!n.server)return i(e,t,n).then(function(r){a.emit("id",r),s(r,e,t,n,a)});if("function"!=typeof e.replicateOnServer)throw new TypeError("Server replication not supported for "+e.type()+" adapter");if(e.type()!==t.type())throw new TypeError("Server replication for different adapter types ("+e.type()+" and "+t.type()+") is not supported");e.replicateOnServer(t,n,a)})})["catch"](function(e){a.emit("error",e),n.complete(e)}),a}var l=e("./utils"),f=e("./index"),d=e("events").EventEmitter;l.inherits(r,d),r.prototype.cancel=function(){this.cancelled=!0,this.emit("cancel")},r.prototype.ready=function(e,t){function n(){i.cancel()}function r(){i.removeAllListeners(),e.removeListener("destroyed",n),t.removeListener("destroyed",n)}var i=this;e.once("destroyed",n),t.once("destroyed",n),this.then(r,r)},a.prototype.writeCheckpoint=function(e){var t=this;return this.updateTarget(e).then(function(){return t.updateSource(e)})},a.prototype.updateTarget=function(e){return o(this.target,this.id,e)},a.prototype.updateSource=function(e){var t=this;return this.readOnlySource?l.Promise.resolve(!0):o(this.src,this.id,e)["catch"](function(e){if(401===e.status)return t.readOnlySource=!0,!0;throw e})},a.prototype.getCheckpoint=function(){var e=this;return e.target.get(e.id).then(function(t){return e.src.get(e.id).then(function(e){return t.last_seq===e.last_seq?e.last_seq:0},function(n){if(404===n.status&&t.last_seq)return e.src.put({_id:e.id,last_seq:0}).then(function(){return 0},function(n){return 401===n.status?(e.readOnlySource=!0,t.last_seq):0});throw n})})["catch"](function(e){if(404!==e.status)throw e;return 0})},n.replicate=c},{"./index":15,"./utils":21,events:25}],18:[function(e,t){(function(n){var r=e("./constructor"),i=e("./utils"),o=i.Promise,a=e("events").EventEmitter;r.adapters={},r.preferredAdapters=e("./adapters/preferredAdapters.js"),r.prefix="_pouch_";var s=new a,u=["on","addListener","emit","listeners","once","removeAllListeners","removeListener","setMaxListeners"];u.forEach(function(e){r[e]=s[e].bind(s)}),r.setMaxListeners(0),r.parseAdapter=function(e,t){var o,a,s=e.match(/([a-z\-]*):\/\/(.*)/);if(s){if(e=/http(s?)/.test(s[1])?s[1]+"://"+s[2]:s[2],o=s[1],!r.adapters[o].valid())throw"Invalid adapter";
return{name:e,adapter:s[1]}}var u="idb"in r.adapters&&"websql"in r.adapters&&i.hasLocalStorage()&&n.localStorage["_pouch__websqldb_"+r.prefix+e];if("undefined"!=typeof t&&t.db)a="leveldb";else for(var c=0;c<r.preferredAdapters.length;++c)if(a=r.preferredAdapters[c],a in r.adapters){if(u&&"idb"===a)continue;break}if(o=r.adapters[a],a&&o){var l="use_prefix"in o?o.use_prefix:!0;return{name:l?r.prefix+e:e,adapter:a}}throw"No valid adapter found"},r.destroy=i.toPromise(function(e,t,n){function i(){u.destroy(s,t,function(e,t){e?n(e):(r.emit("destroyed",s),r.emit(s,"destroyed"),n(null,t||{ok:!0}))})}("function"==typeof t||"undefined"==typeof t)&&(n=t,t={}),"object"==typeof e&&(t=e,e=void 0);var a=r.parseAdapter(t.name||e,t),s=a.name,u=r.adapters[a.adapter],c="use_prefix"in u?u.use_prefix:!0,l=c?s.replace(new RegExp("^"+r.prefix),""):s;new r(l,{adapter:a.adapter},function(e,t){return e?n(e):void t.get("_local/_pouch_dependentDbs",function(e,t){if(e)return"not_found"!==e.name?n(e):i();var s=t.dependentDbs,u=Object.keys(s).map(function(e){var t=c?e.replace(new RegExp("^"+r.prefix),""):e;return r.destroy(t,{adapter:a.adapter})});o.all(u).then(i,function(e){n(e)})})})}),r.allDbs=i.toPromise(function(e){var t=new Error("allDbs method removed");t.stats="400",e(t)}),r.adapter=function(e,t){t.valid()&&(r.adapters[e]=t)},r.plugin=function(e){Object.keys(e).forEach(function(t){r.prototype[t]=e[t]})},t.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./adapters/preferredAdapters.js":4,"./constructor":7,"./utils":21,events:25}],19:[function(e,t){function n(e,t,o,a){function s(e){h||(h=!0,f.emit("cancel",e))}function u(e){f.emit("change",{direction:"pull",change:e})}function c(e){f.emit("change",{direction:"push",change:e})}function l(e,t){"change"!==e||t!==u&&t!==c?"cancel"===e&&t===s?f.removeAllListeners("cancel"):e in v&&t===v[e]&&f.removeAllListeners(e):f.removeAllListeners("change")}if(!(this instanceof n))return new n(e,t,o,a);var f=this;"function"==typeof o&&(a=o,o={}),"undefined"==typeof o&&(o={}),this.canceled=!1,o=r.clone(o);var d,p;"onChange"in o&&(d=o.onChange,delete o.onChange),"function"!=typeof a||o.complete?"complete"in o&&(p=o.complete,delete o.complete):p=a,this.push=i(e,t,o),this.pull=i(t,e,o);var h=!1,v={};this.on("newListener",function(e){"change"===e?(f.pull.on("change",u),f.push.on("change",c)):"cancel"===e?(f.pull.on("cancel",s),f.push.on("cancel",s)):"error"===e||"complete"===e||e in v||(v[e]=function(t){f.emit(e,t)},f.pull.on(e,v[e]),f.push.on(e,v[e]))}),this.on("removeListener",function(e){"change"===e?(f.pull.removeListener("change",u),f.push.removeListener("change",c)):"cancel"===e?(f.pull.removeListener("cancel",s),f.push.removeListener("cancel",s)):e in v&&"function"==typeof v[e]&&(f.pull.removeListener(e,v[e]),f.push.removeListener(e,v[e]),delete v[e])}),this.pull.on("removeListener",l),this.push.on("removeListener",l);var g=r.Promise.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return f.emit("complete",t),p&&p(null,t),f.removeAllListeners(),t},function(e){throw f.cancel(),f.emit("error",e),p&&p(e),f.removeAllListeners(),e});this.then=function(e,t){return g.then(e,t)},this["catch"]=function(e){return g["catch"](e)}}var r=e("./utils"),i=e("./replicate").replicate,o=e("events").EventEmitter;t.exports=n,r.inherits(n,o),n.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())}},{"./replicate":17,"./utils":21,events:25}],20:[function(e,t){function n(){this.isReady=!1,this.failed=!1,this.queue=[]}t.exports=n,n.prototype.execute=function(){var e,t;if(this.failed)for(;e=this.queue.shift();)"function"!=typeof e?(t=e.parameters[e.parameters.length-1],"function"==typeof t?t(this.failed):"changes"===e.name&&"function"==typeof t.complete&&t.complete(this.failed)):e(this.failed);else if(this.isReady)for(;e=this.queue.shift();)"function"==typeof e?e():e.task=this.db[e.name].apply(this.db,e.parameters)},n.prototype.fail=function(e){this.failed=e,this.execute()},n.prototype.ready=function(e){return this.failed?!1:0===arguments.length?this.isReady:(this.isReady=e?!0:!1,this.db=e,void this.execute())},n.prototype.addTask=function(e,t){if("function"!=typeof e){var n={name:e,parameters:t};return this.queue.push(n),this.failed&&this.execute(),n}this.queue.push(e),this.failed&&this.execute()}},{}],21:[function(e,t,n){(function(t,r){function i(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function o(){return"undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage&&"undefined"!=typeof chrome.storage.local}function a(){if(!(this instanceof a))return new a;var e=this;d.call(this),this.isChrome=o(),this.listeners={},this.hasLocal=!1,this.isChrome||(this.hasLocal=n.hasLocalStorage()),this.isChrome?chrome.storage.onChanged.addListener(function(t){null!=t.db_name&&e.emit(t.dbName.newValue)}):this.hasLocal&&(r.addEventListener?r.addEventListener("storage",function(t){e.emit(t.key)}):r.attachEvent("storage",function(t){e.emit(t.key)}))}var s=e("crypto"),u=e("md5-jkmyers"),c=e("./merge");n.extend=e("pouchdb-extend"),n.ajax=e("./deps/ajax"),n.createBlob=e("./deps/blob"),n.uuid=e("./deps/uuid"),n.getArguments=e("argsarray");var l=e("./deps/buffer"),f=e("./deps/errors"),d=e("events").EventEmitter;n.Promise="function"==typeof r.Promise?r.Promise:e("bluebird");var p=n.Promise,h=i(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree"]);n.clone=function(e){return n.extend(!0,{},e)},n.inherits=e("inherits"),n.invalidIdError=function(e){return e?"string"!=typeof e?f.INVALID_ID:/^_/.test(e)&&!/^_(design|local)/.test(e)?f.RESERVED_ID:void 0:f.MISSING_ID},n.call=n.getArguments(function(e){if(e.length){var t=e.shift();"function"==typeof t&&t.apply(this,e)}}),n.isLocalId=function(e){return/^_local/.test(e)},n.isDeleted=function(e,t){t||(t=c.winningRev(e));var n=t.indexOf("-");-1!==n&&(t=t.substring(n+1));var r=!1;return c.traverseRevTree(e.rev_tree,function(e,n,i,o,a){i===t&&(r=!!a.deleted)}),r},n.filterChange=function(e){return function(t){var n={},r=e.filter&&"function"==typeof e.filter;if(n.query=e.query_params,e.filter&&r&&!e.filter.call(this,t.doc,n))return!1;if(e.doc_ids&&-1===e.doc_ids.indexOf(t.id))return!1;if(e.include_docs)for(var i in t.doc._attachments)t.doc._attachments.hasOwnProperty(i)&&(t.doc._attachments[i].stub=!0);else delete t.doc;return!0}},n.parseDoc=function(e,t){var r,i,o,a={status:"available"};if(e._deleted&&(a.deleted=!0),t)if(e._id||(e._id=n.uuid()),i=n.uuid(32,16).toLowerCase(),e._rev){if(o=/^(\d+)-(.+)$/.exec(e._rev),!o)throw"invalid value for property '_rev'";e._rev_tree=[{pos:parseInt(o[1],10),ids:[o[2],{status:"missing"},[[i,a,[]]]]}],r=parseInt(o[1],10)+1}else e._rev_tree=[{pos:1,ids:[i,a,[]]}],r=1;else if(e._revisions&&(e._rev_tree=[{pos:e._revisions.start-e._revisions.ids.length+1,ids:e._revisions.ids.reduce(function(e,t){return null===e?[t,a,[]]:[t,{status:"missing"},[e]]},null)}],r=e._revisions.start,i=e._revisions.ids[0]),!e._rev_tree){if(o=/^(\d+)-(.+)$/.exec(e._rev),!o)return f.BAD_ARG;r=parseInt(o[1],10),i=o[2],e._rev_tree=[{pos:parseInt(o[1],10),ids:[o[2],a,[]]}]}var s=n.invalidIdError(e._id);if(s)return s;e._id=decodeURIComponent(e._id),e._rev=[r,i].join("-");var u={metadata:{},data:{}};for(var c in e)if(e.hasOwnProperty(c)){var l="_"===c[0];if(l&&!h[c])return s=f.error(f.DOC_VALIDATION),s.reason+=": "+c,s;l&&"_attachments"!==c?u.metadata[c.slice(1)]=e[c]:u.data[c]=e[c]}return u},n.isCordova=function(){return"undefined"!=typeof cordova||"undefined"!=typeof PhoneGap||"undefined"!=typeof phonegap},n.hasLocalStorage=function(){if(o())return!1;try{return r.localStorage}catch(e){return!1}},n.Changes=a,n.inherits(a,d),a.prototype.addListener=function(e,t,r,i){function o(){r.changes({include_docs:i.include_docs,conflicts:i.conflicts,continuous:!1,descending:!1,filter:i.filter,view:i.view,since:i.since,query_params:i.query_params,onChange:function(e){e.seq>i.since&&!i.cancelled&&(i.since=e.seq,n.call(i.onChange,e))}})}this.listeners[t]||(this.listeners[t]=o,this.on(e,o))},a.prototype.removeListener=function(e,t){t in this.listeners&&d.prototype.removeListener.call(this,e,this.listeners[t])},a.prototype.notifyLocalWindows=function(e){this.isChrome?chrome.storage.local.set({dbName:e}):this.hasLocal&&(localStorage[e]="a"===localStorage[e]?"b":"a")},a.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)},n.atob=t.browser&&"atob"in r?function(e){return atob(e)}:function(e){var t=new l(e,"base64");if(t.toString("base64")!==e)throw"Cannot base64 encode full string";return t.toString("binary")},n.btoa=t.browser&&"btoa"in r?function(e){return btoa(e)}:function(e){return new l(e,"binary").toString("base64")},n.fixBinary=function(e){if(!t.browser)return e;for(var n=e.length,r=new ArrayBuffer(n),i=new Uint8Array(r),o=0;n>o;o++)i[o]=e.charCodeAt(o);return r},n.once=function(e){var t=!1;return n.getArguments(function(n){if(t)throw"function"==typeof console.trace&&console.trace(),new Error("once called  more than once");t=!0,e.apply(this,n)})},n.toPromise=function(e){return n.getArguments(function(r){var i,o=this,a="function"==typeof r[r.length-1]?r.pop():!1;a&&(i=function(e,n){t.nextTick(function(){a(e,n)})});var s=new p(function(t,i){var a;try{var s=n.once(function(e,n){e?i(e):t(n)});r.push(s),a=e.apply(o,r),a&&"function"==typeof a.then&&t(a)}catch(u){i(u)}});return i&&s.then(function(e){i(null,e)},i),s.cancel=function(){return this},s})},n.adapterFun=function(e,t){return n.toPromise(n.getArguments(function(r){if(this._closed)return p.reject(new Error("database is closed"));var i=this;return this.taskqueue.isReady?t.apply(this,r):new n.Promise(function(t,n){i.taskqueue.addTask(function(o){o?n(o):t(i[e].apply(i,r))})})}))},n.arrayBufferToBinaryString=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;r>i;i++)t+=String.fromCharCode(n[i]);return t},n.cancellableFun=function(e,t,r){r=r?n.clone(!0,{},r):{};var i=new d,o=r.complete||function(){},a=r.complete=n.once(function(e,t){e?o(e):(i.emit("end",t),o(null,t)),i.removeAllListeners()}),s=r.onChange||function(){},u=0;t.on("destroyed",function(){i.removeAllListeners()}),r.onChange=function(e){s(e),e.seq<=u||(u=e.seq,i.emit("change",e),e.deleted?i.emit("delete",e):1===e.changes.length&&"1-"===e.changes[0].rev.slice(0,1)?i.emit("create",e):i.emit("update",e))};var c=new p(function(e,t){r.complete=function(n,r){n?t(n):e(r)}});return c.then(function(e){a(null,e)},a),c.cancel=function(){c.isCancelled=!0,t.taskqueue.isReady&&r.complete(null,{status:"cancelled"})},t.taskqueue.isReady?e(t,r,c):t.taskqueue.addTask(function(){c.isCancelled?r.complete(null,{status:"cancelled"}):e(t,r,c)}),c.on=i.on.bind(i),c.once=i.once.bind(i),c.addListener=i.addListener.bind(i),c.removeListener=i.removeListener.bind(i),c.removeAllListeners=i.removeAllListeners.bind(i),c.setMaxListeners=i.setMaxListeners.bind(i),c.listeners=i.listeners.bind(i),c.emit=i.emit.bind(i),c},n.Crypto={},n.MD5=n.Crypto.MD5=function(e){return t.browser?u(e):s.createHash("md5").update(e).digest("hex")}}).call(this,e("/Users/daleharvey/src/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./deps/ajax":8,"./deps/blob":9,"./deps/buffer":24,"./deps/errors":10,"./deps/uuid":12,"./merge":16,"/Users/daleharvey/src/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":26,argsarray:23,bluebird:32,crypto:24,events:25,inherits:27,"md5-jkmyers":46,"pouchdb-extend":47}],22:[function(e,t){t.exports="2.2.3"},{}],23:[function(e,t){function n(e){return function(){var t=arguments.length;if(t){for(var n=[],r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}return e.call(this,[])}}t.exports=n},{}],24:[function(){},{}],25:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length))throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),u=1;i>u;u++)s[u-1]=arguments[u];n.apply(this,s)}else if(o(n)){for(i=arguments.length,s=new Array(i-1),u=1;i>u;u++)s[u-1]=arguments[u];for(c=n.slice(),i=c.length,u=0;i>u;u++)c[u].apply(this,s)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var i;i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-->0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],26:[function(e,t){var n=t.exports={};n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],27:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],28:[function(e,t){function n(){}t.exports=n},{}],29:[function(e,t){var n=e("./promise"),r=e("./reject"),i=e("./resolve"),o=e("./INTERNAL"),a=e("./handlers"),s=r(new TypeError("must be an array"));t.exports=function(e){function t(e,t){function n(e){u[t]=e,++c===r&&a.resolve(f,u)}i(e).then(n,function(e){a.reject(f,e)})}if("[object Array]"!==Object.prototype.toString.call(e))return s;var r=e.length;if(!r)return i([]);for(var u=new Array(r),c=0,l=-1,f=new n(o);++l<r;)t(e[l],l);return f}},{"./INTERNAL":28,"./handlers":31,"./promise":33,"./reject":35,"./resolve":36}],30:[function(e,t){function n(e){var t=e&&e.then;return e&&"object"==typeof e&&"function"==typeof t?function(){t.apply(e,arguments)}:void 0}t.exports=n},{}],31:[function(e,t,n){var r=e("./tryCatch"),i=e("./getThen"),o=e("./resolveThenable"),a=e("./states");n.resolve=function(e,t){var s=r(i,t);if("error"===s.status)return n.reject(e,s.value);var u=s.value;if(u)o.safely(e,u);else{e.state=a.FULFILLED,e.outcome=t;for(var c=-1,l=e.queue.length;++c<l;)e.queue[c].callFulfilled(t)}return e},n.reject=function(e,t){e.state=a.REJECTED,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e}},{"./getThen":30,"./resolveThenable":37,"./states":38,"./tryCatch":39}],32:[function(e,t,n){t.exports=n=e("./promise"),n.resolve=e("./resolve"),n.reject=e("./reject"),n.all=e("./all")},{"./all":29,"./promise":33,"./reject":35,"./resolve":36}],33:[function(e,t){function n(e){if(!(this instanceof n))return new n(e);if("function"!=typeof e)throw new TypeError("reslover must be a function");this.state=a.PENDING,this.queue=[],e!==i&&o.safely(this,e)}var r=e("./unwrap"),i=e("./INTERNAL"),o=e("./resolveThenable"),a=e("./states"),s=e("./queueItem");t.exports=n,n.prototype["catch"]=function(e){return this.then(null,e)},n.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a.FULFILLED||"function"!=typeof t&&this.state===a.REJECTED)return this;var o=new n(i);if(this.state!==a.PENDING){var u=this.state===a.FULFILLED?e:t;r(o,u,this.outcome)}else this.queue.push(new s(o,e,t));return o}},{"./INTERNAL":28,"./queueItem":34,"./resolveThenable":37,"./states":38,"./unwrap":40}],34:[function(e,t){function n(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}var r=e("./handlers"),i=e("./unwrap");t.exports=n,n.prototype.callFulfilled=function(e){r.resolve(this.promise,e)},n.prototype.otherCallFulfilled=function(e){i(this.promise,this.onFulfilled,e)},n.prototype.callRejected=function(e){r.reject(this.promise,e)},n.prototype.otherCallRejected=function(e){i(this.promise,this.onRejected,e)}},{"./handlers":31,"./unwrap":40}],35:[function(e,t){function n(e){var t=new r(i);return o.reject(t,e)}var r=e("./promise"),i=e("./INTERNAL"),o=e("./handlers");t.exports=n},{"./INTERNAL":28,"./handlers":31,"./promise":33}],36:[function(e,t){function n(e){if(e)return e instanceof r?e:o.resolve(new r(i),e);var t=typeof e;switch(t){case"boolean":return a;case"undefined":return u;case"object":return s;case"number":return c;case"string":return l}}var r=e("./promise"),i=e("./INTERNAL"),o=e("./handlers");t.exports=n;var a=o.resolve(new r(i),!1),s=o.resolve(new r(i),null),u=o.resolve(new r(i),void 0),c=o.resolve(new r(i),0),l=o.resolve(new r(i),"")},{"./INTERNAL":28,"./handlers":31,"./promise":33}],37:[function(e,t,n){function r(e,t){function n(t){s||(s=!0,i.reject(e,t))}function r(t){s||(s=!0,i.resolve(e,t))}function a(){t(r,n)}var s=!1,u=o(a);"error"===u.status&&n(u.value)}var i=e("./handlers"),o=e("./tryCatch");n.safely=r},{"./handlers":31,"./tryCatch":39}],38:[function(e,t,n){n.REJECTED=["REJECTED"],n.FULFILLED=["FULFILLED"],n.PENDING=["PENDING"]},{}],39:[function(e,t){function n(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}t.exports=n},{}],40:[function(e,t){function n(e,t,n){r(function(){var r;try{r=t(n)}catch(o){return i.reject(e,o)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)})}var r=e("immediate"),i=e("./handlers");t.exports=n},{"./handlers":31,immediate:41}],41:[function(e,t){function n(){i=!0;for(var e,t,n=s.length;n;){for(t=s,s=[],e=-1;++e<n;)t[e]();n=s.length}i=!1}function r(e){1!==s.push(e)||i||o()}for(var i,o,a=[e("./nextTick"),e("./mutation.js"),e("./messageChannel"),e("./stateChange"),e("./timeout")],s=[],u=-1,c=a.length;++u<c;)if(a[u]&&a[u].test&&a[u].test()){o=a[u].install(n);break}t.exports=r},{"./messageChannel":42,"./mutation.js":43,"./nextTick":24,"./stateChange":44,"./timeout":45}],42:[function(e,t,n){(function(e){n.test=function(){return e.setImmediate?!1:"undefined"!=typeof e.MessageChannel},n.install=function(t){var n=new e.MessageChannel;return n.port1.onmessage=t,function(){n.port2.postMessage(0)}}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],43:[function(e,t,n){(function(e){var t=e.MutationObserver||e.WebKitMutationObserver;n.test=function(){return t},n.install=function(n){var r=0,i=new t(n),o=e.document.createTextNode("");return i.observe(o,{characterData:!0}),function(){o.data=r=++r%2}}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(e,t,n){(function(e){n.test=function(){return"document"in e&&"onreadystatechange"in e.document.createElement("script")},n.install=function(t){return function(){var n=e.document.createElement("script");return n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n),t}}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,n){n.test=function(){return!0},n.install=function(e){return function(){setTimeout(e,0)}}},{}],46:[function(e,t,n){!function(e,r){"function"==typeof define&&define.amd?define(r):"object"==typeof n?t.exports=r():e.md5=r()}(this,function(){function e(e,t){var a=e[0],s=e[1],u=e[2],c=e[3];a=n(a,s,u,c,t[0],7,-680876936),c=n(c,a,s,u,t[1],12,-389564586),u=n(u,c,a,s,t[2],17,606105819),s=n(s,u,c,a,t[3],22,-1044525330),a=n(a,s,u,c,t[4],7,-176418897),c=n(c,a,s,u,t[5],12,1200080426),u=n(u,c,a,s,t[6],17,-1473231341),s=n(s,u,c,a,t[7],22,-45705983),a=n(a,s,u,c,t[8],7,1770035416),c=n(c,a,s,u,t[9],12,-1958414417),u=n(u,c,a,s,t[10],17,-42063),s=n(s,u,c,a,t[11],22,-1990404162),a=n(a,s,u,c,t[12],7,1804603682),c=n(c,a,s,u,t[13],12,-40341101),u=n(u,c,a,s,t[14],17,-1502002290),s=n(s,u,c,a,t[15],22,1236535329),a=r(a,s,u,c,t[1],5,-165796510),c=r(c,a,s,u,t[6],9,-1069501632),u=r(u,c,a,s,t[11],14,643717713),s=r(s,u,c,a,t[0],20,-373897302),a=r(a,s,u,c,t[5],5,-701558691),c=r(c,a,s,u,t[10],9,38016083),u=r(u,c,a,s,t[15],14,-660478335),s=r(s,u,c,a,t[4],20,-405537848),a=r(a,s,u,c,t[9],5,568446438),c=r(c,a,s,u,t[14],9,-1019803690),u=r(u,c,a,s,t[3],14,-187363961),s=r(s,u,c,a,t[8],20,1163531501),a=r(a,s,u,c,t[13],5,-1444681467),c=r(c,a,s,u,t[2],9,-51403784),u=r(u,c,a,s,t[7],14,1735328473),s=r(s,u,c,a,t[12],20,-1926607734),a=i(a,s,u,c,t[5],4,-378558),c=i(c,a,s,u,t[8],11,-2022574463),u=i(u,c,a,s,t[11],16,1839030562),s=i(s,u,c,a,t[14],23,-35309556),a=i(a,s,u,c,t[1],4,-1530992060),c=i(c,a,s,u,t[4],11,1272893353),u=i(u,c,a,s,t[7],16,-155497632),s=i(s,u,c,a,t[10],23,-1094730640),a=i(a,s,u,c,t[13],4,681279174),c=i(c,a,s,u,t[0],11,-358537222),u=i(u,c,a,s,t[3],16,-722521979),s=i(s,u,c,a,t[6],23,76029189),a=i(a,s,u,c,t[9],4,-640364487),c=i(c,a,s,u,t[12],11,-421815835),u=i(u,c,a,s,t[15],16,530742520),s=i(s,u,c,a,t[2],23,-995338651),a=o(a,s,u,c,t[0],6,-198630844),c=o(c,a,s,u,t[7],10,1126891415),u=o(u,c,a,s,t[14],15,-1416354905),s=o(s,u,c,a,t[5],21,-57434055),a=o(a,s,u,c,t[12],6,1700485571),c=o(c,a,s,u,t[3],10,-1894986606),u=o(u,c,a,s,t[10],15,-1051523),s=o(s,u,c,a,t[1],21,-2054922799),a=o(a,s,u,c,t[8],6,1873313359),c=o(c,a,s,u,t[15],10,-30611744),u=o(u,c,a,s,t[6],15,-1560198380),s=o(s,u,c,a,t[13],21,1309151649),a=o(a,s,u,c,t[4],6,-145523070),c=o(c,a,s,u,t[11],10,-1120210379),u=o(u,c,a,s,t[2],15,718787259),s=o(s,u,c,a,t[9],21,-343485551),e[0]=f(a,e[0]),e[1]=f(s,e[1]),e[2]=f(u,e[2]),e[3]=f(c,e[3])}function t(e,t,n,r,i,o){return t=f(f(t,e),f(r,o)),f(t<<i|t>>>32-i,n)}function n(e,n,r,i,o,a,s){return t(n&r|~n&i,e,n,o,a,s)}function r(e,n,r,i,o,a,s){return t(n&i|r&~i,e,n,o,a,s)}function i(e,n,r,i,o,a,s){return t(n^r^i,e,n,o,a,s)}function o(e,n,r,i,o,a,s){return t(r^(n|~i),e,n,o,a,s)}function a(t){txt="";var n,r=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=t.length;n+=64)e(i,s(t.substring(n-64,n)));t=t.substring(n-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<t.length;n++)o[n>>2]|=t.charCodeAt(n)<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(e(i,o),n=0;16>n;n++)o[n]=0;return o[14]=8*r,e(i,o),i}function s(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function u(e){for(var t="",n=0;4>n;n++)t+=d[e>>8*n+4&15]+d[e>>8*n&15];return t}function c(e){for(var t=0;t<e.length;t++)e[t]=u(e[t]);return e.join("")}function l(e){return c(a(e))}function f(e,t){return e+t&4294967295}function f(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}var d="0123456789abcdef".split("");return"5d41402abc4b2a76b9719d911017c592"!=l("hello"),l})},{}],47:[function(e,t){function n(e){return null===e?String(e):"object"==typeof e||"function"==typeof e?s[f.call(e)]||"object":typeof e}function r(e){return null!==e&&e===e.window}function i(e){if(!e||"object"!==n(e)||e.nodeType||r(e))return!1;try{if(e.constructor&&!d.call(e,"constructor")&&!d.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}var i;for(i in e);return void 0===i||d.call(e,i)}function o(e){return"function"===n(e)}function a(){var e,t,n,r,s,u,c=arguments[0]||{},l=1,f=arguments.length,d=!1;for("boolean"==typeof c&&(d=c,c=arguments[1]||{},l=2),"object"==typeof c||o(c)||(c={}),f===l&&(c=this,--l);f>l;l++)if(null!=(e=arguments[l]))for(t in e)if(!(t in Object.prototype)){if(n=c[t],r=e[t],c===r)continue;d&&r&&(i(r)||(s=p(r)))?(s?(s=!1,u=n&&p(n)?n:[]):u=n&&i(n)?n:{},c[t]=a(d,u,r)):void 0!==r&&(p(e)&&o(r)||(c[t]=r))}return c}for(var s={},u=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],c=0;c<u.length;c++){var l=u[c];s["[object "+l+"]"]=l.toLowerCase()}var f=s.toString,d=s.hasOwnProperty,p=Array.isArray||function(e){return"array"===n(e)};t.exports=a},{}],48:[function(e,t){var n=e("./upsert"),r=e("./utils"),i=r.Promise;t.exports=function(e){var t=e.db,o=e.viewName,a=e.map,s=e.reduce,u=e.temporary,c=a.toString()+(s&&s.toString())+"undefined";if(!u&&t._cachedViews){var l=t._cachedViews[c];if(l)return i.resolve(l)}return t.info().then(function(e){function i(e){e.views=e.views||{};var t=o;-1===t.indexOf("/")&&(t=o+"/"+o);var n=e.views[t]=e.views[t]||{};if(!n[l])return n[l]=!0,e}var l=e.db_name+"-mrview-"+(u?"temp":r.MD5(c));return n(t,"_local/mrviews",i).then(function(){return t.registerDependentDatabase(l).then(function(e){var n=e.db;n.auto_compaction=!0;var r={name:l,db:n,sourceDB:t,adapter:t.adapter,mapFun:a,reduceFun:s};return r.db.get("_local/lastSeq")["catch"](function(e){if("not_found"!==e.name)throw e}).then(function(e){return r.seq=e?e.seq:0,u||(t._cachedViews=t._cachedViews||{},t._cachedViews[c]=r,r.db.on("destroyed",function(){delete t._cachedViews[c]})),r})})})})}},{"./upsert":55,"./utils":56}],49:[function(_dereq_,module,exports){module.exports=function(func,emit,sum,log,isArray,toJSON){return eval(" ("+func+");")}},{}],50:[function(e,t,n){function r(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function i(e,t,n){try{return{output:t.apply(null,n)}}catch(r){return e.emit("error",r),{error:r}}}function o(e,t){var n=x(e.key,t.key);return 0!==n?n:x(e.value,t.value)}function a(e,t,n){return n=n||0,"number"==typeof t?e.slice(n,t+n):n>0?e.slice(n):e}function s(e){var t=new Error("builtin "+e+" function requires map values to be numbers or number arrays");return t.name="invalid_value",t.status=500,t}function u(e){for(var t=0,n=0,r=e.length;r>n;n++){var i=e[n];if("number"!=typeof i){if(!Array.isArray(i))throw s("_sum");t="number"==typeof t?[t]:t;for(var o=0,a=i.length;a>o;o++){var u=i[o];if("number"!=typeof u)throw s("_sum");"undefined"==typeof t[o]?t.push(u):t[o]+=u}}else"number"==typeof t?t+=i:t[0]+=i}return t}function c(e,t,n,r){var i=t[e];"undefined"!=typeof i&&(r&&(i=encodeURIComponent(JSON.stringify(i))),n.push(e+"="+i))}function l(e,t){var n=e.descending?"endkey":"startkey",r=e.descending?"startkey":"endkey";if("undefined"!=typeof e[n]&&"undefined"!=typeof e[r]&&x(e[n],e[r])>0)throw new y("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&e.reduce!==!1){if(e.include_docs)throw new y("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new y("Multi-key fetches for reduce views must use {group: true}")}if(e.group_level){if("number"!=typeof e.group_level)throw new y('Invalid value for integer: "'+e.group_level+'"');if(e.group_level<0)throw new y('Invalid value for positive integer: "'+e.group_level+'"')}}function f(e,t,n){var i,o=[],a="GET";if(c("reduce",n,o),c("include_docs",n,o),c("limit",n,o),c("descending",n,o),c("group",n,o),c("group_level",n,o),c("skip",n,o),c("startkey",n,o,!0),c("endkey",n,o,!0),c("inclusive_end",n,o),c("key",n,o,!0),o=o.join("&"),o=""===o?"":"?"+o,"undefined"!=typeof n.keys){var s=2e3,u="keys="+encodeURIComponent(JSON.stringify(n.keys));u.length+o.length+1<=s?o+=("?"===o[0]?"&":"?")+u:(a="POST","string"==typeof t?i=JSON.stringify({keys:n.keys}):t.keys=n.keys)}if("string"==typeof t){var l=r(t);return e.request({method:a,url:"_design/"+l[0]+"/_view/"+l[1]+o,body:i})}return i=i||{},Object.keys(t).forEach(function(e){i[e]=Array.isArray(t[e])?t[e]:t[e].toString()}),e.request({method:"POST",url:"_temp_view"+o,body:i})}function d(e){return function(t){if("not_found"===t.name)return e;throw t}}function p(e,t,n){var r="_local/doc_"+e;return t.db.get(r)["catch"](d({_id:r,keys:[]})).then(function(r){return t.db.allDocs({keys:r.keys,include_docs:!0}).then(function(t){var i=t.rows.map(function(e){return e.doc}).filter(function(e){return e}),o=n[e],a={};i.forEach(function(e){a[e._id]=!0,e._deleted=!o[e._id],e._deleted||(e.value=o[e._id])});var s=Object.keys(o);return s.forEach(function(e){a[e]||i.push({_id:e,value:o[e]})}),r.keys=k.uniq(s.concat(r.keys)),i.splice(0,0,r),i})})}function h(e,t,n){var r="_local/lastSeq";return e.db.get(r)["catch"](d({_id:r,seq:0})).then(function(r){var i=Object.keys(t);return A.all(i.map(function(n){return p(n,e,t)})).then(function(t){var i=[];return t.forEach(function(e){i=i.concat(e)}),r.seq=n,i.push(r),e.db.bulkDocs({docs:i})})})}function v(e,t,n){0===n.group_level&&delete n.group_level;var r,o=n.group||n.group_level;r=N[e.reduceFun]?N[e.reduceFun]:T(e.reduceFun.toString(),null,u,b,Array.isArray,JSON.parse);var s=[],c=n.group_level;t.forEach(function(e){var t=s[s.length-1],n=o?e.key:null;return o&&Array.isArray(n)&&"number"==typeof c&&(n=n.length>c?n.slice(0,c):n),t&&0===x(t.key[0][0],n)?(t.key.push([n,e.id]),void t.value.push(e.value)):void s.push({key:[[n,e.id]],value:[e.value]})});for(var l=0,f=s.length;f>l;l++){var d=s[l],p=i(e.sourceDB,r,[d.key,d.value,!1]);d.value=p.error?null:p.output,d.key=d.key[0][0]}return{rows:a(s,n.limit,n.skip)}}function g(e){return e.request({method:"POST",url:"_view_cleanup"})}function m(e,t,n){if("http"===e.type())return f(e,t,n);
if("string"!=typeof t){l(n,t);var i={db:e,viewName:"temp_view/temp_view",map:t.map,reduce:t.reduce,temporary:!0};return O.add(function(){return E(i).then(function(e){function t(){return e.db.destroy()}return k.fin(D(e).then(function(){return R(e,n)}),t)})}),O.finish()}var o=t,a=r(o),s=a[0],u=a[1];return e.get("_design/"+s).then(function(t){var r=t.views&&t.views[u];if(!r||"string"!=typeof r.map){var i=new Error("ddoc "+s+" has no view named "+u);throw i.name="not_found",i.status=400,i}l(n,r);var a={db:e,viewName:o,map:r.map,reduce:r.reduce};return E(a).then(function(e){return"ok"===n.stale||"update_after"===n.stale?("update_after"===n.stale&&D(e),R(e,n)):D(e).then(function(){return R(e,n)})})})}function y(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,y)}catch(t){}}var b,w=e("pouchdb-collate"),_=e("./taskqueue"),x=w.collate,$=w.toIndexableString,S=w.normalizeKey,E=e("./create-view"),T=e("./evalfunc");b="undefined"!=typeof console&&"function"==typeof console.log?Function.prototype.bind.call(console.log,console):function(){};var k=e("./utils"),A=k.Promise,C=new _,O=new _,j=50,N={_sum:function(e,t){return u(t)},_count:function(e,t){return t.length},_stats:function(e,t){function n(e){for(var t=0,n=0,r=e.length;r>n;n++){var i=e[n];t+=i*i}return t}return{sum:u(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:n(t)}}},D=k.sequentialize(C,function(e){function t(e,t){r.push({id:a._id,key:S(e),value:S(t)})}function n(t,n){return function(){return h(e,t,n)}}var r,a,s;if("function"==typeof e.mapFun&&2===e.mapFun.length){var c=e.mapFun;s=function(e){return c(e,t)}}else s=T(e.mapFun.toString(),t,u,b,Array.isArray,JSON.parse);var l=e.seq||0,f=new _;return new A(function(t,u){function c(){f.finish().then(function(){e.seq=l,t()})}function d(){function t(e){u(e)}e.sourceDB.changes({conflicts:!0,include_docs:!0,since:l,limit:j}).on("complete",function(t){var u=t.results;if(!u.length)return c();for(var p={},h=0,v=u.length;v>h;h++){var g=u[h];if("_"!==g.doc._id[0]){r=[],a=g.doc,a._deleted||i(e.sourceDB,s,[a]),r.sort(o);for(var m={},y=0,b=r.length;b>y;y++){var w=r[y],_=$([w.key,w.id,y]);m[_]=w}p[g.doc._id]=m}l=g.seq}return f.add(n(p,l)),u.length<j?c():d()}).on("error",t)}d()})}),R=k.sequentialize(C,function(e,t){function n(t){return t.include_docs=!0,e.db.allDocs(t).then(function(e){return i=e.total_rows,e.rows.map(function(e){return e.doc.value})})}function r(n){var r;if(r=o?v(e,n,t):{total_rows:i,offset:a,rows:n},t.include_docs){var s=n.map(function(t){var n=t.value,r=n&&"object"==typeof n&&n._id||t.id;return e.sourceDB.get(r).then(function(e){t.doc=e},function(){})});return A.all(s).then(function(){return r})}return r}var i,o=e.reduceFun&&t.reduce!==!1,a=t.skip||0;"undefined"==typeof t.keys||t.keys.length||(t.limit=0,delete t.keys);var s=function(e){return e.reduce(function(e,t){return e.concat(t)})};if("undefined"!=typeof t.keys){var u=t.keys,c=u.map(function(e){var t={startkey:$([e]),endkey:$([e,{}])};return n(t)});return A.all(c).then(s).then(r)}var l={descending:t.descending};if("undefined"!=typeof t.startkey&&(l.startkey=$(t.descending?[t.startkey,{}]:[t.startkey])),"undefined"!=typeof t.endkey){var f=t.inclusive_end!==!1;t.descending&&(f=!f),l.endkey=$(f?[t.endkey,{}]:[t.endkey])}if("undefined"!=typeof t.key){var d=$([t.key]),p=$([t.key,{}]);l.descending?(l.endkey=d,l.startkey=p):(l.startkey=d,l.endkey=p)}return o||("number"==typeof t.limit&&(l.limit=t.limit),l.skip=a),n(l).then(r)}),q=k.sequentialize(C,function(e){return e.get("_local/mrviews").then(function(t){var n={};Object.keys(t.views).forEach(function(e){var t=r(e),i="_design/"+t[0],o=t[1];n[i]=n[i]||{},n[i][o]=!0});var i={keys:Object.keys(n),include_docs:!0};return e.allDocs(i).then(function(r){var i={};r.rows.forEach(function(e){var r=e.key.substring(8);Object.keys(n[e.key]).forEach(function(n){var o=r+"/"+n;t.views[o]||(o=n);var a=Object.keys(t.views[o]),s=e.doc&&e.doc.views&&e.doc.views[n];a.forEach(function(e){i[e]=i[e]||s})})});var o=Object.keys(i).filter(function(e){return!i[e]}),a=o.map(function(t){return e.constructor.destroy(t,{adapter:e.adapter})});return A.all(a).then(function(){return{ok:!0}})})},d({ok:!0}))});n.viewCleanup=k.callbackify(function(){var e=this;return"http"===e.type()?g(e):q(e)}),n.query=function(e,t,n){"function"==typeof t&&(n=t,t={}),t=k.extend({},t),"function"==typeof e&&(e={map:e});var r=this,i=A.resolve().then(function(){return m(r,e,t)});return k.promisedCallback(i,n),i},k.inherits(y,Error)},{"./create-view":48,"./evalfunc":49,"./taskqueue":54,"./utils":56,"pouchdb-collate":52}],51:[function(e,t){function n(e){if(!e||"[object Object]"!==i.call(e)||e.nodeType||e.setInterval)return!1;var t=r.call(e,"constructor"),n=r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!n)return!1;var o;for(o in e);return void 0===o||r.call(e,o)}var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString;t.exports=function o(){var e,t,r,i,a,s,u=arguments[0]||{},c=1,l=arguments.length,f=!1;for("boolean"==typeof u&&(f=u,u=arguments[1]||{},c=2),"object"!=typeof u&&"function"!=typeof u&&(u={});l>c;c++)if(null!=(e=arguments[c]))for(t in e)r=u[t],i=e[t],u!==i&&(f&&i&&(n(i)||(a=Array.isArray(i)))?(a?(a=!1,s=r&&Array.isArray(r)?r:[]):s=r&&n(r)?r:{},u[t]=o(f,s,i)):void 0!==i&&(u[t]=i));return u}},{}],52:[function(e,t,n){function r(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return u(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),r=t?e:Object.keys(e),i=-1,o=r.length,a="";if(t)for(;++i<o;)a+=n.toIndexableString(r[i]);else for(;++i<o;){var s=r[i];a+=n.toIndexableString(s)+n.toIndexableString(e[s])}return a}return""}function i(e,t){for(var r=Math.min(e.length,t.length),i=0;r>i;i++){var o=n.collate(e[i],t[i]);if(0!==o)return o}return e.length===t.length?0:e.length>t.length?1:-1}function o(e,t){return e===t?0:e>t?1:-1}function a(e,t){for(var r=Object.keys(e),i=Object.keys(t),o=Math.min(r.length,i.length),a=0;o>a;a++){var s=n.collate(r[a],i[a]);if(0!==s)return s;if(s=n.collate(e[r[a]],t[i[a]]),0!==s)return s}return r.length===i.length?0:r.length>i.length?1:-1}function s(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);return~n?null===e?1:Array.isArray(e)?5:3>n?n+2:n+3:Array.isArray(e)?5:void 0}function u(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=0>e,i=r?"0":"2",o=(r?-n:n)-c,a=d.padLeft(o.toString(),"0",l);i+=f+a;var s=Math.abs(parseFloat(t[0]));r&&(s=10-s);var u=s.toFixed(20);return u=u.replace(/\.?0+$/,""),i+=f+u}var c=-324,l=3,f="",d=e("./utils");n.collate=function(e,t){if(e===t)return 0;e=n.normalizeKey(e),t=n.normalizeKey(t);var r=s(e),u=s(t);if(r-u!==0)return r-u;if(null===e)return 0;switch(typeof e){case"number":return e-t;case"boolean":return e===t?0:t>e?-1:1;case"string":return o(e,t)}return Array.isArray(e)?i(e,t):a(e,t)},n.normalizeKey=function(e){switch(typeof e){case"undefined":return null;case"number":return 1/0===e||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var r=e.length;e=new Array(r);for(var i=0;r>i;i++)e[i]=n.normalizeKey(t[i])}else{if(e instanceof Date)return e.toJSON();if(null!==e){e={};for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];"undefined"!=typeof a&&(e[o]=n.normalizeKey(a))}}}}return e},n.toIndexableString=function(e){var t="\x00";return e=n.normalizeKey(e),s(e)+f+r(e)+t}},{"./utils":53}],53:[function(e,t,n){function r(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}n.padLeft=function(e,t,n){var i=r(e,t,n);return i+e},n.padRight=function(e,t,n){var i=r(e,t,n);return e+i},n.stringLexCompare=function(e,t){var n,r=e.length,i=t.length;for(n=0;r>n;n++){if(n===i)return 1;var o=e.charAt(n),a=t.charAt(n);if(o!==a)return a>o?-1:1}return i>r?-1:0},n.intToDecimalForm=function(e){var t=0>e,n="";do{var r=t?-Math.ceil(e%10):Math.floor(e%10);n=r+n,e=t?Math.ceil(e/10):Math.floor(e/10)}while(e);return t&&"0"!==n&&(n="-"+n),n}},{}],54:[function(e,t){function n(){this.promise=new r(function(e){e()})}var r=e("./utils").Promise;n.prototype.add=function(e){return this.promise=this.promise["catch"](function(){}).then(function(){return e()}),this.promise},n.prototype.finish=function(){return this.promise},t.exports=n},{"./utils":56}],55:[function(e,t){function n(e,t,n){return new i(function(i,o){return t&&"object"==typeof t&&(t=t._id),"string"!=typeof t?o(new Error("doc id is required")):void e.get(t,function(a,s){if(a)return"not_found"!==a.name?o(a):i(r(e,n({_id:t}),n));var u=n(s);return u?void i(r(e,u,n)):i(s)})})}function r(e,t,r){return e.put(t)["catch"](function(i){if("conflict"!==i.name)throw i;return n(e,t,r)})}var i=e("./utils").Promise;t.exports=n},{"./utils":56}],56:[function(e,t,n){(function(t,r){n.Promise="function"==typeof r.Promise?r.Promise:e("lie"),n.uniq=function(e){var t={};return e.forEach(function(e){t[e]=!0}),Object.keys(t)},n.inherits=e("inherits"),n.extend=e("extend");var i=e("argsarray");n.promisedCallback=function(e,n){return n&&e.then(function(e){t.nextTick(function(){n(null,e)})},function(e){t.nextTick(function(){n(e)})}),e},n.callbackify=function(e){return i(function(t){var r=t.pop(),i=e.apply(this,t);return"function"==typeof r&&n.promisedCallback(i,r),i})},n.fin=function(e,t){return e.then(function(e){var n=t();return"function"==typeof n.then?n.then(function(){return e}):e},function(e){var n=t();if("function"==typeof n.then)return n.then(function(){throw e});throw e})},n.sequentialize=function(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}};var o=e("crypto"),a=e("md5-jkmyers");n.MD5=function(e){return t.browser?a(e):o.createHash("md5").update(e).digest("hex")}}).call(this,e("/Users/daleharvey/src/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/Users/daleharvey/src/pouchdb/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":26,argsarray:23,crypto:24,extend:51,inherits:27,lie:32,"md5-jkmyers":46}]},{},[15])(15)}),define("laxar/lib/logging/level",{DEVELOP:0,DATA:1,TRACE:2,DEBUG:3,INFO:4,WARN:5,ERROR:6,FATAL:7,STATISTICS:8,ACCOUNT:9,AUDIT:10}),define("laxar/lib/utilities/assert",[],function(){function e(e,t){this.subject_=e,this.details_=t||null}function t(e,t){throw t&&(e+=" Details: "+("object"==typeof t?JSON.stringify(t):t)),new Error("Assertion error: "+e)}function n(e,t){if("object"==typeof e)return e instanceof t;var n=o[typeof e];return n===t}function r(e){var t=a.exec(e.toString());return t[1].length?t[1]:"anonymous"}function i(t,n){return new e(t,n)}e.prototype.isNotNull=function(e){return("undefined"==typeof this.subject_||null===this.subject_)&&t("Expected value to be defined and not null.",e||this.details_),this},e.prototype.hasType=function(e,i){if("undefined"==typeof this.subject_||null===this.subject_)return this;if("function"!=typeof e&&t("type must be a constructor function. Got "+typeof e+"."),!n(this.subject_,e)){var o=r(this.subject_.constructor),a=r(e);t('Expected value to be an instance of "'+a+'" but was "'+o+'".',i||this.details_)}return this},e.prototype.hasProperty=function(e,n){return"object"!=typeof this.subject_&&t("value must be an object. Got "+typeof this.subject_+"."),e in this.subject_||t('value is missing mandatory property "'+e+'".',n||this.details_),this};var o={string:String,number:Number,"boolean":Boolean,"function":Function},a=/^[\s]*function ([^\(]*)\(/i;return i.codeIsUnreachable=function(e){t("Code should be unreachable!",e)},i.state=function(e,n){e||t("State does not hold.",n)},i}),define("laxar/lib/logging/log_context",["../utilities/assert"],function(e){function t(){this.scopes_=[],this.enterScope()}return t.prototype.enterScope=function(){this.scopes_.push({tags:{}})},t.prototype.leaveScope=function(){e.state(this.scopes_.length>1,"Cannot leave the root scope."),this.scopes_.pop()},t.prototype.addTag=function(t,n){e(t).hasType(String).isNotNull();var r=this.scopes_[this.scopes_.length-1].tags;r[t]?r[t]+=";"+n:r[t]=n},t.prototype.setTag=function(t,n){e(t).hasType(String).isNotNull(),this.scopes_[this.scopes_.length-1].tags[t]=n},t.prototype.gatherTags=function(){return this.scopes_.reduce(function(e,t){return Object.keys(t.tags).forEach(function(n){var r=t.tags[n];e[n]?e[n]+=";"+r:e[n]=r}),e},{})},{create:function(){return new t}}}),define("laxar/lib/utilities/object",[],function(e){function t(){return l(d.call(arguments,0),function(e,t,n){e[n]=t[n]})}function n(e,n){return t({},n,e)}function r(e,t){var n={};for(var r in e)if(f(e,r)){var i=t(e[r],r,e);n[i[0]]=i[1]}return n}function i(e,t){if(Array.isArray(e))return void e.forEach(t);for(var n in e)f(e,n)&&t(e[n],n,e)}function o(t,n,r){for(var i=3===arguments.length?r:e,o=n.split("."),a=t,s=o.shift();s;){if(!a||"object"!=typeof a||!f(a,s))return i;a=a[s],s=o.shift()}return a}function a(e,t,n){var r=e,i=t.split("."),o=i.pop();return i.forEach(function(e,t){if(!r[e]||"object"!=typeof r[e]){var n=i[t+1]||o;n.match(/^[0-9]+$/)?(r[e]=[],c(r[e],parseInt(n,10))):r[e]={}}r=r[e]}),Array.isArray(r)&&o>r.length&&c(r,o),r[o]=n,e}function s(e){if(!e||"object"!=typeof e)return e;var t;if(Array.isArray(e)){t=[];for(var n=0,r=e.length;r>n;++n)t[n]=s(e[n])}else{t={};for(var i in e)f(e,i)&&(t[i]=s(e[i]))}return t}function u(e,t){return Object.isFrozen(e)?e:(t&&(e=r(e,function(e,t){return"object"==typeof e?[t,u(e,!0)]:[t,e]})),Object.freeze(e))}function c(e,t){for(var n=e.length;t>n;++n)e[n]=null}function l(e,t){var n=e[0];return e.slice(1).forEach(function(e){if(e)for(var r in e)f(e,r)&&t(n,e,r)}),n}function f(e,t){return p.call(e,t)}var d=Array.prototype.slice,p=Object.prototype.hasOwnProperty;return{extend:t,options:n,map:r,forEach:i,path:o,setPath:a,deepClone:s,deepFreeze:"function"==typeof Object.freeze?u:function(e){return e}}}),define("laxar/lib/logging/logger",["./level","./log_context","../utilities/assert","../utilities/object"],function(e,t,n,r){function i(e){this.options_=e,this.channels_=[],this.counter_=0,this.messageQueue_=[],this.threshold_=0,this.context=t.create()}function o(){var e=new Error;if(!e.stack)return l;var t,n=e.stack.split(/[\n]/);if("Error"===n[0])n.splice(0,1),t=function(e){var t=u.exec(e);return{file:t?t[1]:"?",line:t?t[2]:-1,"char":t?t[3]:-1}};else{if(-1===n[0].indexOf("@"))return l;t=function(e){var t=c.exec(e);return{file:t?t[1]:"?",line:t?t[2]:-1,"char":-1}}}for(var r=0;r<n.length;++r){var i=t(n[r]);if(-1===i.file.indexOf("/logging/logger.js"))return i}return l}var a=Array.prototype.slice,s=[];Object.keys(e).forEach(function(t){s[e[t]]=t}),i.prototype.context=null,i.prototype.log=function(e,t){if(!(e<this.threshold_)){var n={id:this.counter_++,level:s[e],text:t,replacements:a.call(arguments,2)||[],time:new Date,tags:this.context.gatherTags(),sourceInfo:o()};this.channels_.forEach(function(e){e(n)}),this.messageQueue_.length===this.options_.queueSize&&this.messageQueue_.shift(),this.messageQueue_.push(n)}},i.prototype.develop=function(){},i.prototype.data=function(){},i.prototype.trace=function(){},i.prototype.debug=function(){},i.prototype.info=function(){},i.prototype.warn=function(){},i.prototype.error=function(){},i.prototype.fatal=function(){},i.prototype.statistics=function(){},i.prototype.account=function(){},i.prototype.audit=function(){},Object.keys(e).forEach(function(t){i.prototype[t.toLowerCase()]=function(){var n=[e[t]].concat(a.call(arguments,0));return this.log.apply(this,n)}}),i.prototype.addLogChannel=function(e){this.channels_.push(e),this.messageQueue_.forEach(function(t){e(t)})},i.prototype.removeLogChannel=function(e){var t=this.channels_.indexOf(e);t>-1&&this.channels_.splice(t,1)},i.prototype.setLogThreshold=function(t){"string"==typeof t&&(n.state(t.toUpperCase()in e,'Unsupported log threshold "'+t+'".'),t=e[t.toUpperCase()]),n.state(t>-1&&t<Object.keys(e).length,"Unsupported log threshold "+t+"."),this.threshold_=t};var u=/\(?([^\( ]+\.js)\:(\d+)\:(\d+)\)?$/,c=/@(.+)\:(\d+)$/,l={file:"?",line:-1,"char":-1};return{create:function(e){return new i(r.options(e,{queueSize:100}))}}}),define("laxar/lib/logging/channels/console_logger",[],function(){function e(e){var r=window.console;if(r){var i=e.level.toLowerCase();if(i in r&&"trace"!==i||(i="log"),i in r){var o=[e.level+": "];o=o.concat(n(e.text,e.replacements)),o.push("(@ "+e.sourceInfo.file+":"+e.sourceInfo.line+")"),t(r,i,o)}}}function t(e,t,n){Function.apply.apply(e[t],[e,n])}function n(e,t){for(var n,r=0,i="",o=[];r<e.length;){switch(n=e.charAt(r)){case"\\":if(++r,r===e.length)throw new Error('Unterminated string: "'+e+'"');i+=e.charAt(r);break;case"[":o.push(i),i="";var a=e.indexOf("]",r);if(-1===a)throw new Error("Unterminated replacement at character "+r+': "'+e+'"');var s=parseInt(e.substring(r+1,a),10);o.push(t[s]),r=a;break;default:i+=n}++r}return i.length>0&&o.push(i),o}return e}),define("laxar/lib/logging/log",["./level","./logger","./channels/console_logger"],function(e,t,n){var r=t.create();return r.level=e,r.channels={console:n},r}),define("laxar/lib/directives/id/id",["angular","../../utilities/assert"],function(e,t){var n=e.module("laxar.directives.id",[]),r="axId";n.directive(r,[function(){return{restrict:"A",link:function(e,n,i){var o=e.$eval(i[r]);t.state(o,"directive axId needs a non-empty local id, e.g. ax-id=\"'myLocalId'\"."),n.attr("id",e.id(o))}}}]);var i="axFor";return n.directive(i,[function(){return{restrict:"A",link:function(e,n,r){var o=e.$eval(r[i]);t.state(o,"directive axFor needs a non-empty local id, e.g. ax-for=\"'myLocalId'\"."),n.attr("for",e.id(o))}}}]),n}),define("laxar/lib/directives/layout/layout",["angular","../../logging/log"],function(e,t){var n=e.module("laxar.directives.layout",[]),r="axLayout";return n.directive(r,["LayoutLoader","$compile",function(e,n){return{restrict:"A",link:function(i,o,a){var s=i.$eval(a[r]);e.load(s).then(function(e){o.html(e.htmlContent),o.addClass(e.className),n(o.contents())(i)},function(e){t.error("axLayout: could not load layout [0], error: [1]",s,e)})}}}]),n}),define("laxar/lib/utilities/string",[],function(){function e(e,t,n){return e=n?e.toLowerCase():e,t=n?t.toLowerCase():t,-1!==e.indexOf(t,e.length-t.length)}function t(e,t){var n=e.toLowerCase().replace(/([_]+)([a-z])/g,function(e,t,n,r){var i=r>0?t.substr(1):t;return i+n.toUpperCase()});return t===!0?(n=n.replace(/_*/g,""),n.charAt(0).toLowerCase()+n.slice(1)):n}function n(e){return e.replace(/_+([a-z])/g,function(e,t,n){return n>0?t.toUpperCase():t}).replace(/_/g,"")}function r(e){return"string"!=typeof e||e.length<1?e:e.charAt(0).toUpperCase()+e.slice(1)}function i(e,t,n){return u(e,t,n)}function o(e,t){function n(t,n,i){if("string"!=typeof t)return a(e)(t);var o=Array.isArray(n)?n:[],s={};i?s=i||{}:Array.isArray(n)||(s=n||{});for(var u=t.split(""),d="",p=0,h=u.length;h>p;++p)if(u[p]===c){if(p+1===h)throw new Error("Unterminated escaping sequence at index "+p+' of string: "'+t+'".');d+=u[++p]}else if(u[p]===l){var v=t.indexOf(f,p+1);if(-1===v)throw new Error("Unterminated placeholder at index "+p+' of string: "'+t+'".');var g=t.substring(p+1,v);d+=r(g,s,o,{string:t,index:p}),p=v}else d+=u[p];return d}function r(n,r,i,o){var s,u="",c="",p=n.split(":"),h=p[0];if(d.test(h)&&h<i.length)s=i[h];else{if(!(h in r))return l+n+f;s=r[h]}return p.length>1?("%"!==p[1].charAt(0)&&(s=a(e)(s)),p.slice(1).reduce(function(n,r){if(0===r.indexOf("%")){var i=r.match(/^%(.*)(\w)$/);if(u=i?i[2]:"",c=i?i[1]:"",u in e)return e[u](n,c);var a=Object.keys(e).filter(function(e){return"default"!==e}).map(function(e){return"%"+e}).join(", ");throw new Error('Unknown format specifier "%'+u+'" for placeholder at index '+o.index+' of string: "'+o.string+'" (Known specifiers are: '+a+").")}return r in t?t[r](n):n},s)):a(e)(s)}return e||(e=s),t||(t={}),n}function a(e){return"default"in e?e["default"]:s["default"]}var s={s:function(e){return""+e},d:function(e){return e.toFixed(0)},i:function(e,t){return s.d(e,t)},f:function(e,t){var n=t.match(/^\.(\d)$/);return n?e.toFixed(n[1]):""+e},o:function(e){return JSON.stringify(e)},"default":function(e,t){return s.s(e,t)}};"function"==typeof Object.freeze&&Object.freeze(s);var u=o(s),c="\\",l="[",f="]",d=/^[0-9]+$/;return{endsWith:e,upperCaseToCamelCase:t,removeUnderscoresFromCamelCase:n,capitalize:r,format:i,createFormatter:o,DEFAULT_FORMATTERS:s}}),define("laxar/lib/directives/widget_area/widget_area",["angular","../../utilities/string"],function(e,t){var n=e.module("laxar.directives.widget_area",[]),r="axWidgetArea";return n.directive(r,["axPageService",function(e){return{restrict:"A",link:function(n,i,o){var a=n.widget&&n.widget.id,s=o[r];if(!s){if(!o[r+"Binding"]){var u="axWidgetArea: area at at [0] has neither a name nor a binding assigned.",c=a||n.layoutClass;throw new Error(t.format(u,[c]))}s=n.$eval(o[r+"Binding"])}a&&(s=a+"."+s);var l=e.controllerForScope(n).areas,f=l.register(s,i[0]);n.$on("$destroy",f)}}}]),n}),define("laxar/lib/directives/page_fade/page_fade",["angular"],function(e){var t=e.module("laxar.directives.page_fade",[]),n="axPageFade",r=["$timeout","EventBus",function(e,t){return function(n,r){t.subscribe("didNavigate",function(){e(function(){r.fadeOut("fast")},100)}),t.subscribe("endLifecycleRequest",function(){r.css("display","block")})}}];return t.directive(n,r),t}),define("laxar/lib/directives/directives",["./id/id","./layout/layout","./widget_area/widget_area","./page_fade/page_fade"],function(e,t,n,r){return{id:e,layout:t,widgetArea:n,pageFade:r}}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,o=Function.prototype,a=r.push,s=r.slice,u=r.concat,c=i.toString,l=i.hasOwnProperty,f=r.forEach,d=r.map,p=r.reduce,h=r.reduceRight,v=r.filter,g=r.every,m=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,_=Object.keys,x=o.bind,$=function(e){return e instanceof $?e:this instanceof $?void(this._wrapped=e):new $(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=$),exports._=$):e._=$,$.VERSION="1.5.2";var S=$.each=$.forEach=function(e,t,r){if(null!=e)if(f&&e.forEach===f)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,o=e.length;o>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var a=$.keys(e),i=0,o=a.length;o>i;i++)if(t.call(r,e[a[i]],a[i],e)===n)return};$.map=$.collect=function(e,t,n){var r=[];return null==e?r:d&&e.map===d?e.map(t,n):(S(e,function(e,i,o){r.push(t.call(n,e,i,o))}),r)};var E="Reduce of empty array with no initial value";$.reduce=$.foldl=$.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=$.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(S(e,function(e,o,a){i?n=t.call(r,n,e,o,a):(n=e,i=!0)}),!i)throw new TypeError(E);return n},$.reduceRight=$.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),h&&e.reduceRight===h)return r&&(t=$.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var a=$.keys(e);o=a.length}if(S(e,function(s,u,c){u=a?a[--o]:--o,i?n=t.call(r,n,e[u],u,c):(n=e[u],i=!0)}),!i)throw new TypeError(E);return n},$.find=$.detect=function(e,t,n){var r;return T(e,function(e,i,o){return t.call(n,e,i,o)?(r=e,!0):void 0}),r},$.filter=$.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(S(e,function(e,i,o){t.call(n,e,i,o)&&r.push(e)}),r)},$.reject=function(e,t,n){return $.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},$.every=$.all=function(e,t,r){t||(t=$.identity);var i=!0;return null==e?i:g&&e.every===g?e.every(t,r):(S(e,function(e,o,a){return(i=i&&t.call(r,e,o,a))?void 0:n}),!!i)};var T=$.some=$.any=function(e,t,r){t||(t=$.identity);var i=!1;return null==e?i:m&&e.some===m?e.some(t,r):(S(e,function(e,o,a){return i||(i=t.call(r,e,o,a))?n:void 0}),!!i)};$.contains=$.include=function(e,t){return null==e?!1:y&&e.indexOf===y?-1!=e.indexOf(t):T(e,function(e){return e===t})},$.invoke=function(e,t){var n=s.call(arguments,2),r=$.isFunction(t);return $.map(e,function(e){return(r?t:e[t]).apply(e,n)})},$.pluck=function(e,t){return $.map(e,function(e){return e[t]})},$.where=function(e,t,n){return $.isEmpty(t)?n?void 0:[]:$[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},$.findWhere=function(e,t){return $.where(e,t,!0)},$.max=function(e,t,n){if(!t&&$.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&$.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return S(e,function(e,i,o){var a=t?t.call(n,e,i,o):e;a>r.computed&&(r={value:e,computed:a})}),r.value},$.min=function(e,t,n){if(!t&&$.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&$.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return S(e,function(e,i,o){var a=t?t.call(n,e,i,o):e;a<r.computed&&(r={value:e,computed:a})}),r.value},$.shuffle=function(e){var t,n=0,r=[];return S(e,function(e){t=$.random(n++),r[n-1]=r[t],r[t]=e}),r},$.sample=function(e,t,n){return arguments.length<2||n?e[$.random(e.length-1)]:$.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return $.isFunction(e)?e:function(t){return t[e]}};$.sortBy=function(e,t,n){var r=k(t);return $.pluck($.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var A=function(e){return function(t,n,r){var i={},o=null==n?$.identity:k(n);return S(t,function(n,a){var s=o.call(r,n,a,t);e(i,s,n)}),i}};$.groupBy=A(function(e,t,n){($.has(e,t)?e[t]:e[t]=[]).push(n)}),$.indexBy=A(function(e,t,n){e[t]=n}),$.countBy=A(function(e,t){$.has(e,t)?e[t]++:e[t]=1}),$.sortedIndex=function(e,t,n,r){n=null==n?$.identity:k(n);for(var i=n.call(r,t),o=0,a=e.length;a>o;){var s=o+a>>>1;n.call(r,e[s])<i?o=s+1:a=s}return o},$.toArray=function(e){return e?$.isArray(e)?s.call(e):e.length===+e.length?$.map(e,$.identity):$.values(e):[]},$.size=function(e){return null==e?0:e.length===+e.length?e.length:$.keys(e).length},$.first=$.head=$.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:s.call(e,0,t)},$.initial=function(e,t,n){return s.call(e,0,e.length-(null==t||n?1:t))},$.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},$.rest=$.tail=$.drop=function(e,t,n){return s.call(e,null==t||n?1:t)},$.compact=function(e){return $.filter(e,$.identity)};var C=function(e,t,n){return t&&$.every(e,$.isArray)?u.apply(n,e):(S(e,function(e){$.isArray(e)||$.isArguments(e)?t?a.apply(n,e):C(e,t,n):n.push(e)}),n)};$.flatten=function(e,t){return C(e,t,[])},$.without=function(e){return $.difference(e,s.call(arguments,1))},$.uniq=$.unique=function(e,t,n,r){$.isFunction(t)&&(r=n,n=t,t=!1);var i=n?$.map(e,n,r):e,o=[],a=[];return S(i,function(n,r){(t?r&&a[a.length-1]===n:$.contains(a,n))||(a.push(n),o.push(e[r]))}),o},$.union=function(){return $.uniq($.flatten(arguments,!0))},$.intersection=function(e){var t=s.call(arguments,1);return $.filter($.uniq(e),function(e){return $.every(t,function(t){return $.indexOf(t,e)>=0})})},$.difference=function(e){var t=u.apply(r,s.call(arguments,1));return $.filter(e,function(e){return!$.contains(t,e)})},$.zip=function(){for(var e=$.max($.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=$.pluck(arguments,""+n);return t},$.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},$.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=$.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},$.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},$.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,o=new Array(r);r>i;)o[i++]=e,e+=n;return o};var O=function(){};$.bind=function(e,t){var n,r;if(x&&e.bind===x)return x.apply(e,s.call(arguments,1));if(!$.isFunction(e))throw new TypeError;return n=s.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(s.call(arguments)));O.prototype=e.prototype;var i=new O;O.prototype=null;var o=e.apply(i,n.concat(s.call(arguments)));return Object(o)===o?o:i}},$.partial=function(e){var t=s.call(arguments,1);return function(){return e.apply(this,t.concat(s.call(arguments)))}},$.bindAll=function(e){var t=s.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return S(t,function(t){e[t]=$.bind(e[t],e)}),e},$.memoize=function(e,t){var n={};return t||(t=$.identity),function(){var r=t.apply(this,arguments);return $.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},$.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},$.defer=function(e){return $.delay.apply($,[e,1].concat(s.call(arguments,1)))},$.throttle=function(e,t,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:new Date,a=null,o=e.apply(r,i)};return function(){var c=new Date;s||n.leading!==!1||(s=c);var l=t-(c-s);return r=this,i=arguments,0>=l?(clearTimeout(a),a=null,s=c,o=e.apply(r,i)):a||n.trailing===!1||(a=setTimeout(u,l)),o}},$.debounce=function(e,t,n){var r,i,o,a,s;return function(){o=this,i=arguments,a=new Date;var u=function(){var c=new Date-a;t>c?r=setTimeout(u,t-c):(r=null,n||(s=e.apply(o,i)))},c=n&&!r;return r||(r=setTimeout(u,t)),c&&(s=e.apply(o,i)),s}},$.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},$.wrap=function(e,t){return function(){var n=[e];return a.apply(n,arguments),t.apply(this,n)}},$.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},$.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},$.keys=_||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)$.has(e,n)&&t.push(n);return t},$.values=function(e){for(var t=$.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},$.pairs=function(e){for(var t=$.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},$.invert=function(e){for(var t={},n=$.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},$.functions=$.methods=function(e){var t=[];for(var n in e)$.isFunction(e[n])&&t.push(n);return t.sort()},$.extend=function(e){return S(s.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},$.pick=function(e){var t={},n=u.apply(r,s.call(arguments,1));return S(n,function(n){n in e&&(t[n]=e[n])}),t},$.omit=function(e){var t={},n=u.apply(r,s.call(arguments,1));for(var i in e)$.contains(n,i)||(t[i]=e[i]);return t},$.defaults=function(e){return S(s.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},$.clone=function(e){return $.isObject(e)?$.isArray(e)?e.slice():$.extend({},e):e},$.tap=function(e,t){return t(e),e};var j=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof $&&(e=e._wrapped),t instanceof $&&(t=t._wrapped);var i=c.call(e);if(i!=c.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return r[o]==t;var a=e.constructor,s=t.constructor;if(a!==s&&!($.isFunction(a)&&a instanceof a&&$.isFunction(s)&&s instanceof s))return!1;n.push(e),r.push(t);var u=0,l=!0;if("[object Array]"==i){if(u=e.length,l=u==t.length)for(;u--&&(l=j(e[u],t[u],n,r)););}else{for(var f in e)if($.has(e,f)&&(u++,!(l=$.has(t,f)&&j(e[f],t[f],n,r))))break;
if(l){for(f in t)if($.has(t,f)&&!u--)break;l=!u}}return n.pop(),r.pop(),l};$.isEqual=function(e,t){return j(e,t,[],[])},$.isEmpty=function(e){if(null==e)return!0;if($.isArray(e)||$.isString(e))return 0===e.length;for(var t in e)if($.has(e,t))return!1;return!0},$.isElement=function(e){return!(!e||1!==e.nodeType)},$.isArray=w||function(e){return"[object Array]"==c.call(e)},$.isObject=function(e){return e===Object(e)},S(["Arguments","Function","String","Number","Date","RegExp"],function(e){$["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),$.isArguments(arguments)||($.isArguments=function(e){return!(!e||!$.has(e,"callee"))}),"function"!=typeof/./&&($.isFunction=function(e){return"function"==typeof e}),$.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},$.isNaN=function(e){return $.isNumber(e)&&e!=+e},$.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},$.isNull=function(e){return null===e},$.isUndefined=function(e){return void 0===e},$.has=function(e,t){return l.call(e,t)},$.noConflict=function(){return e._=t,this},$.identity=function(e){return e},$.times=function(e,t,n){for(var r=Array(Math.max(0,e)),i=0;e>i;i++)r[i]=t.call(n,i);return r},$.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};N.unescape=$.invert(N.escape);var D={escape:new RegExp("["+$.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+$.keys(N.unescape).join("|")+")","g")};$.each(["escape","unescape"],function(e){$[e]=function(t){return null==t?"":(""+t).replace(D[e],function(t){return N[e][t]})}}),$.result=function(e,t){if(null==e)return void 0;var n=e[t];return $.isFunction(n)?n.call(e):n},$.mixin=function(e){S($.functions(e),function(t){var n=$[t]=e[t];$.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),I.call(this,n.apply($,e))}})};var R=0;$.uniqueId=function(e){var t=++R+"";return e?e+t:t},$.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\t|\u2028|\u2029/g;$.template=function(e,t,n){var r;n=$.defaults({},n,$.templateSettings);var i=new RegExp([(n.escape||q).source,(n.interpolate||q).source,(n.evaluate||q).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(i,function(t,n,r,i,s){return a+=e.slice(o,s).replace(P,function(e){return"\\"+L[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=s+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(n.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(t)return r(t,$);var u=function(e){return r.call(this,e,$)};return u.source="function("+(n.variable||"obj")+"){\n"+a+"}",u},$.chain=function(e){return $(e).chain()};var I=function(e){return this._chain?$(e).chain():e};$.mixin($),S(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];$.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],I.call(this,n)}}),S(["concat","join","slice"],function(e){var t=r[e];$.prototype[e]=function(){return I.call(this,t.apply(this._wrapped,arguments))}}),$.extend($.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){var t,n;return n=function(){return this._.noConflict()},t=n.apply(e,arguments),t||e._}}(this)),define("laxar/lib/text/character",["underscore"],function(e){function t(t){return e.isString(t)&&1===t.length&&t>="0"&&"9">=t}function n(e){return" "===e||"\n"===e||"	"===e||"\r"===e}function r(e){if(1===e.length)return n(e);for(var t=0;t<e.length;++t)if(!n(e.charAt(t)))return!1;return!0}return{isDigit:t,isWhitespace:r}}),define("laxar/lib/text/text_reader",["../utilities/assert","./character"],function(e,t){function n(e){this.inputString_=e,this.index_=0}return n.prototype.hasMoreInput=function(e){return e?this.index_+e<this.inputString_.length:this.index_<this.inputString_.length},n.prototype.test=function(e){if(1===e.length)return this.hasMoreInput()&&this.lookahead()===e.charAt(0);if(this.inputString_.length-this.index_<e.length)return!1;for(var t=this.index_,n=0;n<e.length;++n,++t)if(e.charAt(n)!==this.inputString_.charAt(t))return!1;return!0},n.prototype.lookahead=function(e){var t=this.index_+(e||0);if(t<this.inputString_.length)return this.inputString_.charAt(t);throw new Error("Trying to read beyond end of string.")},n.prototype.next=function(){var e=this.lookahead();return++this.index_,e},n.prototype.skipWhitespace=function(){for(;this.hasMoreInput()&&t.isWhitespace(this.lookahead());)this.next()},n.prototype.remainder=function(){return this.inputString_.substring(this.index_)},n.prototype.inputString=function(){return this.inputString_},n.prototype.position=function(){return this.index_},n.prototype.skip=function(e){this.index_+=e,this.index_>this.inputString_.length&&(this.index_=this.inputString_.length)},{create:function(t){return e(t).hasType(String).isNotNull(),new n(t)},TextReader:n}}),define("laxar/lib/text/generic_format",["underscore","./text_reader","./character"],function(e,t,n){function r(e){if(!e.hasMoreInput()||"%"!==e.lookahead())throw new Error('Not a valid format string: "'+e.inputString()+'".');this.hasSign_=!1,this.precision_=i,this.width_=o,this.hasPadding_=!1,this.hasGrouping_=!1,this.hasLeadingSpace_=!1,this.typeSpecifier_=" ";var t=e.position();e.next(),this.parseFlags(e),this.parseWidth(e),this.parsePrecision(e),this.parseGrouping(e),this.parseType(e),this.asString_=e.inputString().substring(t,e.position())}var i=-1,o=-1;return r.prototype.parseFlags=function(e){for(;e.hasMoreInput();)switch(e.lookahead()){case"+":e.next(),this.hasSign_=!0;break;case" ":e.next(),this.hasLeadingSpace_=!0;break;case"0":e.next(),this.hasPadding_=!0;break;default:return}},r.prototype.parseGrouping=function(e){e.hasMoreInput()&&"'"===e.lookahead()&&(e.next(),this.hasGrouping_=!0)},r.prototype.parseType=function(e){e.hasMoreInput()&&(this.typeSpecifier_=e.next())},r.prototype.parseWidth=function(e){this.width_=this.parseInteger(e,-1)},r.prototype.parsePrecision=function(e){e.hasMoreInput()&&"."===e.lookahead()&&(e.next(),this.precision_=this.parseInteger(e,0))},r.prototype.parseInteger=function(e,t){for(var r="";e.hasMoreInput()&&n.isDigit(e.lookahead());)r+=e.next();return 0===r.length?t:parseInt(r,10)},r.prototype.parseType=function(e){e.hasMoreInput()&&(this.typeSpecifier_=e.next())},r.prototype.hasSign=function(){return this.hasSign_},r.prototype.hasGrouping=function(){return this.hasGrouping_},r.prototype.hasPadding=function(){return this.hasPadding_},r.prototype.hasLeadingSpace=function(){return this.hasLeadingSpace_},r.prototype.precision=function(){return this.precision_},r.prototype.width=function(){return this.width_},r.prototype.typeSpecifier=function(){return this.typeSpecifier_},r.prototype.toString=function(){return this.asString_},{parse:function(n){if(n instanceof t.TextReader)return new r(n);if(e.isString(n))return new r(t.create(n));throw new Error("Argument to GenericFormat.parse() must be either a String or a TextReader instance.")}}}),define("laxar/lib/text/number_formatter",["underscore","./generic_format"],function(e){function t(){}return t.prototype.format=function(t,n){if(e.isUndefined(n)||e.isNull(n))return t.toString();var r="";return r=n.precision()>-1?t.toFixed(n.precision()):n.width()>-1?t.toPrecision(n.width()):t.toString()},{create:function(){return new t}}}),define("laxar/lib/text/string_formatter",["underscore","./generic_format"],function(){function e(){}function t(e,t){for(var n="",r=0;t>r;++r)n+=e;return n}return e.prototype.format=function(e,n){if(!n)return e.toString();if(n.precision()>-1&&n.precision()<e.length&&(e=e.substring(0,n.precision())),n.width()>-1){if(n.width()<e.length)return e.substring(0,n.width());if(n.width()>e.length)return t(" ",n.width()-e.length)+e}return e.toString()},{create:function(){return new e}}}),define("laxar/lib/text/object_formatter",[],function(){function e(e){var t={};return["name","message","stack"].forEach(function(n){n in e&&(t[n]=e[n])}),JSON.stringify(t)}var t={format:function(t){return t instanceof Error?e(t):JSON.stringify(t)}};return{create:function(){return t}}}),define("laxar/lib/text/formatter",["underscore","./generic_format","./number_formatter","./string_formatter","./object_formatter","./text_reader"],function(e,t,n,r,i,o){function a(){this.formatters_={};for(var e=0;e<arguments.length;++e){var t=arguments[e];this.formatters_[t.typeSpecifier]=t}}function s(e,t){return{typeSpecifier:e,formatter:t}}return a.prototype.getValueFormatter=function(t,n){if(e.isFunction(t.getFormatter))return t.getFormatter();if(e.isUndefined(n))return null;var r=this.formatters_[n.typeSpecifier()];if(e.isUndefined(r))throw new Error('Unknown type specifier in format string "'+n.toString()+'".');return r.formatter},a.prototype.formatPart=function(t,n){if(e.isUndefined(t))return"undefined";if(e.isNull(t))return"null";var r=this.getValueFormatter(t,n);return r?r.format(t,n):e.isFunction(t.toString)?t.toString():""+t},a.prototype.format=function(n,r){if(e.isUndefined(r)||null===r)return this.formatPart(n);for(var i=o.create(r),a="";i.hasMoreInput();)switch(i.lookahead()){case"\\":i.next(),a+=i.next();break;case"%":if(i.inputString().length-i.position()>1&&"%"===i.lookahead(1)){a+="%",i.skip(2);break}e.isUndefined(n)||e.isNull(n)?(i.next(),a+="null"):a+=this.formatPart(n,t.parse(i));break;default:a+=i.next()}return a},{create:function(){return new a(arguments)},standard:function(){return new a(s("f",n.create()),s("s",r.create()),s("o",i.create()))}}}),define("laxar/lib/text/text",["underscore","../utilities/string","./text_reader","./formatter","./object_formatter","./character"],function(e,t,n,r,i,o){function a(e,t){return{name:e,value:t,getFormatter:function(){return{format:function(e,t){return s(e.value,t?t.toString():null)}}}}}function s(e,t){return u.format(e,t)}var u=r.standard();return{argument:a,format:function(e){var n=[],r={};return[].slice.call(arguments,1).forEach(function(e,t){e.name&&e.value&&e.getFormatter?r[e.name]=e.value:n[t]=e}),t.format(e,n,r)},createObjectFormatter:i.create}}),define("laxar/lib/i18n/i18n",["../text/text","../utilities/assert"],function(e,t,n){function r(e){var t={};return function(r){var i=t[r];return i===n&&(i=e(r),t[r]=i),i}}function i(e,r,i){if(t(e).hasType(String),!r||-1!==l.indexOf(typeof r))return r;t(e).isNotNull();var o=r[e];if(o!==n)return o;for(var a=d(e),s=f(r),u=s.length,c=0;u>c;++c){var p=s[c];if(d(p)===a)return r[p]}return i}function o(e,r,o){if(t(e).hasType(String),!r||-1!==l.indexOf(typeof r))return r;for(var a=e?e.replace(/-/g,"_").split("_"):[];a.length>0;){var s=a.join("-"),u=i(s,r);if(u!==n)return u;a.pop()}return r[p]||o}function a(t,r){function o(e){return i(t,e,r)}return o.format=function(o){var a=c.call(arguments,1),s=i(t,o);return s===n?r:(a.unshift(s),u.apply(e,a))},o}function s(e,t){return e&&e.hasOwnProperty("tags")?e.tags[e.locale]||t:t}var u=e.format,c=[].slice,l=["string","number","boolean"],f=Object.keys,d=r(function(e){return e.toLowerCase().replace(/-/g,"_")}),p="en";return{localize:i,localizeRelaxed:o,localizer:a,languageTagFromI18n:s}}),define("laxar/lib/utilities/array",[],function(){function e(e,t){var n=e.indexOf(t);return-1!==n?(e.splice(n,1),!0):!1}function t(t,n){for(var r=!1;e(t,n);)r=!0;return r}return{remove:e,removeAll:t}}),define("laxar/lib/utilities/fn",["underscore"],function(e){return{debounce:e.debounce}}),define("laxar/lib/utilities/storage",[],function(e){function t(e,t){this.backend=e,this.namespace=t}function n(e,n){return new t(e,s+n)}function r(){return o("localStorage",function(){var e=window.localStore={};return{getItem:function(t){return e[t]||null},setItem:function(t,n){e[t]=n},removeItem:function(t){delete e[t]}}})}function i(){return o("sessionStorage",function(){function e(){var e={};try{e=JSON.parse(window.name)}catch(t){}return"object"==typeof e&&null!==e?e:{}}var t=e();return{getItem:function(e){return t[e]||null},setItem:function(e,n){t[e]=n,window.name=JSON.stringify(t)},removeItem:function(e){delete t[e],window.name=JSON.stringify(t)}}})}function o(e,t){var n=window[e];if(n.setItem&&n.getItem&&n.removeItem)return a(n);if(window.console){var r="warn"in window.console?"warn":"log";window.console[r]("window."+e+" is not available. Using a non-persistent polyfill. \nIf cookies are disabled, at least in Firefox WebStorage isn't available as well. \nThus enabling cookies in your browser and reopening the application might help.")}return t()}function a(e){return"function"==typeof e.setItem?e:{getItem:function(t){return e[t]},setItem:function(t,n){e[t]=n},removeItem:function(t){t in e&&delete e[t]}}}var s="ax.",u=r(),c=i();return t.prototype.getItem=function(e){var t=this.backend.getItem(this.namespace+"."+e);return t?JSON.parse(t):t},t.prototype.setItem=function(t,n){var r=this.namespace+"."+t;n===e?this.backend.removeItem(r):this.backend.setItem(r,JSON.stringify(n))},t.prototype.removeItem=function(e){this.backend.removeItem(this.namespace+"."+e)},{init:function(e,t){u=e||r(),c=t||i()},getLocalStorage:function(e){return n(u,e)},getSessionStorage:function(e){return n(c,e)},getApplicationLocalStorage:function(){return n(u,"app")},getApplicationSessionStorage:function(){return n(c,"app")}}}),define("laxar/lib/portal/configuration",["../utilities/object"],function(e){var t=new Function("return this")();return{get:function(n,r){return e.path(t.laxar,n,r)}}}),define("laxar/lib/utilities/path",["./assert"],function(e){function t(){var t=Array.prototype.slice.call(arguments,0);if(0===t.length)return"";var n="";t=t.reduce(function(t,r){e(r).hasType(String).isNotNull();var i=s.exec(r);return i?(n=i[1],r=i[2],r.split(o)):t.concat(r.split(o))},[]);var r=i(t);return n+r.join(o)}function n(e){var t="",n=s.exec(e);n&&(t=n[1],e=n[2]);var r=i(e.split(o));return t+r.join(o)}function r(t,n){var r=s.exec(t),a=s.exec(n);e(r).isNotNull(),e(a).isNotNull();var u=i(r[2].split(o)),c=i(a[2].split(o));return u.reduce(function(e,t){return e[0]===t?e.shift():e.unshift(".."),e},c).join(o)||"."}function i(e){return e.reduce(function(e,t){return t=t.replace(/^\/+|\/+$/g,""),""===t||"."===t?e:0===e.length?[t]:t===a&&e.length>0&&e[e.length-1]!==a?(e.pop(),e):(e.push(t),e)},[])}var o="/",a="..",s=/^([a-z0-9]+:\/\/[^\/]+\/|\/)(.*)$/;return{join:t,normalize:n,relative:r}}),define("laxar/lib/portal/paths",["require"],function(e){return{PRODUCT:e.toUrl("laxar-path-root"),THEMES:e.toUrl("laxar-path-themes"),LAYOUTS:e.toUrl("laxar-path-layouts"),WIDGETS:e.toUrl("laxar-path-widgets"),PAGES:e.toUrl("laxar-path-pages"),FLOW_JSON:e.toUrl("laxar-path-flow"),DEFAULT_THEME:e.toUrl("laxar_uikit/themes/default.theme")}}),define("laxar/lib/portal/portal",["angular","jquery","../utilities/path","./paths"],function(e,t,n,r){function i(e){function t(){var e=r.apply(this,arguments);return e.$new=t,e.$destroy=function(){this.$$destroyed||(this.$broadcast("$destroy"),n(this))},e}function n(e){var t=e.$parent;for(e.$$destroyed=!0;e.$$childHead;)n(e.$$childHead);t.$$childHead===e&&(t.$$childHead=e.$$nextSibling),t.$$childTail===e&&(t.$$childTail=e.$$prevSibling),e.$$prevSibling&&(e.$$prevSibling.$$nextSibling=e.$$nextSibling),e.$$nextSibling&&(e.$$nextSibling.$$prevSibling=e.$$prevSibling),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=null;var r=Object.keys(e);r.forEach(function(t){0!==t.indexOf("$")&&delete e[t]})}var r=e.$new;e.$new=t}var o=e.module("laxar.portal",[]);return o.run(["$rootScope","$window",function(e,n){i(e),t(n).one("unload",function(){for(;e.$$childHead;)e.$$childHead.$destroy();e.$destroy()})}]),o.run(["CssLoader","ThemeManager",function(e,t){t.urlProvider(n.join(r.THEMES,"[theme]"),r.DEFAULT_THEME).provide(["css/theme.css"]).then(function(t){e.load(t[0])})}]),o.run(["$rootScope","Configuration",function(e,t){e.i18n={locale:"default",tags:t.get("i18n.locales")}}]),o}),function(e,t){function n(){this.$get=["$$sanitizeUri",function(e){return function(t){var n=[];return o(t,u(n,function(t,n){return!/^unsafe/.test(e(t,n))})),n.join("")}}]}function r(e){var n=[],r=u(n,t.noop);return r.chars(e),n.join("")}function i(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function o(e,n){function r(e,r,o,s){if(r=t.lowercase(r),S[r])for(;b.last()&&E[b.last()];)i("",b.last());$[r]&&b.last()==r&&i("",r),s=w[r]||!!s,s||b.push(r);var u={};o.replace(d,function(e,t,n,r,i){var o=n||r||i||"";u[t]=a(o)}),n.start&&n.start(r,u,s)}function i(e,r){var i,o=0;if(r=t.lowercase(r))for(o=b.length-1;o>=0&&b[o]!=r;o--);if(o>=0){for(i=b.length-1;i>=o;i--)n.end&&n.end(b[i]);b.length=o}}"string"!=typeof e&&(e=null===e||"undefined"==typeof e?"":""+e);var o,s,u,y,b=[],_=e;for(b.last=function(){return b[b.length-1]};e;){if(y="",s=!0,b.last()&&T[b.last()]?(e=e.replace(new RegExp("(.*)<\\s*\\/\\s*"+b.last()+"[^>]*>","i"),function(e,t){return t=t.replace(v,"$1").replace(m,"$1"),n.chars&&n.chars(a(t)),""}),i("",b.last())):(0===e.indexOf("<!--")?(o=e.indexOf("--",4),o>=0&&e.lastIndexOf("-->",o)===o&&(n.comment&&n.comment(e.substring(4,o)),e=e.substring(o+3),s=!1)):g.test(e)?(u=e.match(g),u&&(e=e.replace(u[0],""),s=!1)):h.test(e)?(u=e.match(f),u&&(e=e.substring(u[0].length),u[0].replace(f,i),s=!1)):p.test(e)&&(u=e.match(l),u?(u[4]&&(e=e.substring(u[0].length),u[0].replace(l,r)),s=!1):(y+="<",e=e.substring(1))),s&&(o=e.indexOf("<"),y+=0>o?e:e.substring(0,o),e=0>o?"":e.substring(o),n.chars&&n.chars(a(y)))),e==_)throw c("badparse","The sanitizer was unable to parse the following block of html: {0}",e);_=e}i()}function a(e){if(!e)return"";var t=j.exec(e),n=t[1],r=t[3],i=t[2];return i&&(O.innerHTML=i.replace(/</g,"&lt;"),i="textContent"in O?O.textContent:O.innerText),n+i+r}function s(e){return e.replace(/&/g,"&amp;").replace(y,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(b,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(e,n){var r=!1,i=t.bind(e,e.push);return{start:function(e,o,a){e=t.lowercase(e),!r&&T[e]&&(r=e),r||k[e]!==!0||(i("<"),i(e),t.forEach(o,function(r,o){var a=t.lowercase(o),u="img"===e&&"src"===a||"background"===a;C[a]!==!0||A[a]===!0&&!n(r,u)||(i(" "),i(o),i('="'),i(s(r)),i('"'))}),i(a?"/>":">"))},end:function(e){e=t.lowercase(e),r||k[e]!==!0||(i("</"),i(e),i(">")),e==r&&(r=!1)},chars:function(e){r||i(s(e))}}}var c=t.$$minErr("$sanitize"),l=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,f=/^<\/\s*([\w:-]+)[^>]*>/,d=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,p=/^</,h=/^<\//,v=/<!--(.*?)-->/g,g=/<!DOCTYPE([^>]*?)>/i,m=/<!\[CDATA\[(.*?)]]>/g,y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/([^\#-~| |!])/g,w=i("area,br,col,hr,img,wbr"),_=i("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),x=i("rp,rt"),$=t.extend({},x,_),S=t.extend({},_,i("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),E=t.extend({},x,i("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),T=i("script,style"),k=t.extend({},w,S,E,$),A=i("background,cite,href,longdesc,src,usemap"),C=t.extend({},A,i("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),O=document.createElement("pre"),j=/^(\s*)([\s\S]*?)(\s*)$/;t.module("ngSanitize",[]).provider("$sanitize",n),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,i=/^mailto:/;return function(o,a){function s(e){e&&p.push(r(e))}function u(e,n){p.push("<a "),t.isDefined(a)&&(p.push('target="'),p.push(a),p.push('" ')),p.push('href="'),p.push(e),p.push('">'),s(n),p.push("</a>")}if(!o)return o;for(var c,l,f,d=o,p=[];c=d.match(n);)l=c[0],c[2]==c[3]&&(l="mailto:"+l),f=c.index,s(d.substr(0,f)),u(l,c[0].replace(i,"")),d=d.substring(f+c[0].length);return s(d),e(p.join(""))}}])}(window,window.angular),define("angular-sanitize",["angular"],function(e){return function(){var t,n;return n=function(e){return e},t=n.apply(e,arguments)}}(this)),define("laxar/lib/event_bus/event_bus",["../utilities/assert","../utilities/object","../logging/log"],function(e,t,n){function r(e){this.config_=t.options(e,{pendingDidTimeout:12e4}),this.cycleCounter_=0,this.eventQueue_=[],this.subscriberTree_={},this.waitingDeferreds_=[],this.currentCycle_=-1,this.errorHandler_=d,this.mediator_=p(),this.inspectors_=[]}function i(e,t,n,r){if(0===n.length&&Array.isArray(t[y]))for(var o=t[y],a=o.length-1;a>=0;--a)o[a].subscriber===r&&(f(e,{action:"unsubscribe",source:o[a].subscriberName,target:"-",event:o[a].name,cycleId:e.currentCycle_}),o.splice(a,1));var s=n.shift();""===s&&(s=m),s in t&&i(e,t[s],n,r)}function o(e,t){0===e.eventQueue_.length&&v(function(){var t=e.eventQueue_;e.eventQueue_=[],s(e,a(e,t))}),e.eventQueue_.push(t)}function a(e,n){return e.mediator_(n).map(function(n){var r=n.meta;e.currentCycle_=r.cycleId;var i=u(e,r.name);if(0===i.length)return n.publishedDeferred;var o=null;i.length>1&&(o=JSON.stringify(n.event));var a=r.sender,s=r.options;return i.forEach(function(i){var u=i.subscriberName;if(s.deliverToSender||!a||a!==u){try{var c;c=i.options.clone?o?JSON.parse(o):n.event:t.deepFreeze(n.event,!0),i.subscriber(c,t.options(r,{unsubscribe:function(){e.unsubscribe(i.subscriber)}}))}catch(l){var d='error while calling subscriber "'+u+'" for event '+r.name+' published by "'+a+'" (subscribed to: '+i.name+")";e.errorHandler_(d,{Exception:l,"Published event":n.event,"Event meta information":r,"Caused by Subscriber":i})}f(e,{action:"deliver",source:a,target:u,event:r.name,eventObject:n.event,subscribedTo:i.name,cycleId:r.cycleId})}}),e.currentCycle_=-1,n.publishedDeferred})}function s(e,t){var n=e.waitingDeferreds_;e.waitingDeferreds_=t,n.forEach(function(e){e.resolve()}),0===e.eventQueue_.length&&(t.forEach(function(e){e.resolve()}),e.waitingDeferreds_=[])}function u(e,t){var n=[],r=t.split(w),i=e.subscriberTree_;return c(i,r,n),n.sort(function(e,t){var n=e.subscriptionWeight,r=t.subscriptionWeight;return n[0]===r[0]?r[1]-n[1]:r[0]-n[0]}),n}function c(e,t,n){if(Array.isArray(e[y])&&n.push.apply(n,e[y]),0!==t.length){var r=t[0];if(t=t.slice(1),-1!==r.indexOf(_)){var i=r.length;do r=r.substring(0,i),r in e&&c(e[r],t,n),i=r.lastIndexOf(_);while(-1!==i)}else r in e&&c(e[r],t,n);m in e&&c(e[m],t,n)}}function l(e){var t=e.split(w),n=[0,0];return t.forEach(function(e){e.length>0&&(n[0]++,n[1]+=e.split(_).length-1)}),n}function f(e,t){e.inspectors_.forEach(function(e){e(t)})}function d(e,t){if(window.console&&window.console.log){var n=window.console,r=n.error?"error":"log";n[r](e),t&&Object.keys(t).forEach(function(e){var i=t[e];n[r]("   - %s: %o",e,i),i instanceof Error&&i.stack&&n[r]("   - Stacktrace: %s",i.stack)})}}function p(e,t){return"function"==typeof e?e:t||function(e){return e}}var h,v,g,m="*",y=".",b="ax__events",w=".",_="-",x=/^(.)(.*)Request(\..+)?$/;return r.prototype.setErrorHandler=function(e){this.errorHandler_=p(e,d)},r.prototype.setMediator=function(e){this.mediator_=p(e)},r.prototype.addInspector=function(t){return e(t).hasType(Function).isNotNull(),this.inspectors_.push(t),function(){var e=this.inspectors_.indexOf(t);-1!==e&&this.inspectors_.splice(e,1)}.bind(this)},r.prototype.subscribe=function(n,r,i){e(n).hasType(String).isNotNull(),e(r).hasType(Function).isNotNull();for(var o=t.options(i,{subscriber:null,clone:!0}),a={name:n,subscriber:r,subscriberName:o.subscriber,subscriptionWeight:l(n),options:o},s=n.split(w),u=this.subscriberTree_,c=0;c<s.length;++c){var d=s[c].length?s[c]:m;d in u||(u[d]={}),u=u[d]}y in u||(u[y]=[]),u[y].push(a),r.hasOwnProperty(b)||(r[b]=[]),r[b].push(n),f(this,{action:"subscribe",source:o.subscriber,target:"-",event:n,cycleId:this.currentCycle_})},r.prototype.unsubscribe=function(t){if(e(t).hasType(Function).isNotNull(),t.hasOwnProperty(b)&&Array.isArray(t[b])){var n=this,r=this.subscriberTree_;t[b].forEach(function(e){i(n,r,e.split(w),t)}),delete t[b]}},r.prototype.publish=function(r,i,a){e(r).hasType(String).isNotNull();var s=JSON.parse(JSON.stringify(i||{})),u=t.options(a,{deliverToSender:!0,sender:s.sender||null});s.sender&&n.warn("Deprecation warning: The event sender should be set in the options, not the event itself.\nSender: [0], Eventname: [1]",s.sender,r);var c={meta:{name:r,cycleId:this.currentCycle_>-1?this.currentCycle_:this.cycleCounter_++,sender:u.sender,initiator:null,options:u},event:s,publishedDeferred:h.defer()};return o(this,c),f(this,{action:"publish",source:u.sender,target:"-",event:r,eventObject:s,cycleId:c.meta.cycleId}),c.publishedDeferred.promise},r.prototype.publishAndGatherReplies=function(n,r,i){function o(t,n){e(n.sender).hasType(String).isNotNull("A response with will to a request-event must contain a sender."),p.push(n.sender)}function a(e,t){v.push({event:e,meta:t});var n=p.indexOf(t.sender);-1!==n&&p.splice(n,1),0===p.length&&m&&s()}function s(){clearTimeout(y),c.unsubscribe(o),c.unsubscribe(a),d.resolve(v)}e(n).hasType(String).isNotNull();var u=x.exec(n);e.state(!!u,'Expected eventName to end with "Request" but got '+n);var c=this,l=t.options(i,{pendingDidTimeout:this.config_.pendingDidTimeout}),f=u[1].toUpperCase()+u[2];u[3]&&(f+=u[3]);var d=h.defer(),p=[],v=[],m=!1;this.subscribe("will"+f,o,{subscriber:l.sender}),this.subscribe("did"+f,a,{subscriber:l.sender});var y=g(function(){if(p.length>0){var e="Timeout while waiting for pending did"+f+" on "+n+".";c.errorHandler_(e,{Sender:l.sender,"After ms timeout":l.pendingDidTimeout,"Responses missing from":p.join(", ")}),s()}},l.pendingDidTimeout);return this.publish(n,r,l).then(function(){return 0===p.length?void s():void(m=!0)}),d.promise},{create:function(t){return e(h).isNotNull("Need a promise implementation like $q or Q"),e(v).hasType(Function).isNotNull("Need a next tick implementation like $timeout"),e(g).hasType(Function).isNotNull("Need a timeout implementation like $timeout or setTimeout"),new r(t)},init:function(e,t,n){h=e,v=t,g=n}}}),define("laxar/lib/file_resource_provider/file_resource_provider",["../utilities/assert","../utilities/string","../utilities/path","../portal/configuration"],function(e,t,n,r){function i(e){this.useEmbedded_=r.get("file_resource_provider.useEmbedded",!1),this.rootPath_=n.normalize(e),this.fileListings_={},this.fileListingUris_={},this.httpGets_={},this.httpHeads_={},this.httpHeadCache_={}}function o(e,t){function n(e,t,n){for(var r=t.replace(e.rootPath_,"").replace(d,"").split("/"),i=0,o=r.length;o>i;++i){if(i===o-1){var a=n[r[i]];return e.useEmbedded_?"string"==typeof a?a:a===p:"string"==typeof a||a===p}if(n=n[r[i]],"object"!=typeof n)return!1}}var r=Object.keys(e.fileListingUris_).filter(function(e){return 0===t.indexOf(e)});if(r.length){var i=r[0];return s(e,i).then(function(r){return l.when(n(e,t,r))})}return l.reject()}function a(e){return t.endsWith(e,".json")?function(e){return JSON.parse(e)}:function(e){return e}}function s(e,t){if(e.fileListings_[t])return l.when(e.fileListings_[t]);var n=e.fileListingUris_[t];return u(e,n).then(a(n)).then(function(n){return e.fileListings_[t]=n,n})}function u(e,t){if(t in e.httpGets_)return e.httpGets_[t];var n=e.httpGets_[t]=f.get(t,{transformResponse:[]}).then(function(e){return l.when(e.data)});return n.then(function(){delete e.httpGets_[t]}),n}function c(e,t){if(t in e.httpHeadCache_)return l.when(e.httpHeadCache_[t]);if(t in e.httpHeads_)return e.httpHeads_[t];var n=e.httpHeads_[t]=f.head(t).then(function(){return!0},function(){return!1});return n.then(function(n){e.httpHeadCache_[t]=n,delete e.httpHeads_[t]}),n}var l,f,d=/^\/|\/$/g,p=1;return i.prototype.provide=function(e){var t=this;return o(this,e).then(function(n){return"string"==typeof n?l.when(n).then(a(e)):n!==!1?u(t,e).then(a(e)):l.reject()},function(){return u(t,e).then(a(e))})},i.prototype.isAvailable=function(e){var t=this;return o(t,e).then(function(e){return l.when(e!==!1)},function(){return c(t,e).then(function(e){return l.when(e)})})},i.prototype.setFileListingUri=function(e,t){var r=n.join(this.rootPath_,e);this.fileListingUris_[r]=n.join(this.rootPath_,t),this.fileListings_[r]=null,s(this,r)},{create:function(t){return e(l).isNotNull("Need a promise implementation like $q or Q"),e(f).isNotNull("Need a http client implementation like $http"),new i(t)},init:function(e,t){l=e,f=t}}}),define("laxar/lib/portal/portal_assembler/layout_loader",["../../utilities/path"],function(e){function t(t,n,r,i,o){function a(n){var i=e.join(t,n),o=i.substr(i.lastIndexOf("/")+1),a=o+".html",s="css/"+o+".css";return r.findFiles(i,[a,s]).then(function(e){return{html:e[0],css:e[1],className:o.replace(/\//g,"").replace(/_/g,"-")+"-layout"}})}return{load:function(e){return a(e).then(function(e){return e.css&&n.load(e.css),e.html?i.provide(e.html).then(function(t){return e.htmlContent=t,o&&o.put(e.html,t),e}):e})}}}return{create:t}}),define("laxar/lib/portal/modules/theme_manager",["../../utilities/assert","../../utilities/path","../../utilities/storage"],function(e,t,n){function r(e,t,r){this.q_=t,this.fileResourceProvider_=e,this.store_=n.getSessionStorage("themeManager");var i=this.store_.getItem("theme");this.theme_=i&&i.length?i:r||"default"}function i(e,n,r){return 0===n.length?e.q_.when(null):e.fileResourceProvider_.isAvailable(t.join(n[0],r)).then(function(t){return t?e.q_.when(n[0]):i(e,n.slice(1),r).then(function(e){return e})})}return r.prototype.setTheme=function(t){e(t).hasType(String).isNotNull(),this.theme_=t,this.store_.setItem("theme",t)},r.prototype.getTheme=function(){return this.theme_},r.prototype.urlProvider=function(e,n){var r=this;return{provide:function(o){var a=[],s=[n.replace("[theme]","default.theme")];if(r.theme_&&"default"!==r.theme_){var u=r.theme_+".theme";s.unshift(n.replace("[theme]",u)),s.unshift(e.replace("[theme]",u))}for(var c=0;c<o.length;++c)a.push(i(r,s,o[c]));return r.q_.all(a).then(function(e){return e.map(function(e,n){return null!==e?t.join(e,o[n]):null})})}}},r.prototype.findFiles=function(e,n){var r=t.join(e,"[theme]");return this.urlProvider(r,r).provide(n)},{create:function(e,t,n){return new r(e,t,n)}}}),define("laxar/lib/portal/modules/portal_services",["angular","../../event_bus/event_bus","../../i18n/i18n","../../file_resource_provider/file_resource_provider","../../logging/log","../../utilities/path","../portal_assembler/layout_loader","../paths","../configuration","./theme_manager"],function(e,t,n,r,i,o,a,s,u,c){function l(t,n){i.error("EventBus: "+t),n&&e.forEach(n,function(e,t){var n="   - [0]: [1:%o]";-1!==p.indexOf(t)&&(n="   - [0]: [1:%o:anonymize]"),i.error(n,t,e),e instanceof Error&&e.stack&&i.error("   - Stacktrace: "+e.stack)})}var f,d=e.module("laxar.portal_services",[]);d.config(["$qProvider",function(e){f=e}]),d.factory("axHeartbeat",["$window","$rootScope",function(e,t){function n(n){a||(a=!0,e.setTimeout(function(){for(;s.length;)s.shift()();do{for(;o.length;)o.shift()();t.$apply()}while(o.length);for(;u.length;)u.shift()();a=!1},0)),o.push(n)}function r(e){s.push(e)}function i(e){u.push(e)}var o=[],a=!1,s=[],u=[];return{onBeforeNext:r,onNext:n,onAfterNext:i}}]),d.factory("axTimestamp",function(){return function(){return(new Date).getTime()}}),d.factory("EventBus",["$injector","$window","axHeartbeat",function(e,n,r){var i=e.invoke(f.$get,f,{$rootScope:{$evalAsync:r.onNext}});
t.init(i,r.onNext,function(e,t){n.setTimeout(e,t)});var o=t.create();return o.setErrorHandler(l),o}]),d.factory("Configuration",[function(){return u}]),d.factory("i18n",[function(){return n}]),d.factory("FileResourceProvider",["$q","$http","Configuration",function(t,n,i){r.init(t,n);var o=r.create(s.PRODUCT),a=i.get("file_resource_provider.fileListings");return a&&e.forEach(a,function(e,t){o.setFileListingUri(t,e)}),o}]),d.factory("ThemeManager",["Configuration","FileResourceProvider","$q","EventBus",function(e,t,n,r){var i=e.get("portal.theme"),o=c.create(t,n,i);return r.subscribe("changeThemeRequest",function(e){r.publish("willChangeTheme."+e.theme,{theme:e.theme}).then(function(){o.setTheme(e.theme);var t=e.target||"_self";r.publish("navigateRequest."+t,{target:t,triggerBrowserReload:!0})})},{subscriber:"ThemeManager"}),{getTheme:o.getTheme.bind(o),findFiles:o.findFiles.bind(o),urlProvider:o.urlProvider.bind(o)}}]),d.factory("LayoutLoader",["CssLoader","ThemeManager","FileResourceProvider","$templateCache",function(e,t,n,r){return a.create(s.LAYOUTS,e,t,n,r)}]),d.factory("CssLoader",["Configuration","ThemeManager",function(t,n){function r(){if("boolean"!=typeof r.result&&(r.result=!1,document.createStyleSheet)){var e=navigator.userAgent.match(/MSIE ?(\d+(\.\d+)?)[^\d]/i);(!e||parseFloat(e[1])<10)&&(r.result=!0)}return r.result}function i(t,n){var r=document.createElement(t);e.forEach(n,function(e,t){r[t]=e}),document.getElementsByTagName("head")[0].appendChild(r)}var a=[].some.call(document.getElementsByTagName("link"),function(e){return e.hasAttribute("data-ax-merged-css")});if(a)return{load:function(){}};var u=[],c={load:function(e){if(-1===u.indexOf(e)){if(r()){var t="cssLoaderStyleSheet"+Math.floor(u.length/30);document.getElementById(t)||i("style",{type:"text/css",id:t}),document.getElementById(t).styleSheet.addImport(e)}else i("link",{type:"text/css",id:"cssLoaderStyleSheet"+u.length,rel:"stylesheet",href:e});u.push(e)}}};return t.get("portal.useMergedCss",!1)?(c.load(o.join(s.PRODUCT,"var/static/css",n.getTheme()+".theme.css")),{load:function(){}}):c}]),d.factory("axVisibilityService",["axHeartbeat",function(e,t){function n(e){function n(){return s(r),c}var r=e.$id;e.$on("$destroy",n);for(var o=e;!(o===t||o.widget&&o.widget.area);)o=o.$parent;var u=o.widget&&o.widget.area;if(!u)throw new Error("axVisibilityService: could not determine widget area for scope: "+r);var c={isVisible:function(){return i(u)},onChange:function(e){return a(r,u,e,!0),a(r,u,e,!1),c},onShow:function(e){return a(r,u,e,!0),c},onHide:function(e){return a(r,u,e,!1),c},clear:n};return c}function r(){u={},c={},l={},f={}}function i(e){return u[e]||!1}function o(t,n){u[t]!==n&&(u[t]=n,e.onAfterNext(function(){var e=(n?c:l)[t];if(e)for(var r=e.length-1;r>=0;--r){var i=e[r];null===i.handler?e.splice(r,1):i.handler(n)}}))}function a(e,t,n,r){var i={handler:n};f[e]=f[e]||[],f[e].push(i);var o=r?c:l;o[t]=o[t]||[],o[t].push(i),t in u&&u[t]===r&&n(r)}function s(e){f[e]&&f[e].forEach(function(e){e.handler=null})}var u,c,l,f;return{isVisible:i,handlerFor:n,_updateState:o,_reset:r}}]),d.provider("$exceptionHandler",function(){var e=function(e,t){i.error("There was an exception: "+e.message+", \nstack: "),i.error(e.stack+", \n"),i.error("  Cause: "+t)};this.$get=[function(){return e}]});var p=["Published event"];return d}),function(e,t){function n(){function e(e,n){return t.extend(new(t.extend(function(){},{prototype:e})),n)}function n(e,t){var n=t.caseInsensitiveMatch,r={originalPath:e,regexp:e},i=r.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(e,t,n,r){var o="?"===r?r:null,a="*"===r?r:null;return i.push({name:n,optional:!!o}),t=t||"",""+(o?"":t)+"(?:"+(o?t:"")+(a&&"(.+?)"||"([^/]+)")+(o||"")+")"+(o||"")}).replace(/([\/$\*])/g,"\\$1"),r.regexp=new RegExp("^"+e+"$",n?"i":""),r}var r={};this.when=function(e,i){if(r[e]=t.extend({reloadOnSearch:!0},i,e&&n(e,i)),e){var o="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";r[o]=t.extend({redirectTo:e},n(o,i))}return this},this.otherwise=function(e){return this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function(n,i,o,a,s,u,c,l){function f(e,t){var n=t.keys,r={};if(!t.regexp)return null;var i=t.regexp.exec(e);if(!i)return null;for(var o=1,a=i.length;a>o;++o){var s=n[o-1],u=i[o];s&&u&&(r[s.name]=u)}return r}function d(){var e=p(),r=g.current;e&&r&&e.$$route===r.$$route&&t.equals(e.pathParams,r.pathParams)&&!e.reloadOnSearch&&!v?(r.params=e.params,t.copy(r.params,o),n.$broadcast("$routeUpdate",r)):(e||r)&&(v=!1,n.$broadcast("$routeChangeStart",e,r),g.current=e,e&&e.redirectTo&&(t.isString(e.redirectTo)?i.path(h(e.redirectTo,e.params)).search(e.params).replace():i.url(e.redirectTo(e.pathParams,i.path(),i.search())).replace()),a.when(e).then(function(){if(e){var n,r,i=t.extend({},e.resolve);return t.forEach(i,function(e,n){i[n]=t.isString(e)?s.get(e):s.invoke(e)}),t.isDefined(n=e.template)?t.isFunction(n)&&(n=n(e.params)):t.isDefined(r=e.templateUrl)&&(t.isFunction(r)&&(r=r(e.params)),r=l.getTrustedResourceUrl(r),t.isDefined(r)&&(e.loadedTemplateUrl=r,n=u.get(r,{cache:c}).then(function(e){return e.data}))),t.isDefined(n)&&(i.$template=n),a.all(i)}}).then(function(i){e==g.current&&(e&&(e.locals=i,t.copy(e.params,o)),n.$broadcast("$routeChangeSuccess",e,r))},function(t){e==g.current&&n.$broadcast("$routeChangeError",e,r,t)}))}function p(){var n,o;return t.forEach(r,function(r){!o&&(n=f(i.path(),r))&&(o=e(r,{params:t.extend({},i.search(),n),pathParams:n}),o.$$route=r)}),o||r[null]&&e(r[null],{params:{},pathParams:{}})}function h(e,n){var r=[];return t.forEach((e||"").split(":"),function(e,t){if(0===t)r.push(e);else{var i=e.match(/(\w+)(.*)/),o=i[1];r.push(n[o]),r.push(i[2]||""),delete n[o]}}),r.join("")}var v=!1,g={routes:r,reload:function(){v=!0,n.$evalAsync(d)}};return n.$on("$locationChangeSuccess",d),g}]}function r(){this.$get=function(){return{}}}function i(e,n,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(i,o,a,s,u){function c(){p&&(p.remove(),p=null),f&&(f.$destroy(),f=null),d&&(r.leave(d,function(){p=null}),p=d,d=null)}function l(){var a=e.current&&e.current.locals,s=a&&a.$template;if(t.isDefined(s)){var l=i.$new(),p=e.current,g=u(l,function(e){r.enter(e,null,d||o,function(){!t.isDefined(h)||h&&!i.$eval(h)||n()}),c()});d=g,f=p.scope=l,f.$emit("$viewContentLoaded"),f.$eval(v)}else c()}var f,d,p,h=a.autoscroll,v=a.onload||"";i.$on("$routeChangeSuccess",l),l()}}}function o(e,t,n){return{restrict:"ECA",priority:-400,link:function(r,i){var o=n.current,a=o.locals;i.html(a.$template);var s=e(i.contents());if(o.controller){a.$scope=r;var u=t(o.controller,a);o.controllerAs&&(r[o.controllerAs]=u),i.data("$ngControllerController",u),i.children().data("$ngControllerController",u)}s(r)}}}var a=t.module("ngRoute",["ng"]).provider("$route",n);a.provider("$routeParams",r),a.directive("ngView",i),a.directive("ngView",o),i.$inject=["$route","$anchorScroll","$animate"],o.$inject=["$compile","$controller","$route"]}(window,window.angular),define("angular-route",["angular"],function(e){return function(){var t,n;return n=function(e){return e},t=n.apply(e,arguments)}}(this)),function(){function e(){return this instanceof e?(this.coerceType={},this.fieldType=t(o),this.fieldValidate=t(s),this.fieldFormat=t(a),this.defaultOptions=t(d),void(this.schema={})):new e}var t=function(e){if(null===e||"object"!=typeof e)return e;var n;if(e instanceof Date)return n=new Date,n.setTime(e.getTime()),n;if(e instanceof RegExp)return n=new RegExp(e);if(e instanceof Array){n=[];for(var r=0,i=e.length;i>r;r++)n[r]=t(e[r]);return n}if(e instanceof Object){n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=t(e[o]));return n}throw new Error("Unable to clone object!")},n=function(e){for(var n=[t(e[0])],r=n[0].key,i=n[0].object,o=1,a=e.length;a>o;o++)i=i[r],r=e[o].key,n.push({object:i,key:r});return n},r=function(e,t){var n=e.length-1,r=e[n].key;t[n].object[r]=e[n].object[r]},i={type:!0,not:!0,anyOf:!0,allOf:!0,oneOf:!0,$ref:!0,$schema:!0,id:!0,exclusiveMaximum:!0,exclusiveMininum:!0,properties:!0,patternProperties:!0,additionalProperties:!0,items:!0,additionalItems:!0,required:!0,"default":!0,title:!0,description:!0,definitions:!0,dependencies:!0},o={"null":function(e){return null===e},string:function(e){return"string"==typeof e},"boolean":function(e){return"boolean"==typeof e},number:function(e){return"number"==typeof e&&e===e},integer:function(e){return"number"==typeof e&&e%1===0},object:function(e){return e&&"object"==typeof e&&!Array.isArray(e)},array:function(e){return Array.isArray(e)},date:function(e){return e instanceof Date}},a={alpha:function(e){return/^[a-zA-Z]+$/.test(e)},alphanumeric:function(e){return/^[a-zA-Z0-9]+$/.test(e)},identifier:function(e){return/^[-_a-zA-Z0-9]+$/.test(e)},hexadecimal:function(e){return/^[a-fA-F0-9]+$/.test(e)},numeric:function(e){return/^[0-9]+$/.test(e)},"date-time":function(e){return!isNaN(Date.parse(e))&&-1===e.indexOf("/")},uppercase:function(e){return e===e.toUpperCase()},lowercase:function(e){return e===e.toLowerCase()},hostname:function(e){return e.length<256&&/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]))*$/.test(e)},uri:function(e){return/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/.test(e)},email:function(e){return/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/.test(e)},ipv4:function(e){if(/^(\d?\d?\d)\.(\d?\d?\d)\.(\d?\d?\d)\.(\d?\d?\d)$/.test(e)){var t=e.split(".").sort();if(t[3]<=255)return!0}return!1},ipv6:function(e){return/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/.test(e)}},s={readOnly:function(){return!1},minimum:function(e,t,n){return!(t>e||n.exclusiveMinimum&&t>=e)},maximum:function(e,t,n){return!(e>t||n.exclusiveMaximum&&e>=t)},multipleOf:function(e,t){return e/t%1===0||"number"!=typeof e},pattern:function(e,t){if("string"!=typeof e)return!0;var n,r;"string"==typeof t?n=t:(n=t[0],r=t[1]);var i=new RegExp(n,r);return i.test(e)},minLength:function(e,t){return e.length>=t||"string"!=typeof e},maxLength:function(e,t){return e.length<=t||"string"!=typeof e},minItems:function(e,t){return e.length>=t||!Array.isArray(e)},maxItems:function(e,t){return e.length<=t||!Array.isArray(e)},uniqueItems:function(e){for(var t,n={},r=0,i=e.length;i>r;r++){if(t=JSON.stringify(e[r]),n.hasOwnProperty(t))return!1;n[t]=!0}return!0},minProperties:function(e,t){if("object"!=typeof e)return!0;var n=0;for(var r in e)e.hasOwnProperty(r)&&(n+=1);return n>=t},maxProperties:function(e,t){if("object"!=typeof e)return!0;var n=0;for(var r in e)e.hasOwnProperty(r)&&(n+=1);return t>=n},constant:function(e,t){return JSON.stringify(e)==JSON.stringify(t)},"enum":function(e,t){var n,r,i;if("object"==typeof e){for(i=JSON.stringify(e),n=0,r=t.length;r>n;n++)if(i===JSON.stringify(t[n]))return!0}else for(n=0,r=t.length;r>n;n++)if(e===t[n])return!0;return!1}},u=function(e){return-1===e.indexOf("://")?e:e.split("#")[0]},c=function(e,t,n){var r,i,o,a;if(o=n.indexOf("#"),-1===o)return e.schema.hasOwnProperty(n)?[e.schema[n]]:null;if(o>0)if(a=n.substr(0,o),n=n.substr(o+1),e.schema.hasOwnProperty(a))t=[e.schema[a]];else{if(!t||t[0].id!==a)return null;t=[t[0]]}else{if(!t)return null;n=n.substr(1)}if(""===n)return[t[0]];if("/"===n.charAt(0)){for(n=n.substr(1),r=t[0],i=n.split("/");i.length>0;){if(!r.hasOwnProperty(i[0]))return null;r=r[i[0]],t.push(r),i.shift()}return t}return null},l=function(e,t){var n,r,i,o,a=e.length-1,s=/^(\d+)/.exec(t);if(s){if(t=t.substr(s[0].length),i=parseInt(s[1],10),0>i||i>a)return;if(o=e[a-i],"#"===t)return o.key}else o=e[0];if(r=o.object[o.key],""===t)return r;if("/"===t.charAt(0)){for(t=t.substr(1),n=t.split("/");n.length>0;){if(n[0]=n[0].replace(/~1/g,"/").replace(/~0/g,"~"),!r.hasOwnProperty(n[0]))return;r=r[n[0]],n.shift()}return r}},f=function(e,t,o,a){var s,u,d,p,h,v,g,m,y,b,w,_,x,$=!1,S={},E=t.length-1,T=t[E],k=o.length-1,A=o[k].object,C=o[k].key,O=A[C];if(T.hasOwnProperty("$ref"))return t=c(e,t,T.$ref),t?f(e,t,o,a):{$ref:T.$ref};if(T.hasOwnProperty("type"))if("string"==typeof T.type){if(a.useCoerce&&e.coerceType.hasOwnProperty(T.type)&&(O=A[C]=e.coerceType[T.type](O)),!e.fieldType[T.type](O))return{type:T.type}}else{for($=!0,s=0,u=T.type.length;u>s&&$;s++)e.fieldType[T.type[s]](O)&&($=!1);if($)return{type:T.type}}if(T.hasOwnProperty("allOf"))for(s=0,u=T.allOf.length;u>s;s++)if(m=f(e,t.concat(T.allOf[s]),o,a))return m;if(a.useCoerce||a.useDefault||a.removeAdditional){if(T.hasOwnProperty("oneOf")){for(x=1/0,s=0,u=T.oneOf.length,d=0;u>s;s++)if(w=n(o),m=f(e,t.concat(T.oneOf[s]),w,a))_=m.schema?Object.keys(m.schema).length:1,x>_&&(x=_,S=m);else{if(d+=1,d>1)break;r(w,o)}if(d>1)return{oneOf:!0};if(1>d)return S;S={}}if(T.hasOwnProperty("anyOf")){for(S=null,x=1/0,s=0,u=T.anyOf.length;u>s;s++){if(w=n(o),m=f(e,t.concat(T.anyOf[s]),w,a),!m){r(w,o),S=null;break}_=m.schema?Object.keys(m.schema).length:1,x>_&&(x=_,S=m)}if(S)return S}if(T.hasOwnProperty("not")&&(w=n(o),m=f(e,t.concat(T.not),w,a),!m))return{not:!0}}else{if(T.hasOwnProperty("oneOf")){for(x=1/0,s=0,u=T.oneOf.length,d=0;u>s;s++)if(m=f(e,t.concat(T.oneOf[s]),o,a))_=m.schema?Object.keys(m.schema).length:1,x>_&&(x=_,S=m);else if(d+=1,d>1)break;if(d>1)return{oneOf:!0};if(1>d)return S;S={}}if(T.hasOwnProperty("anyOf")){for(S=null,x=1/0,s=0,u=T.anyOf.length;u>s;s++){if(m=f(e,t.concat(T.anyOf[s]),o,a),!m){S=null;break}_=m.schema?Object.keys(m.schema).length:1,x>_&&(x=_,S=m)}if(S)return S}if(T.hasOwnProperty("not")&&(m=f(e,t.concat(T.not),o,a),!m))return{not:!0}}if(T.hasOwnProperty("dependencies"))for(v in T.dependencies)if(T.dependencies.hasOwnProperty(v)&&O.hasOwnProperty(v))if(Array.isArray(T.dependencies[v])){for(s=0,u=T.dependencies[v].length;u>s;s++)if(!O.hasOwnProperty(T.dependencies[v][s]))return{dependencies:!0}}else if(m=f(e,t.concat(T.dependencies[v]),o,a))return m;if(Array.isArray(O)){if(T.hasOwnProperty("items"))if(Array.isArray(T.items)){for(s=0,u=T.items.length;u>s;s++)m=f(e,t.concat(T.items[s]),o.concat({object:O,key:s}),a),null!==m&&(S[s]=m,$=!0);if(O.length>u&&T.hasOwnProperty("additionalItems"))if("boolean"==typeof T.additionalItems){if(!T.additionalItems)return{additionalItems:!0}}else for(s=u,u=O.length;u>s;s++)m=f(e,t.concat(T.additionalItems),o.concat({object:O,key:s}),a),null!==m&&(S[s]=m,$=!0)}else for(s=0,u=O.length;u>s;s++)m=f(e,t.concat(T.items),o.concat({object:O,key:s}),a),null!==m&&(S[s]=m,$=!0);else if(T.hasOwnProperty("additionalItems")&&"boolean"!=typeof T.additionalItems)for(s=0,u=O.length;u>s;s++)m=f(e,t.concat(T.additionalItems),o.concat({object:O,key:s}),a),null!==m&&(S[s]=m,$=!0);if($)return{schema:S}}else{y=[],S={};for(v in O)O.hasOwnProperty(v)&&y.push(v);if(a.checkRequired&&T.required)for(s=0,u=T.required.length;u>s;s++)O.hasOwnProperty(T.required[s])||(S[T.required[s]]={required:!0},$=!0);if(p=T.hasOwnProperty("properties"),h=T.hasOwnProperty("patternProperties"),p||h)for(s=y.length;s--;){if(b=!1,p&&T.properties.hasOwnProperty(y[s])&&(b=!0,m=f(e,t.concat(T.properties[y[s]]),o.concat({object:O,key:y[s]}),a),null!==m&&(S[y[s]]=m,$=!0)),h)for(v in T.patternProperties)T.patternProperties.hasOwnProperty(v)&&y[s].match(v)&&(b=!0,m=f(e,t.concat(T.patternProperties[v]),o.concat({object:O,key:y[s]}),a),null!==m&&(S[y[s]]=m,$=!0));b&&y.splice(s,1)}if(a.useDefault&&p&&!$)for(v in T.properties)T.properties.hasOwnProperty(v)&&!O.hasOwnProperty(v)&&T.properties[v].hasOwnProperty("default")&&(O[v]=T.properties[v]["default"]);if(a.removeAdditional&&p&&T.additionalProperties!==!0&&"object"!=typeof T.additionalProperties)for(s=0,u=y.length;u>s;s++)delete O[y[s]];else if(T.hasOwnProperty("additionalProperties"))if("boolean"==typeof T.additionalProperties){if(!T.additionalProperties)for(s=0,u=y.length;u>s;s++)S[y[s]]={additional:!0},$=!0}else for(s=0,u=y.length;u>s;s++)m=f(e,t.concat(T.additionalProperties),o.concat({object:O,key:y[s]}),a),null!==m&&(S[y[s]]=m,$=!0);if($)return{schema:S}}for(g in T)T.hasOwnProperty(g)&&!i.hasOwnProperty(g)&&("format"===g?e.fieldFormat.hasOwnProperty(T[g])&&!e.fieldFormat[T[g]](O,T,o,a)&&(S[g]=!0,$=!0):e.fieldValidate.hasOwnProperty(g)&&!e.fieldValidate[g](O,T[g].hasOwnProperty("$data")?l(o,T[g].$data):T[g],T,o,a)&&(S[g]=!0,$=!0));return $?S:null},d={useDefault:!1,useCoerce:!1,checkRequired:!0,removeAdditional:!1};e.prototype={validate:function(e,t,n){var r=[e],i=null,o=[{object:{__root__:t},key:"__root__"}];if("string"==typeof e&&(r=c(this,null,e),!r))throw new Error("jjv: could not find schema '"+e+"'.");if(n)for(var a in this.defaultOptions)this.defaultOptions.hasOwnProperty(a)&&!n.hasOwnProperty(a)&&(n[a]=this.defaultOptions[a]);else n=this.defaultOptions;return i=f(this,r,o,n),i?{validation:i.hasOwnProperty("schema")?i.schema:i}:null},resolveRef:function(e,t){return c(this,e,t)},addType:function(e,t){this.fieldType[e]=t},addTypeCoercion:function(e,t){this.coerceType[e]=t},addCheck:function(e,t){this.fieldValidate[e]=t},addFormat:function(e,t){this.fieldFormat[e]=t},addSchema:function(e,t){if(!t&&e&&(t=e,e=void 0),t.hasOwnProperty("id")&&"string"==typeof t.id&&t.id!==e){if("/"===t.id.charAt(0))throw new Error("jjv: schema id's starting with / are invalid.");this.schema[u(t.id)]=t}else if(!e)throw new Error("jjv: schema needs either a name or id attribute.");e&&(this.schema[u(e)]=t)}},"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=e:"function"==typeof define&&define.amd?define("jjv",[],function(){return e}):this.jjv=e}.call(this),function(){function e(r){var i=[],o=Object.keys(r.validation),a=o.every(function(e){return"object"!=typeof r.validation[e]||n(r.validation[e])});return o.forEach(a?function(e){var t,o;try{switch(e){case"type":var a=typeof r.data;"number"===a&&(""+r.data).match(/^\d+$/)?a="integer":"object"===a&&Array.isArray(r.data)&&(a="array"),t={code:"INVALID_TYPE",message:"Invalid type: "+a+" should be "+(n(r.validation[e])?"one of ":"")+r.validation[e]};break;case"required":o=r.ns.split(r.sep),t={code:"OBJECT_REQUIRED",message:"Missing required property: "+o[o.length-1]};break;case"minimum":t={code:"MINIMUM",message:"Value "+r.data+" is less than minimum "+r.schema.minimum};break;case"maximum":t={code:"MAXIMUM",message:"Value "+r.data+" is greater than maximum "+r.schema.maximum};break;case"multipleOf":t={code:"MULTIPLE_OF",message:"Value "+r.data+" is not a multiple of "+r.schema.multipleOf};break;case"pattern":t={code:"PATTERN",message:"String does not match pattern: "+r.schema.pattern};break;case"minLength":t={code:"MIN_LENGTH",message:"String is too short ("+r.data.length+" chars), minimum "+r.schema.minLength};break;case"maxLength":t={code:"MAX_LENGTH",message:"String is too long ("+r.data.length+" chars), maximum "+r.schema.maxLength};break;case"minItems":t={code:"ARRAY_LENGTH_SHORT",message:"Array is too short ("+r.data.length+"), minimum "+r.schema.minItems};break;case"maxItems":t={code:"ARRAY_LENGTH_LONG",message:"Array is too long ("+r.data.length+"), maximum "+r.schema.maxItems};break;case"uniqueItems":t={code:"ARRAY_UNIQUE",message:"Array items are not unique"};break;case"minProperties":t={code:"OBJECT_PROPERTIES_MINIMUM",message:"Too few properties defined ("+Object.keys(r.data).length+"), minimum "+r.schema.minProperties};break;case"maxProperties":t={code:"OBJECT_PROPERTIES_MAXIMUM",message:"Too many properties defined ("+Object.keys(r.data).length+"), maximum "+r.schema.maxProperties};break;case"enum":t={code:"ENUM_MISMATCH",message:"No enum match ("+r.data+"), expects: "+r.schema["enum"].join(", ")};break;case"not":t={code:"NOT_PASSED",message:'Data matches schema from "not"'};break;case"additional":o=r.ns.split(r.sep),t={code:"ADDITIONAL_PROPERTIES",message:"Additional properties not allowed: "+o[o.length-1]}}}catch(s){}if(!t){t={code:"FAILED",message:"Validation error: "+e};try{"boolean"!=typeof r.validation[e]&&(t.message=" ("+r.validation[e]+")")}catch(s){}}t.code="VALIDATION_"+t.code,void 0!==r.data&&(t.data=r.data),t.path=r.ns,i.push(t)}:function(n){var o;r.schema.$ref&&(r.schema=r.schema.$ref.match(/#\/definitions\//)?r.definitions[r.schema.$ref.slice(14)]:r.schema.$ref,"string"==typeof r.schema&&(r.schema=r.env.resolveRef(null,r.schema),r.schema&&(r.schema=r.schema[0]))),r.schema&&r.schema.type&&(t(r.schema,"object")&&(r.schema.properties&&r.schema.properties[n]&&(o=r.schema.properties[n]),!o&&r.schema.patternProperties&&Object.keys(r.schema.patternProperties).some(function(e){return n.match(new RegExp(e))?(o=r.schema.patternProperties[e],!0):void 0}),!o&&r.schema.hasOwnProperty("additionalProperties")&&(o="boolean"==typeof r.schema.additionalProperties?{}:r.schema.additionalProperties)),t(r.schema,"array")&&(o=r.schema.items));var a=n.match(/^\d+$/),s={env:r.env,schema:o||{},ns:r.ns+(a?"["+n+"]":r.sep+n),sep:r.sep};try{s.data=r.data[n]}catch(u){}try{s.validation=r.validation[n].schema?r.validation[n].schema:r.validation[n]}catch(u){s.validation={}}try{s.definitions=o.definitions||r.definitions}catch(u){s.definitions=r.definitions}i=i.concat(e(s))}),i}function t(e,t){return"string"==typeof e.type?e.type===t:n(e.type)?-1!==e.type.indexOf(t):!1}function n(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function r(t){return function(n,r,i,o){return i&&i.validation?(o=o||{},o.hasOwnProperty("root")||(o.root="$"),o.hasOwnProperty("sep")||(o.sep="."),"string"==typeof n&&(n=t.schema[n]),e({env:t,schema:n,data:r,validation:i.validation,sep:o.sep,ns:o.root,definitions:n.definitions||{}})):[]}}"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=r:"function"==typeof define&&define.amd?define("jjve",[],function(){return r}):this.jjve=r}.call(this),define("laxar/lib/json/schema",["../utilities/object"],function(e){function t(n,i,o,a){var s={};if(Object.keys(n).forEach(function(u){var c=n[u];switch(u){case"required":if(c!==!0)break;!r(i,a)||"default"in n||("required"in o||(o.required=[]),o.required.push(i));break;case"items":s[u]=t(c,u,s,n);break;case"additionalProperties":s[u]="object"==typeof c?t(c,u,s,n):c;break;case"properties":case"patternProperties":s[u]=e.map(c,function(e,r){return[r,t(e,r,s,n)]});break;default:s[u]=c}}),r(i,a)&&!n.required){var u=s.type;"string"==typeof u&&"null"!==u?s.type=[u,"null"]:Array.isArray(u)&&-1===u.indexOf("null")&&u.push("null")}return s}function n(e){!("properties"in e||"patternProperties"in e)||"additionalProperties"in e||(e.additionalProperties=!1),"properties"in e&&Object.keys(e.properties).forEach(function(t){n(e.properties[t])}),"additionalProperties"in e&&"object"==typeof e.additionalProperties&&n(e.additionalProperties),"patternProperties"in e&&Object.keys(e.patternProperties).forEach(function(t){n(e.patternProperties[t])}),"items"in e&&n(e.items)}function r(t,n){return n&&i(n,"object")&&e.path(n,"properties."+t)}function i(e,t){var n=e.type;return"string"==typeof n?n===t:Array.isArray(n)?-1!==n.indexOf(t):!0}return{transformV3ToV4:function(e){return t(e)},prohibitAdditionalProperties:function(e){n(e)}}}),define("laxar/lib/json/validator",["jjv","jjve","./schema","../utilities/object"],function(e,t,n,r){function i(e,n,i,o){if(!e)return{errors:[]};var a=t(o);return{errors:a(n,i,e).map(function(e){return r.options({message:e.message+'. Path: "'+e.path+'".'},e)})}}var o="http://json-schema.org/draft-04/schema#";return{create:function(t,a){var s=e();a=r.options(a,{prohibitAdditionalProperties:!1}),s.defaultOptions=r.options(a,s.defaultOptions),"$schema"in t&&t.$schema===o||(t=n.transformV3ToV4(t),t.$schema=o,s.addType("any",function(){return!0})),a.prohibitAdditionalProperties&&n.prohibitAdditionalProperties(t);var u=s.validate;return s.validate=function(e){var n=u.call(s,t,e);return i(n,t,e,s)},s},JSON_SCHEMA_V4_URI:o}}),define("laxar/lib/utilities/timer",["./object","./storage","../logging/log"],function(e,t,n){function r(t){this.options_=e.options(t,{label:"timer"+u++,persistenceKey:null}),this.startTime_=null,this.stopTime_=null,this.splitTimes_=[]}function i(){return(new Date).getTime()}function o(e){e.options_.persistenceKey&&c.setItem(e.options_.persistenceKey,{options:e.options_,startTime:e.startTime_,stopTime:e.stopTime_,splitTimes:e.splitTimes_})}function a(e){if(e.options_.persistenceKey){var t=c.getItem(e.options_.persistenceKey);if(t)return e.options_=t.options,e.startTime_=t.startTime,e.stopTime_=t.stopTime,e.splitTimes_=t.splitTimes,!0}return!1}function s(e){e.options_.persistenceKey&&c.removeItem(e.options_.persistenceKey)}var u=0,c=t.getSessionStorage("timer");return r.prototype.getData=function(){return{label:this.options_.label,startTime:this.startTime_,stopTime:this.stopTime_,splitTimes:e.deepClone(this.splitTimes_)}},r.prototype.start=function(){this.startTime_=i(),o(this)},r.prototype.splitTime=function(e){this.splitTimes_.push({time:i(),label:e||"split"+this.splitTimes_.length}),o(this)},r.prototype.stop=function(){this.stopTime_=i(),s(this)},r.prototype.stopAndLog=function(e){this.stop();var t=this.startTime_,r=i(),o=e||"Timer Stopped";this.splitTimes_.push({label:o,time:r});var a=[];a.push('Timer "',this.options_.label,'": '),a.push("start at ",new Date(t).toISOString()," (client), "),a.push(o," after ",(r-t).toFixed(0),"ms "),a.push("(checkpoints: ");var s=[];this.splitTimes_.reduce(function(e,t){return s.push('"'+t.label+'"='+(t.time-e).toFixed(0)+"ms"),t.time},t),a.push(s.join(", "),")"),n.info(a.join(""))},{started:function(e){var t=new r(e);return t.start(),t},resumedOrStarted:function(e){var t=new r(e);return a(t)||t.start(),t}}}),define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,o=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,a="undefined"!=typeof location&&location.href,s=a&&location.protocol&&location.protocol.replace(/\:/,""),u=a&&location.hostname,c=a&&(location.port||void 0),l=[],f=e.config&&e.config()||{};return t={version:"2.0.5",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(o);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,o=e.indexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!a||o>1)?(t=e.substring(0,o),n=e.substring(o+1,e.length)):t=e,r=n||t,o=r.indexOf("!"),-1!==o&&(i="strip"===r.substring(o+1),r=r.substring(0,o),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var o,a,s,u=t.xdRegExp.exec(e);return u?(o=u[2],a=u[3],a=a.split(":"),s=a[1],a=a[0],!(o&&o!==n||a&&a.toLowerCase()!==r.toLowerCase()||(s||a)&&s!==i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,f.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText)return void r();f.isBuild=i.isBuild;var o=t.parseName(e),l=o.moduleName+(o.ext?"."+o.ext:""),d=n.toUrl(l),p=f.useXhr||t.useXhr;!a||p(d,s,u,c)?t.get(d,function(n){t.finishLoad(e,o.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,r)})},write:function(e,n,r){if(l.hasOwnProperty(n)){var i=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,n,r,i,o){var a=t.parseName(n),s=a.ext?"."+a.ext:"",u=a.moduleName+s,c=r.toUrl(a.moduleName+s)+".js";t.load(u,r,function(){var n=function(e){return i(c,e)};n.asModule=function(e,t){return i.asModule(e,c,t)},t.write(e,u,n,o)},o)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");0===r.indexOf("﻿")&&(r=r.substring(1)),t(r)}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,n,r,i){var o,a=t.createXhr();if(a.open("GET",e,!0),i)for(o in i)i.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),i[o]);f.onXhr&&f.onXhr(a,e),a.onreadystatechange=function(){var t,i;4===a.readyState&&(t=a.status,t>399&&600>t?(i=new Error(e+" HTTP status: "+t),i.xhr=a,r(i)):n(a.responseText))},a.send(null)}:("rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java)&&(t.get=function(e,t){var n,r,i="utf-8",o=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),i)),u="";try{for(n=new java.lang.StringBuffer,r=s.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),n.append(r);null!==(r=s.readLine());)n.append(a),n.append(r);u=String(n.toString())}finally{s.close()}t(u)}),t}),define("json",["text"],function(text){function cacheBust(e){return e=e.replace(CACHE_BUST_FLAG,""),e+=e.indexOf("?")<0?"?":"&",e+CACHE_BUST_QUERY_PARAM+"="+Math.round(2147483647*Math.random())}var CACHE_BUST_QUERY_PARAM="bust",CACHE_BUST_FLAG="!bust",jsonParse="undefined"!=typeof JSON&&"function"==typeof JSON.parse?JSON.parse:function(val){return eval("("+val+")")},buildMap={};return{load:function(e,t,n,r){!r.isBuild||r.inlineJSON!==!1&&-1===e.indexOf(CACHE_BUST_QUERY_PARAM+"=")?text.get(t.toUrl(e),function(t){r.isBuild?(buildMap[e]=t,n(t)):n(jsonParse(t))},n.error,{accept:"application/json"}):n(null)},normalize:function(e){return-1===e.indexOf(CACHE_BUST_FLAG)?e:cacheBust(e)},write:function(e,t,n){if(t in buildMap){var r=buildMap[t];n('define("'+e+"!"+t+'", function(){ return '+r+";});\n")}}}}),define("json!laxar/static/schemas/flow.json",function(){return{type:"object",required:!0,properties:{places:{type:"object",description:"The places for this flow",required:!0,patternProperties:{"[a-z][a-zA-Z0-9_]*":{type:"object",properties:{redirectTo:{type:"string"},page:{type:"string"},targets:{type:"object",patternProperties:{"[a-z][a-zA-Z0-9_]*":{type:"string"}}},entryPoints:{type:"object",patternProperties:{"[a-z][a-zA-Z0-9_]*":{type:"string"}}},exitFunction:{type:"string"},triggerBrowserReload:{type:"boolean","default":!1}},additionalProperties:!1}}}},additionalProperties:!1}}),define("laxar/lib/portal/modules/flow",["angular","angular-route","../../logging/log","../../json/validator","../../utilities/object","../../utilities/timer","../paths","json!../../../static/schemas/flow.json"],function(e,t,n,r,i,o,a,s){function u(e,t){var n={},r=t.fixedParameters||e;return i.forEach(t.expectedParameters,function(e){n[e]=y(r[e])}),n}function c(e,t){var n=T[e],r="/"+e;return i.forEach(n.expectedParameters,function(e){r+="/"+m(t[e])}),r}function l(e,t){var r=i.path(t,"targets."+e,e);return r in T?r:void n.error('Unknown target or place "[0]".',e)}function f(e){return v(e).then(function(e){T=h(e),i.forEach(T,function(e,t){d(t,e)}),b.otherwise({redirectTo:"/entry"})})}function d(e,t){return t.redirectTo?void b.when("/"+e,{redirectTo:t.redirectTo}):t.entryPoints?void b.when("/"+e,{redirectTo:p(t.entryPoints)}):void b.when("/"+e,{template:"<!---->",controller:"portal.FlowController",resolve:{place:function(){return t}}})}function p(e){var t=E||{target:"default",parameters:{}},n=e[t.target];if(n){var r=T[n],o=n,a=t.parameters||{};return i.forEach(r.expectedParameters,function(e){o+="/"+m(a[e])}),o}}function h(e){var t={};return i.forEach(e,function(e,n){e.expectedParameters=[],e.id=n,e.targets||(e.targets={}),e.targets[j]||(e.targets[j]=n.split(/\/:/)[0]);
for(var r;r=L.exec(n);){var i=n.substr(0,r.index);e.expectedParameters.push(r[1]),t[i]=e}t[n]=e}),t}function v(e){return _.get(e).then(function(e){var t=e.data;return g(t),t.places},function(t){throw new Error('Failed to load "'+e+'". Cause: '+t)})}function g(e){var t=r.create(s).validate(e);if(t.errors.length)throw t.errors.forEach(function(e){n.error("[0]",e.message)}),new Error("Illegal flow.json format")}function m(e){return null==e?"_":"string"==typeof e?e.replace(/\//g,"%2F"):e}function y(e){return null==e||""===e||"_"===e?null:"string"==typeof e?e.replace(/%2F/g,"/"):e}var b,w=e.module("laxar.portal.flow",["ngRoute"]);w.config(["$routeProvider",function(e){b=e}]);var _,x,$,S,E;w.run(["$route","$http","$q","Configuration","FileResourceProvider",function(e,t,n,r,i){_=t,$=i,x=n,E=r.get("portal.flow.entryPoint"),S=r.get("portal.flow.exitPoints"),f(a.FLOW_JSON).then(function(){e.reload()})}]);var T,k,A,C,O="navigationTimer",j="_self",N=j,D=!1,R={sender:"FlowController"},q={subscriber:"FlowController"};w.controller("portal.FlowController",["$window","$location","$routeParams","$rootScope","place","EventBus","axPageService",function(e,t,r,a,s,f,d){function p(e,n){if(!D){D=!0,N=e.target;var r=l(e.target,s),a=i.extend({},k||{},e.data||{}),u=T[r];if(C=o.started({label:["navigation (",s?s.targets._self:""," -> ",u.targets._self,")"].join(""),persistenceKey:O}),u.triggerBrowserReload||e.triggerBrowserReload)return void h(r,a);var f=c(r,a);f!==t.path()?(t.path(f),n.unsubscribe()):D=!1}}function h(n,r){f.publish("willNavigate."+N,w,R).then(function(){return d.controller().tearDownPage()}).then(function(){var i=c(n,r),o=""+e.location.href,a=o.split("#")[0]+"#"+i;t.absUrl=function(){return e.location.href},e.location.href=a,e.location.reload()})}function v(e,t){return f.subscribe("navigateRequest",p,q),n.context.setTag("PLCE",s.id),A=p,D=!1,f.publish("didNavigate."+e,t,R)}A&&(f.unsubscribe(A),A=null);var g=a.place,m=s.page;if(a.place=s,"string"==typeof s.exitFunction){var y=s.exitFunction;if(S&&"function"==typeof S[y]){var b=u(r,s);return void S[y](b)}throw new Error('Exitpoint "'+y+'" does not exist.')}D=!0;var w={target:N},_=i.options({data:{},place:s.id},w);f.publish("willNavigate."+N,w,R).then(function(){var e=u(r,s);return _.data=e,k=e,s===g?v(N,_):d.controller().tearDownPage().then(function(){return C=o.resumedOrStarted({label:["loadTimer (",s.target?s.target._self:s.id,")"].join(""),persistenceKey:O}),d.controller().setupPage(m)}).then(function(){return v(N,_)}).then(function(){C.stopAndLog("didNavigate")})}).then(null,function(e){n.error(e)})}]);var L=/\/:([^\/]+)/gi;return w}),define("laxar/lib/portal/portal_assembler/features_provider",["../../json/validator","../../utilities/object","../../utilities/string"],function(e,t){function n(e,n,o){if(!e.features)return{};var a=n.features||{},s=e.features;"$schema"in s||(s={$schema:"http://json-schema.org/draft-03/schema#",type:"object",properties:e.features}),t.forEach(e.features,function(e,t){"object"!==e.type||t in a||(a[t]={})});var u=i(s),c=u.validate(a);if(c.errors.length>0){var l="Validation for widget features failed. Errors: ";c.errors.forEach(function(e){l+="\n - "+e.message.replace(/\[/g,"\\[")}),o(l)}return r(a,s),a}function r(e,n){n.properties&&Object.keys(n.properties).forEach(function(r){var i=n.properties[r],o=e[r];"properties"in i&&Object.keys(i.properties).forEach(function(n){var a=i.properties[n];!("default"in a)||o&&n in o||t.setPath(e,r+"."+n,a["default"])})})}function i(t){var n=e.create(t,{prohibitAdditionalProperties:!0,useDefault:!0});return n.addFormat("sub-topic",function(e){return"string"!=typeof e||a.test(e)}),n.addFormat("topic",function(e){return"string"!=typeof e||s.test(e)}),n.addFormat("flag-topic",function(e){return"string"!=typeof e||u.test(e)}),n.addFormat("language-tag",function(e){return"string"!=typeof e||c.test(e)}),n.addFormat("topic-map",function(e){return"object"!=typeof e||Object.keys(e).every(function(e){return s.test(e)})}),n.addFormat("localization",function(e){return"object"!=typeof e||Object.keys(e).every(function(e){return c.test(e)})}),n}var o="([a-z][+a-zA-Z0-9]*|[A-Z][+A-Z0-9]*)",a=new RegExp("^"+o+"$"),s=new RegExp("^("+o+"(-"+o+")*)$"),u=new RegExp("^[!]?("+o+"(-"+o+")*)$"),c=/^[a-z]{2,8}([-_][a-z0-9]{2,8})*([-_][a-z0-9][-_][a-z0-9]{2,8})*$/i;return{featuresForWidget:n}}),define("json!../../../static/schemas/page.json",function(){return{type:"object",properties:{layout:{type:"string"},"extends":{type:"string"},areas:{type:"object",patternProperties:{"^[a-z][\\.a-zA-Z0-9_]*$":{type:"array",items:{type:"object",properties:{widget:{type:"string"},mixin:{type:"string"},composition:{type:"string"},id:{type:"string",pattern:"^[a-z][a-zA-Z0-9_]*$"},insertBeforeId:{type:"string"},features:{type:"object"},enabled:{type:"boolean","default":!0}},additionalProperties:!1}}},additionalProperties:!1}},additionalProperties:!1}}),define("laxar/lib/portal/portal_assembler/page_loader",["../../utilities/assert","../../utilities/object","../../utilities/string","../../utilities/path","../../json/validator","./features_provider","json!../../../static/schemas/page.json"],function(e,t,n,r,i,o,a){function s(e,t,n,r){this.q_=e,this.httpClient_=t,this.baseUrl_=n,this.fileResourceProvider_=r,this.idCounter_=0}function u(e,t,n){var r,i=_(e.baseUrl_,t);return-1!==n.indexOf(t)&&T({name:t},"Cycle in page extension detected: "+n.concat([t]).join(" -> ")),$(e,i).then(function(e){b(e,t),r=e,r.name=t.replace(k,""),r.selfLink=i,r.areas||(r.areas={})},function(){T({name:t},'Page could not be found at location "'+i+'"')}).then(function(){return c(e,r,n)}).then(function(){return f(e,r,[],r)}).then(function(){return m(e,r)}).then(function(){return y(e,r)}).then(function(){return r})}function c(e,t,n){return x(t,"extends")?u(e,t["extends"],n.concat([t.name])).then(function(e){l(t,e)}):void 0}function l(e,r){var i=e.areas,o=t.deepClone(r.areas);x(r,"layout")&&(x(e,"layout")&&T(e,n.format('Page overwrites layout set by base page "[name]',r)),e.layout=r.layout),t.forEach(i,function(t,n){return n in o?void w(o[n],t,e):void(o[n]=t)}),e.areas=o}function f(e,n,r,i){var o=e.q_.when(),a={};return t.forEach(n.areas,function(t){for(var s=t.length-1;s>=0;--s)!function(s,u){if(x(s,"composition")){if(s.enabled===!1)return;var c=s.composition;if(-1!==r.indexOf(c)){var l="Cycle in compositions detected: "+r.concat([c]).join(" -> ");T(i,l)}if(!x(s,"id")){var v=s.composition.replace(A,"_");s.id=S(e,v)}s.id in a?a[s.id]++:a[s.id]=1,o=o.then(function(){return $(e,_(e.baseUrl_,c))}).then(function(e){return p(e,s)}).then(function(e){return h(e,s,T.bind(null,i))}).then(function(t){var n=r.concat(c);return f(e,t,n,i).then(function(){return t})}).then(function(e){d(e,n,t,u)})}}(t[s],s)}),g(n,a),o}function d(e,n,r,i){t.forEach(e.areas,function(e,t){return"."===t?void E(r,i,e):t in n.areas?void w(n.areas[t],e,n):void(n.areas[t]=e)})}function p(e,n){return e.areas=t.map(e.areas,function(e,t){return e.forEach(function(e){x(e,"id")&&(e.id=n.id+"__"+e.id)}),t.indexOf(".")>0?[n.id+"__"+t,e]:[t,e]}),e}function h(e,r,i){function a(e){var i=e.match(C);if(!i)return e;var o,a=i[1],u=i[2];return 0===u.indexOf(O)?(o=n.removeUnderscoresFromCamelCase(r.id),o+=n.capitalize(u.substr(O.length))):o=t.path(s,u),"string"==typeof o&&a?a+o:o}var s={};if(e.features=v(e.features||{},a),s.features=o.featuresForWidget(e,r,i),"object"==typeof e.mergedFeatures){var u=v(e.mergedFeatures,a);Object.keys(u).forEach(function(e){var n=t.path(s.features,e,[]),r=u[e];t.setPath(s.features,e,r.concat(n))})}return e.areas=v(e.areas,a),e}function v(e,n){if(null===e)return e;if(Array.isArray(e))return e.map(function(e){return"object"==typeof e?v(e,n):"string"==typeof e?n(e):e}).filter(function(e){return"undefined"!=typeof e});var r=[],i=t.map(e,function(e,t){var i=n(t);if("object"==typeof e)return[i,v(e,n)];var o="string"==typeof e?n(e):e;return"undefined"==typeof o&&r.push(i),[i,o]});return r.forEach(function(e){delete i[e]}),i}function g(e,t){var n=Object.keys(t).filter(function(e){return t[e]>1});n.length&&T(e,"Duplicate composition ID(s): "+n.join(", "))}function m(e,n){var r=e.q_.when();return t.forEach(n.areas,function(t){for(var n=t.length-1;n>=0;--n)!function(n,i){if(x(n,"mixin")){if(n.enabled===!1)return;var o=_(e.baseUrl_,n.mixin),a=$(e,o);r=r.then(function(){return a}).then(function(e){E(t,i,e.widgets)})}}(t[n],n)}),r}function y(e,n){var r={};t.forEach(n.areas,function(t,i){n.areas[i]=t.filter(function(t){return t.enabled===!1?!1:(x(t,"widget")&&(x(t,"id")||(t.id=S(e,t.widget.split("/").pop())),r[t.id]=r[t.id]?r[t.id]+1:1),!0)})});var i=Object.keys(r).filter(function(e){return r[e]>1});i.length&&T(n,"Duplicate widget ID(s): "+i.join(", "))}function b(e,t){var n=i.create(a).validate(e);if(n.errors.length){var r=n.errors.reduce(function(e,t){return e+"\n - "+t.message},"");T({name:t},"Schema validation failed: "+r)}}function w(e,t,r){t.forEach(function(t){if(t.insertBeforeId){for(var i=0,o=e.length;o>i;++i)if(e[i].id===t.insertBeforeId)return void e.splice(i,0,t);T(r,n.format('No id found that matches insertBeforeId value "[insertBeforeId]"',t))}e.push(t)})}function _(e,t){return t.match(k)||(t+=".json"),r.join(e,t)}function x(e,t){return"string"==typeof e[t]&&e[t].length}function $(e,t){return e.fileResourceProvider_?e.fileResourceProvider_.provide(t):e.httpClient_.get(t).then(function(e){return e.data})}function S(e,t){return t+"__id"+e.idCounter_++}function E(e,t,n){e.splice.apply(e,[t,1].concat(n))}function T(e,t){var r=n.format('Error loading page "[name]": [0]',[t],e);throw new Error(r)}var k=/\.json$/,A=/\//g,C=/^(!?)\$\{([^}]+)\}$/,O="topic:";return s.prototype.loadPage=function(e){return u(this,e,[])},{create:function(t,n,r,i){return e(t).isNotNull(),null===i&&e(n).isNotNull(),e(r).isNotNull(),new s(t,n,r,i)}}}),define("laxar/lib/json/json_patch_compatibility",[],function(){function e(e){var t={};return e.forEach(function(e){var n=e.path.substr(1).replace(/\//g,".");switch(e.op){case"add":case"replace":t[n]=e.value;break;case"remove":t[n]=null;break;default:throw new Error('Unsupported operation "'+e.op+'".')}}),t}function t(e){return Object.keys(e).map(function(t){var n="/"+t.replace(/\./g,"/");return null===e[t]?{op:"remove",path:n}:{op:"replace",path:n,value:e[t]}})}return{jsonPatchToUpdatesMap:e,updatesMapToJsonPatch:t}}),define("laxar/lib/portal/portal_assembler/widget_adapters/native_adapter",["../../../utilities/assert"],function(e){function t(){e.codeIsUnreachable("The native widget adapter has not been implemented yet.")}return{create:t}}),define("laxar/lib/portal/portal_assembler/widget_adapters/angular_adapter",["angular","require","../../../utilities/assert","../../../utilities/path","../../paths"],function(e,t,n,r,i){function o(t,r,i,o,c,f){function d(e,t){n(e).hasType(Object).isNotNull(),n(e.eventBus).hasType(Object).isNotNull(),n(e.idGenerator).hasType(Function).isNotNull(),n(t).hasType(Object).isNotNull(),b=e,y=t.anchorScope.$new(),y.eventBus=e.eventBus,y.id=e.idGenerator,y.widget={area:c.area,id:c.id,path:c.widget},y.features=o;var r="widgets."+c.widget.replace(/\//g,".")+".Controller";u(r,{$scope:y,axEventBus:e.eventBus})}function p(){return w||(w=a(t,c,i).then(function(t){return t.cssFileUrls.forEach(function(e){l.load(e)}),t.templateUrl?(_=!0,r.provide(t.templateUrl).then(function(t){var n=e.element(f);n.html(t)})):void 0})),w}function h(e){_&&(e.appendChild(f),s(f)(y))}function v(){_&&f.parentNode.removeChild(f)}function g(){return c.id}function m(){w=null,b.release(),y.$destroy()}n(t).isNotNull(),n(r).hasType(Object).isNotNull(),n(i).hasType(Object).isNotNull(),n(o).hasType(Object).isNotNull(),n(c).hasType(Object).isNotNull(),n(f).isNotNull();var y,b,w,_=!1;return{createController:d,domPrepare:p,domAttachTo:h,domDetach:v,widgetId:g,destroy:m}}function a(e,n,o){var a=n.widget.split("/").pop(),s=r.join(i.WIDGETS,n.widget),u=a+".html",l=r.join("css/",a+".css"),f=[];return f.push(c.urlProvider(r.join(i.THEMES,"[theme]","widgets",n.widget),r.join(s,"[theme]")).provide([u,l])),f=f.concat((o.controls||[]).map(function(e){var n=e.split("/").pop();return c.urlProvider(r.join(i.THEMES,"[theme]",e),r.join(t.toUrl(e),"[theme]")).provide([r.join("css/",n+".css")])})),e.all(f).then(function(e){var t=e[0],n=e.slice(1).map(function(e){return e[0]}).concat(t.slice(1)).filter(function(e){return!!e});return{templateUrl:t[0]||"",cssFileUrls:n}})}var s,u,c,l,f=e.module("laxar.portal.angular_adapter",[]);return f.run(["$compile","$controller","ThemeManager","CssLoader",function(e,t,n,r){u=t,s=e,c=n,l=r}]),{create:o,module:f}}),define("laxar/lib/portal/portal_assembler/widget_loader",["../../json/json_patch_compatibility","../../logging/log","../../utilities/path","../../utilities/assert","../../utilities/object","../../utilities/string","../paths","./features_provider","./widget_adapters/native_adapter","./widget_adapters/angular_adapter"],function(e,t,n,r,i,o,a,s,u,c){function l(e,o,u,c){function l(r){var l=n.join(a.WIDGETS,r.widget,"widget.json"),b=o.provide(l);return b.then(function(t){var n=i.options(t.integration,{type:g,technology:y}),a=n.type,l=n.technology;a===y&&(a=g),l in v||d(r,"unknown integration technology "+l),a!==g&&a!==m&&d(r,"unknown integration type "+a);var b=d.bind(null,r),w=s.featuresForWidget(t,r,b),_=document.createElement("DIV");_.className=f(t.name),_.id="widget__"+r.id;var x=v[l].create(e,o,t,w,r,_),$={eventBus:h(u,t,r),idGenerator:p(r.id),release:function(){$.eventBus.release()}};return x.createController($,c),x},function(e){var n="Could not load spec for widget [0] from [1]: [2]";t.error(n,r.widget,l,e)})}r(e).isNotNull(),r(o).hasType(Object).isNotNull(),r(c).hasType(Object).isNotNull(),r(c.theme).hasType(String).isNotNull();var v=i.options(c.adapters,_);return{load:l}}function f(e){return e.replace(/[A-Z]/g,function(e,t){return(t>0?"-":"")+e.toLowerCase()})}function d(e,t){throw new Error(o.format('Error loading widget "[widget]" (id: "[id]"): [0]',[t],e))}function p(e){function t(e){return String.fromCharCode(n+e.charCodeAt(0)%26)}var n="a".charCodeAt(0),r=("widget__"+e+"_").replace(w,t);return function(e){return r+(""+e).replace(w,t)}}function h(e,n,r){function o(t){return function(){return e[t].apply(e,arguments)}}function a(e){return i.options(e,{sender:u})}function s(t){"function"==typeof t.__compatibilitySubscriber?(e.unsubscribe(t.__compatibilitySubscriber),delete t.__compatibilitySubscriber):e.unsubscribe(t)}var u="widget."+n.name+"#"+r.id,c=-1!==(n.compatibility||[]).indexOf("json-patch"),l=[];return{addInspector:o("addInspector"),setErrorHandler:o("setErrorHandler"),setMediator:o("setMediator"),unsubscribe:s,subscribe:function(t,n,r){0===t.indexOf("didUpdate.")&&(n=v(c,n)),l.push(n);var o=i.options(r,{subscriber:u});e.subscribe(t,n,o)},publish:function(n,r,i){return 0===n.indexOf("didUpdate.")&&r&&"data"in r&&t.develop('Widget "[0]" published didUpdate-event using deprecated attribute "data" (event: [1]).\n   Change this to "patches" immediately.',u,n),e.publish(n,r,a(i))},publishAndGatherReplies:function(t,n,r){return e.publishAndGatherReplies(t,n,a(r))},release:function(){l.forEach(s)}}}function v(t,n){if("function"==typeof n.__compatibilitySubscriber)return n.__compatibilitySubscriber;var r=function(r,i){return t||!("patches"in r)||"updates"in r?!t||"patches"in r||(r.patches=[],"data"in r&&r.patches.push({op:"replace",path:"",value:r.data}),"updates"in r&&(r.patches=r.patches.concat(e.updatesMapToJsonPatch(r.updates)))):r.updates=e.jsonPatchToUpdatesMap(r.patches),n(r,i)};return n.__compatibilitySubscriber=r,r}var g="widget",m="activity",y="angular",b="native",w=/[^A-Za-z0-9-_\.]/g,_={};return _[y]=c,_[b]=u,{create:l}}),define("laxar/lib/portal/modules/area_helper",["angular","jquery"],function(e,t){function n(n,r,i){function o(e,t){t&&p&&f(e),i._updateState(e,t)}function a(e){return m[e]}function s(e){return y[e]}function u(e,t){if(e in h)throw new Error('The area "'+e+'" is defined twice in the current layout.');return h[e]=t,p&&i.isVisible(e)&&f(e),function(){delete h[e]}}function c(e){return e in h}function l(t){p=!0,t.forEach(function(e){var t=g[e.widgetId()];v[t]=v[t]||[],v[t].push(e)}),e.forEach(r.areas,function(e,t){i.isVisible(t)&&f(t)})}function f(e){var r=v[e];if(r&&r.length){var i=h[e];i&&(n.all(r.map(function(e){return e.domPrepare()})).then(function(){var e=i.lastChild;e&&t(e).removeClass("last");var n=i.firstChild;if(r.forEach(function(e){e.domAttachTo(i)}),!n){var o=i.firstChild;o&&(o.className+=" first")}var a=i.lastChild;a&&(a.className+=" last")}),delete v[e])}}var d={setVisibility:o,areasInArea:a,areasInWidget:s,register:u,exists:c,attachWidgets:l};i._reset();var p=!1,h={},v={},g={};e.forEach(r.areas,function(e,t){e.forEach(function(e){g[e.id]=t})});var m={},y={};return e.forEach(r.areas,function(e,t){var n="";if(-1!==t.indexOf(".")){var r=t.split(".")[0];y[r]=y[r]||[],y[r].push(t),n=g[r]}m[n]=m[n]||[],m[n].push(t)}),d}return n}),define("laxar/lib/portal/modules/locale_event_manager",["../../utilities/object"],function(e){function t(t,n,o){function a(e){f[e.locale]=e.languageTag,d&&s(e.locale)}function s(e){var t={locale:e,languageTag:f[e]};return n.publish("didChangeLocale."+e,t,r)}function u(){return d=!0,t.all(Object.keys(h).map(s))}function c(){n.unsubscribe(a)}function l(){f=e.deepClone(h),d=!1,n.subscribe("changeLocaleRequest",a,i)}var f,d,p={initialize:u,subscribe:l,unsubscribe:c},h=o.get("i18n.locales");return p}var n="axPageController",r={sender:n},i={subscriber:n};return t}),define("laxar/lib/portal/modules/visibility_event_manager",[],function(){function e(e,t){function i(e){f=e}function o(){t.subscribe("changeWidgetVisibilityRequest",function(r){var i=f.areasInWidget(r.widget),o=["willChangeWidgetVisibility",r.widget,r.visible].join("."),u=["didChangeWidgetVisibility",r.widget,r.visible].join(".");t.publish(o,r,n),e.all((i||[]).map(r.visible?a:s)).then(function(){t.publish(u,r,n)})},r),t.subscribe("changeAreaVisibilityRequest",function(e){return c(e.area,e.visible)},r),l(p,!0)}function a(e){return u(e,!0)}function s(e){return u(e,!1)}function u(e,r){var i=["changeAreaVisibilityRequest",e].join("."),o={area:e,visible:r};return t.publishAndGatherReplies(i,o,n).then(function(t){if(0===t.length)return c(e,r);var n=t[0];return l(e,n.event.visible)})}function c(e,r){var i=["willChangeAreaVisibility",e,r].join("."),o={area:e,visible:r};t.publish(i,o,n).then(function(){return l(e,r)}).then(function(){var i=["didChangeAreaVisibility",e,r].join(".");return t.publish(i,o,n)})}function l(t,n){f.setVisibility(t,n);var r=f.areasInArea(t);return r?e.all(r.map(n?a:s)):e.when()}var f,d={initialize:o,setAreaHelper:i},p="";return d}var t="axPageController",n={sender:t,deliverToSender:!1},r={subscriber:t};return e}),define("laxar/lib/portal/modules/page",["angular","../../utilities/assert","../../directives/layout/layout","../portal_assembler/page_loader","../portal_assembler/widget_loader","../paths","./area_helper","./locale_event_manager","./visibility_event_manager"],function(e,t,n,r,i,o,a,s,u){var c=e.module("laxar.portal.page",[n.name]),l="axPageController",f="axPageService";return c.service(f,[function(){var e;return{controller:function(){return e},registerPageController:function(t){return e=t,function(){e=null}},controllerForScope:function(){return e}}}]),c.controller(l,["$scope",f,"axVisibilityService","$q","Configuration","LayoutLoader","EventBus","FileResourceProvider","ThemeManager","$timeout",function(n,c,f,d,p,h,v,g,m,y){function b(t){var n=[];return e.forEach(t.areas,function(e,t){e.forEach(function(e){e.area=t,n.push(e)})}),n}function w(){return v.publishAndGatherReplies("beginLifecycleRequest.default",N,D)}function _(){return v.publish("didChangeTheme."+C,{theme:C},D)}function x(e){var t=i.create(d,g,v,{theme:m.getTheme(),anchorScope:n}),r=d.defer(),o=k.loadPage(e).then(function(e){E=a(d,e,f),j.setAreaHelper(E),T.areas=E,h.load(e.layout).then(r.resolve),O.subscribe();var n=b(e);return d.all(n.map(function(e){return t.load(e)}))}).then(function(e){A=e}).then(O.initialize).then(_).then(w).then(j.initialize),s=r.promise.then(function(e){R(e)}),u=o.then(function(){return y(function(){},5,!1)});return d.all([s,u]).then(function(){E.attachWidgets(A)}),o}function $(){return O.unsubscribe(),v.publishAndGatherReplies("endLifecycleRequest.default",N,D).then(function(){A.forEach(function(e){e.destroy()}),A=[]})}function S(e){R=e}var E,T=this,k=r.create(d,null,o.PAGES,g),A=[],C=m.getTheme(),O=s(d,v,p),j=u(d,v,E),N={lifecycleId:"default"},D={sender:l},R=function(e){t.codeIsUnreachable("No renderer for page layout "+e.className)},q=c.registerPageController(this);n.$on("$destroy",q),this.setupPage=x,this.tearDownPage=$,this.registerLayoutRenderer=S}]),c.directive("axPage",["$compile",function(e){var t=[{name:"activities",hidden:!0},{name:"popups"},{name:"popovers"}];return{restrict:"A",template:'<div data-ng-class="layoutClass"></div>',replace:!0,scope:!0,controller:l,link:function(n,r,i,o){o.registerLayoutRenderer(function(i){n.layoutClass=i.className,r.html(i.htmlContent),e(r.contents())(n);var a=t.reduce(function(e,t){return o.areas.exists(t.name)?e:e+'<div data-ax-widget-area="'+t.name+'"'+(t.hidden?' style="display: none;"':"")+"></div>"},"");a&&r.append(e(a)(n))})}}}]),c}),define("laxar/lib/profiling/output",["angular"],function(e){function t(t,n,c){var l=t.items,f=!!c.match(/^[A-Za-z0-9]{3}$/)&&c in l,d=c,p=[];f?p=l[c].watchers:(d=t.widgetIdToScopeId[c],p=o(Object.keys(l).map(function(e){return l[e]}).filter(function(e){return e.context.widgetId===c}),function(e){return e.watchers}));var h=[].slice.call(u.document.getElementsByClassName("ng-scope"),0).concat([u.document]).map(function(t){return{element:t,scope:e.element(t).scope()}}).filter(function(e){return e.scope.$id===d})[0]||null;a('Showing details for %s with id "%s"',f?"scope":"widget",c),h&&a("Context: Scope: %o, Element %o",h.scope,h.element);var v=p.map(function(e){var t={};if(!n||"watchFn"===n){var o=e.watchFn;t.Watcher=o.name,t["Watcher ms total"]=i(o.time,3),t["Watcher ms average"]=i(r(o.time,o.count),3),t["Watcher # executions"]=o.count}if(!n||"listener"===n){var a=e.listener;t.Listener=a.name,t["Listener ms total"]=i(a.time,3),t["Listener ms average"]=i(r(a.time,a.count),3),t["Listener # executions"]=a.count}return t});s(v)}function n(t,n){var o=t.items,a=[],u=0,c=0,l=0,f=0,d={};e.forEach(o,function(e,t){var n=e.context.widgetId;return n?(n in d||(d[n]={context:e.context,watchers:[]}),void[].push.apply(d[n].watchers,e.watchers)):void(d[t]=e)}),e.forEach(d,function(e){var t=0,o=0,s=0,d=0;e.watchers.forEach(function(e){t+=e[n].time,o+=e[n].count,s+="f"===e[n].type?1:0,d+="s"===e[n].type?1:0},0),a.push({"Widget name":e.context.widgetName||"?","Widget id":e.context.widgetId||"?","Scope id":e.context.widgetScopeId||e.context.scopeId,"# functions":s,"# strings":d,"# total:":s+d,"ms total":i(t,3),"ms average":i(r(t,o),3),"# of executions":o}),u+=s,c+=d,l+=t,f+=o}),a.push({"Widget name":"","Widget id":"","Scope id":"Total:","# functions":u,"# strings":c,"# total:":u+c,"ms total":i(l,3),"ms average":i(r(l,f),3),"# of executions":f}),s(a)}function r(e,t){return t>0?e/t:0}function i(e,t){var n=0===t?1:Math.pow(10,t);return Math.round(e*n)/n}function o(e,t){return Array.prototype.concat.apply([],e.map(t))}function a(){u.console&&u.console.log&&Function.apply.apply(u.console.log,[u.console,arguments])}function s(e){u.console.table?u.console.table(e):a(JSON.stringify(e,null,2))}var u;return{create:function(e){return u=e,{log:a,logForId:t,logAll:n}}}}),define("laxar/lib/profiling/profiling",["angular","./output"],function(e,t){function n(e,t,n,s){var u="function"==typeof t,f="function"==typeof n,d=c.items,p=o(e);e.$id in d||(d[e.$id]={context:p,watchers:[]},e.$on("$destroy",function(){r(e),delete d[e.$id]})),p.widgetScopeId&&(p.widgetId in c.widgetIdToScopeId||(c.widgetIdToScopeId[p.widgetId]=p.widgetScopeId));var h={watchFn:{type:u?"f":"s",name:u?a(t)+"()":t,time:0,count:0},listener:{type:f?"f":"s",name:f?a(n)+"()":n,time:0,count:0}};d[e.$id].watchers.push(h);var v=l.call(e,t,n,s),g=e.$$watchers[0];return g.get=i(g.get,h.watchFn),g.fn=i(g.fn,h.listener),function(){v(),r(e)}}function r(e){delete c.items[e.$id],Object.keys(c.widgetIdToScopeId).forEach(function(t){c.widgetIdToScopeId[t]===e.$id&&delete c.widgetIdToScopeId[t]})}function i(e,t){return function(){var n=f.performance.now(),r=e.apply(null,arguments),i=f.performance.now()-n;return++t.count,t.time+=i,r}}function o(e){for(var t=e;!t.hasOwnProperty("widget")&&t!==t.$root;)t=t.$parent;var n=!!t.widget;return{widgetName:n?t.widget.path:"",widgetId:n?t.widget.id:"",widgetScopeId:n?t.$id:null,scopeId:e.$id}}function a(e){if(e.name&&"string"==typeof e.name)return e.name;var t=h.exec(e.toString());return t?t[1].trim():"[anonymous]"}function s(){d.log('Available commands:\n\n - help():\n     prints this help\n\n - log( [scopeOrWidgetId] ):\n     If the argument is omitted this is the same as calling\n     logWatchers() first and logListeners() afterwards.\n     Otherwise all listeners and watchers of the widget or scope\n     with the given id are logged in one table\n\n - logWatchers( [scopeOrWidgetId] ):\n     If the argument is omitted the watchers of all scopes belonging to\n     a specific widget or of global scopes are logged.\n     Otherwise more detailed data for the watchers of the given scope\n     or widget are logged.\n\n - logListeners( [scopeOrWidgetId] ):\n     If the argument is omitted the listeners of all scopes belonging to\n     a specific widget or of global scopes are logged.\n     Otherwise more detailed data for the listeners of the given scope\n     or widget are logged.\n\n - reset():\n     Resets all "# of executions" and millisecond data to zero.')}var u,c,l,f,d,p=e.module("laxar.profiling",[]);p.run(["$rootScope","$window","Configuration",function(e,r,i){if(f=r,u=i.get("profiling",{enabled:!1}),d=t.create(r),u.enabled===!0){if(!f.performance||!f.performance.now)return void d.log("Performance api is not available. Profiling is disabled.");d.log("%c!!! Profiling enabled. Application performance will suffer !!!","font-weight: bold; font-size: 1.2em"),d.log('Type "axProfiling.help()" to get a list of available methods');var o=e.constructor.prototype;c=r.axProfiling={items:{},widgetIdToScopeId:{},logWatchers:function(e){e&&"string"==typeof e?d.logForId(c,"watchFn",e):d.logAll(c,"watchFn")},logListeners:function(e){e&&"string"==typeof e?d.logForId(c,"listener",e):d.logAll(c,"listener")},log:function(e){e&&"string"==typeof e?d.logForId(c,null,e):(d.log("All listeners:"),d.logAll(c,"listener"),d.log("All watchers:"),d.logAll(c,"watchFn"))},reset:function(){Object.keys(c.items).forEach(function(e){c.items[e].watchers.forEach(function(e){e.watchFn.time=0,e.watchFn.count=0,e.listener.time=0,e.listener.count=0})})},help:s},l=o.$watch,o.$watch=function(e,t,r){return n(this,e,t,r||!1)}}}]);var h=/^[ ]*function([^\(]*?)\(/;return p}),define("laxar/lib/portal/portal_dependencies",["angular","angular-sanitize","./modules/portal_services","./modules/flow","./modules/page","./portal_assembler/widget_adapters/angular_adapter","../directives/directives","../profiling/profiling"],function(e,t,n,r,i,o,a,s){return e.module("laxar.portal.dependencies",["ngSanitize",n.name,r.name,i.name,o.module.name,a.id.name,a.widgetArea.name,a.pageFade.name,s.name])}),define("laxar/laxar",["angular","./lib/logging/log","./lib/logging/channels/console_logger","./lib/directives/directives","./lib/text/text","./lib/i18n/i18n","./lib/utilities/assert","./lib/utilities/array","./lib/utilities/fn","./lib/utilities/object","./lib/utilities/storage","./lib/utilities/string","./lib/portal/configuration","./lib/portal/portal","./lib/portal/portal_dependencies"],function(e,t,n,r,i,o,a,s,u,c,l,f,d){function p(n){h();var r=d.get("logging.threshold");r&&t.setLogThreshold(r),t.addLogChannel(t.channels.console),t.trace("Bootstrapping portal ... ");var i=["laxar.portal","laxar.portal.dependencies"].concat(n);e.element(document).ready(function(){e.bootstrap(document,i)})}function h(){var n={logThreshold:"logging.threshold",locales:"i18n.locales",entryPoint:"portal.flow.entryPoint",exitPoints:"portal.flow.exitPoints",fileListings:"file_resource_provider.listings",theme:"portal.theme",useMergedCss:"portal.useMergedCss"},r=new Function("return this")();e.forEach(n,function(e,n){var i=c.path(r.laxar,n);if(void 0!==i){t.warn('Found deprecated configuration key "[0]". Use "[1]" instead.',n,e);var o=c.path(r.laxar,e);void 0===o&&c.setPath(r.laxar,e,i)}})}return{assert:a,array:s,bootstrap:p,configuration:d,directives:r,fn:u,i18n:o,log:t,object:c,storage:l,string:f,text:i}}),define("laxar",["laxar/laxar"],function(e){return e}),define("laxar_patterns/lib/actions",["laxar"],function(e){function t(t,r,i){var o=e.object.path(t.features,r+".action",null);return n(t,o,i)}function n(t,n,r){e.assert(t).hasType(Object).hasProperty("eventBus"),e.assert(n).hasType(String).isNotNull();var i=e.object.options(r,{deliverToSender:!1,onSuccess:s,onError:s,onComplete:s});e.assert(i.onSuccess).hasType(Function).isNotNull(),e.assert(i.onError).hasType(Function).isNotNull(),e.assert(i.onComplete).hasType(Function).isNotNull();var o={deliverToSender:i.deliverToSender};return i.timeout>0&&(o.pendingDidTimeout=i.timeout),function(r){var a=e.object.options(r,{action:n});return t.eventBus.publishAndGatherReplies("takeActionRequest."+n,a,o).then(function(e){var t=e.some(function(e){return e.event.outcome===l});if(i.onComplete(e.slice(0)),t)throw i.onError(e.slice(0)),e;return i.onSuccess(e.slice(0)),e})}}function r(t){return e.assert(t).hasType(Object).hasProperty("eventBus"),new i(t)}function i(e){this.scope_=e}function o(e,t,n,r,i){var o,a;try{o=n(r,i)}catch(s){a=s}var f=o===l||a?l:c;if(e.publish("didTakeAction."+t+"."+f,{action:t,outcome:f},u),a)throw a}function a(e,t,n,r,i){function o(n){if(!f){f=!0;var r=n===l?l:c;e.publish("didTakeAction."+t+"."+r,{action:t,outcome:r},u)}}e.publish("willTakeAction."+t,{action:t},u);try{var a=n(r,i,o);a&&"function"==typeof a.then&&a.then(o.bind(null,c),o.bind(null,l))}catch(s){throw e.publish("didTakeAction."+t+"."+l,{action:t,outcome:l},u),s}var f=!1}var s=function(){},u={deliverToSender:!1},c="SUCCESS",l="ERROR";return i.prototype.registerActionsFromFeature=function(t,n,r){var i=e.object.path(this.scope_.features,t+".onActions")||[];return this.registerActions(i,n,r)},i.prototype.registerActions=function(t,n,r){e.assert(t).hasType(Array).isNotNull(),e.assert(n).hasType(Function).isNotNull();var i=e.object.options(r,{async:!1}),s=this;return t.forEach(function(e){s.scope_.eventBus.subscribe("takeActionRequest."+e,function(t,r){i.async?a(s.scope_.eventBus,e,n,t,r):o(s.scope_.eventBus,e,n,t,r)})}),this},{publisher:n,publisherForFeature:t,handlerFor:r,OUTCOME_ERROR:l,OUTCOME_SUCCESS:c}}),define("laxar_patterns/lib/errors",["laxar"],function(e){function t(t,r,i){n(t).hasType(Object).isNotNull(),n(t.eventBus).hasType(Object).isNotNull(),n(i).hasType(Object);var o=i&&i.localizer;n(o).hasType(Function);var a=e.object.path(t.features,r);return n(a).hasType(Object).isNotNull(),function(r,i,s,u){var c=e.object.path(a,i);n(c).isNotNull(),s=s||{},t.eventBus.publish("didEncounterError."+r,{code:r,message:e.string.format(o?o(c):c,[],s),data:s,cause:u||{}},{deliverToSender:!1})}}var n=e.assert;return{errorPublisherForFeature:t}}),define("laxar_patterns/lib/patches",["laxar"],function(e){function t(t,n){if(Array.isArray(n)){var r=n;n={},r.forEach(function(e,t){"undefined"!=typeof e&&(n[t]=e)})}Object.keys(n).sort(function(e,t){return e.length-t.length}).forEach(function(r){e.object.setPath(t,r,n[r])})}function n(e,t){function n(e,t,i){var o;for(o in e)if(e.hasOwnProperty(o)&&("$"!==o.charAt(0)||"$"!==o.charAt(1))){var s=e[o],c=i.concat(o);null==t[o]?u[c.join(".")]=r(a(s)):s&&"object"==typeof s?n(s,t[o],c):s!==t[o]&&(u[c.join(".")]=s)}for(o in t)t.hasOwnProperty(o)&&(o in e||(u[i.concat(o).join(".")]=null))}var i=o(e),s=o(t);if("array"!==i&&"object"!==i)return null;
if(i!==s)return a(e);var u={};return n(e,t,[]),u}function r(e){if(null===e)return e;for(var t in e)e.hasOwnProperty(t)&&("$"===t.charAt(0)&&"$"===t.charAt(1)?delete e[t]:"object"==typeof e[t]&&r(e[t]));return e}function i(e,n){var r={},i=Object.keys(e),o=Object.keys(n);return i.forEach(function(t){for(var n=0;n<o.length;++n)if(t===o[n]||0===t.indexOf(o[n]+"."))return;r[t]=e[t]}),o.forEach(function(o){for(var a=0;a<i.length;++a){var s=i[a],u=s+".";if(0===o.indexOf(u)){var c={};c[o.replace(u,"")]=n[o];var l=e[s];return t(l,c),void(r[s]=l)}}r[o]=n[o]}),r}function o(e){if(null===e)return"null";if("undefined"==typeof e)return"undefined";var t=Object.prototype.toString.call(e).split(" ")[1];return t?t.substr(0,t.length-1).toLowerCase():void 0}var a=e.object.deepClone;return{apply:t,create:n,merge:i}}),define("laxar_patterns/lib/flags",["laxar","underscore","./patches"],function(e,t,n){function r(e){return new i(e)}function i(e){this.scope_=e}return i.prototype={registerFlagFromFeature:function(t,n){return this.registerFlag(e.object.path(this.scope_.features,t,[]),n)},registerFlag:function(e,r){r=t.defaults(r||{},{predicate:"any"});var i=t.identity;"scopeKey"in r&&(i=function(e){n.apply(this.scope_,t.object([r.scopeKey],[e]))}.bind(this));var o=this.processFlags_(e),a=this.processChangeHandlers_(r.onChange),s="boolean"==typeof r.initialState?r.initialState:this.evaluateState_(o,r.predicate);return i(s),o.forEach(function(e){this.scope_.eventBus.subscribe("didChangeFlag."+e.name,function(t){e.state=e.negated?!t.state:t.state;var n=this.evaluateState_(o,r.predicate);n!==s&&(i(n),a(n,s),s=n)}.bind(this))}.bind(this)),this},processFlags_:function(e){if(!e)return[];var n=t.isArray(e)?e:[e];return n.map(function(e){var t=0===e.indexOf("!");return{name:t?e.substr(1):e,negated:t,state:t}})},processChangeHandlers_:function(e){if(!e)return function(){};var n=t.isArray(e)?e:[e];return function(e,t){n.forEach(function(n){n(e,t)})}},evaluateState_:function(e,t){var n=e.reduce(this.evaluators_[t],null);return null===n?!1:n},evaluators_:{any:function(e,t){return null===e?t.state:t.state||e},all:function(e,t){return null===e?t.state:t.state&&e}}},{handlerFor:r}}),define("laxar_patterns/lib/i18n",["laxar"],function(e){function t(t,n){function r(r){var i=r.locale,a=e.object.path(t,n).tags,s=a[i];s!==r.languageTag&&(a[i]=r.languageTag,o[i].forEach(function(e){e(r,s)}))}function i(){var r=e.object.path(t,n);r||(r={},e.object.setPath(t,n,r)),r.tags||(r.tags={})}n=n||"i18n",i();var o={},a={registerLocale:function(e,n){var i=e;return Array.isArray(e)||(i=e?[e]:[]),i.forEach(function(e){o[e]||(o[e]=[],t.eventBus.subscribe("didChangeLocale."+e,r));var i=n.onChange;i&&(o[e]=o[e].concat(Array.isArray(i)?i:[i]))}),a},registerLocaleFromFeature:function(n,r){var i=e.object.path(t.features,n);return a.registerLocale(i.locale||i,r||{})},scopeLocaleFromFeature:function(n,r){var i=e.object.path(t.features,n);return t.i18n.locale=i.locale||i,a.registerLocale(t.i18n.locale,r||{})},localizer:function(r){function i(t){if("string"==typeof t)return t;var n=o.tags[o.locale];return n?e.i18n.localizer(n,r)(t):r}var o=e.object.path(t,n);return i.format=function(){var t=e.i18n.localizer(o.tags[o.locale]);return t.format.apply(t,arguments)},i}};return a}return{handlerFor:t}});var jsonpatch;!function(e){function t(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function n(e,r){var i;for(var o in e)if(e.hasOwnProperty(o)){if(e[o]===r)return t(o)+"/";if("object"==typeof e[o]&&(i=n(e[o],r),""!=i))return t(o)+"/"+i}return""}function r(e,t){if(e===t)return"/";var r=n(e,t);if(""===r)throw new Error("Object not found in root");return"/"+r}function i(e){for(var t=0,n=y.length;n>t;t++)if(y[t].obj===e)return y[t]}function o(e,t){for(var n=0,r=e.observers.length;r>n;n++)if(e.observers[n].callback===t)return e.observers[n].observer}function a(e,t){for(var n=0,r=e.observers.length;r>n;n++)if(e.observers[n].observer===t)return void e.observers.splice(n,1)}function s(e,t){f(t),Object.observe?l(t,e):clearTimeout(t.next);var n=i(e);a(n,t)}function u(e,t){var n,a=[],s=e,u=i(e);if(u?n=o(u,t):(u=new b(e),y.push(u)),n)return n;if(Object.observe)n=function(i){l(n,e),c(n,e);for(var o=0,u=i.length;u>o;){if(("length"!==i[o].name||!x(i[o].object))&&"__Jasmine_been_here_before__"!==i[o].name){var f=i[o].type;switch(f){case"new":f="add";break;case"deleted":f="delete";break;case"updated":f="update"}m[f].call(i[o],a,r(s,i[o].object))}o++}a&&t&&t(a),n.patches=a,a=[]};else if(n={},u.value=JSON.parse(JSON.stringify(e)),t){n.callback=t,n.next=null;var d=this.intervals||[100,1e3,1e4,6e4];if(void 0===d.push)throw new Error("jsonpatch.intervals must be an array");var p=0,h=function(){f(n)},v=function(){clearTimeout(n.next),n.next=setTimeout(function(){h(),p=0,n.next=setTimeout(g,d[p++])},0)},g=function(){h(),p==d.length&&(p=d.length-1),n.next=setTimeout(g,d[p++])};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mousedown",v),window.addEventListener("mouseup",v),window.addEventListener("keydown",v)):(window.attachEvent("onmousedown",v),window.attachEvent("onmouseup",v),window.attachEvent("onkeydown",v))),n.next=setTimeout(g,d[p++])}return n.patches=a,n.object=e,u.observers.push(new w(t,n)),c(n,e)}function c(e,t){if(Object.observe){Object.observe(t,e);for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r&&"object"==typeof r&&c(e,r)}}return e}function l(e,t){if(Object.observe){Object.unobserve(t,e);for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r&&"object"==typeof r&&l(e,r)}}return e}function f(e){if(Object.observe)Object.deliverChangeRecords(e);else{for(var t,n=0,r=y.length;r>n;n++)if(y[n].obj===e.object){t=y[n];break}d(t.value,e.object,e.patches,"")}var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function d(e,n,r,i){for(var o=_(n),a=_(e),s=!1,u=!1,c=a.length-1;c>=0;c--){var l=a[c],f=e[l];if(n.hasOwnProperty(l)){var p=n[l];f instanceof Object?d(f,p,r,i+"/"+t(l)):f!=p&&(s=!0,r.push({op:"replace",path:i+"/"+t(l),value:p}),e[l]=p)}else r.push({op:"remove",path:i+"/"+t(l)}),delete e[l],u=!0}if(u||o.length!=a.length)for(var c=0;c<o.length;c++){var l=o[c];e.hasOwnProperty(l)||(r.push({op:"add",path:i+"/"+t(l),value:n[l]}),e[l]=JSON.parse(JSON.stringify(n[l])))}}function p(e,t){for(var n,r=!1,i=0,o=t.length;o>i;){n=t[i];for(var a=n.path.split("/"),s=e,u=1,c=a.length;;)if(x(s)){var l=parseInt(a[u],10);if(u++,u>=c){r=g[n.op].call(n,s,l,e);break}s=s[l]}else{var f=a[u];if(-1!=f.indexOf("~")&&(f=f.replace(/~1/g,"/").replace(/~0/g,"~")),u++,u>=c){r=v[n.op].call(n,s,f,e);break}s=s[f]}i++}return r}function h(e,t){var n=[];return d(JSON.parse(JSON.stringify(e)),t,n,""),n}var v={add:function(e,t){return e[t]=this.value,!0},remove:function(e,t){return delete e[t],!0},replace:function(e,t){return e[t]=this.value,!0},move:function(e,t,n){var r={op:"_get",path:this.from};return p(n,[r]),p(n,[{op:"remove",path:this.from}]),p(n,[{op:"add",path:this.path,value:r.value}]),!0},copy:function(e,t,n){var r={op:"_get",path:this.from};return p(n,[r]),p(n,[{op:"add",path:this.path,value:r.value}]),!0},test:function(e,t){return JSON.stringify(e[t])===JSON.stringify(this.value)},_get:function(e,t){this.value=e[t]}},g={add:function(e,t){return e.splice(t,0,this.value),!0},remove:function(e,t){return e.splice(t,1),!0},replace:function(e,t){return e[t]=this.value,!0},move:v.move,copy:v.copy,test:v.test,_get:v._get},m={add:function(e,n){var r={op:"add",path:n+t(this.name),value:this.object[this.name]};e.push(r)},"delete":function(e,n){var r={op:"remove",path:n+t(this.name)};e.push(r)},update:function(e,n){var r={op:"replace",path:n+t(this.name),value:this.object[this.name]};e.push(r)}},y=[];e.intervals;var b=function(){function e(e){this.observers=[],this.obj=e}return e}(),w=function(){function e(e,t){this.callback=e,this.observer=t}return e}();e.unobserve=s,e.observe=u,e.generate=f;var _;_=Object.keys?Object.keys:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};var x;x=Array.isArray?Array.isArray:function(e){return e.push&&"number"==typeof e.length},e.apply=p,e.compare=h}(jsonpatch||(jsonpatch={})),"undefined"!=typeof exports&&(exports.apply=jsonpatch.apply,exports.observe=jsonpatch.observe,exports.unobserve=jsonpatch.unobserve,exports.generate=jsonpatch.generate,exports.compare=jsonpatch.compare),define("json-patch",function(e){return function(){var t;return t||e.jsonpatch}}(this)),define("laxar_patterns/lib/json",["laxar","json-patch"],function(e,t,n){function r(e,t,r){for(var i=t.split("/"),o=i.length,a=-1!==t.indexOf("~"),s=1;o>s;++s){if(e===n)return r;if(Array.isArray(e)){var u=parseInt(i[s],10);e=e[u]}else{var c=i[s];a&&(c=c.replace(/~1/g,"/").replace(/~0/g,"~")),e=e[c]}}return e===n?r:e}function i(t,n,r){var i=o(n);return e.object.setPath(t,i,r)}function o(e){var t=e.split("/").slice(1);if(-1!==e.indexOf("~"))for(var n=t.length,r=0;n>r;++r)t[r]=t[r].replace(/~1/g,"/").replace(/~0/g,"~");return t.join(".")}function a(e){if(""===e)return"";var t=e.split(".");if(-1!==e.indexOf("/")||-1!==e.indexOf("~"))for(var n=t.length,r=0;n>r;++r)t[r]=t[r].replace(/~/g,"~0").replace(/\//g,"~1");return"/"+t.join("/")}function s(e,n){t.apply(e,n)}return{getPointer:r,setPointer:i,pointerToPath:o,pathToPointer:a,applyPatch:s,createPatch:t.compare}}),define("laxar_patterns/lib/resources",["laxar","underscore","./patches","json-patch"],function(e,t,n,r){function i(e,t){p(e).hasType(Object).isNotNull(),p(t).hasType(String).isNotNull();var n=f(e,"resources");return function(e){return null==n[t]&&null==e.data?!1:(n[t]=e.data,!0)}}function o(e,i){p(e).hasType(Object).isNotNull(),p(i).hasType(String).isNotNull();var o=f(e,"resources");return function(e){return t.isEmpty(e.data)&&t.isEmpty(e.updates)&&null==o[i]?!1:Array.isArray(e.patches)?(r.apply(o[i],e.patches),!0):("data"in e&&(t.isObject(o[i])&&t.isObject(e.data)?t.extend(o[i],e.data):o[i]=e.data),"updates"in e&&n.apply(o[i],e.updates),!0)}}function a(t,n,r){p(t).hasType(Object).isNotNull(),p(t.eventBus).hasType(Object).isNotNull();var i=e.object.path(t.features,n+".resource");p(i).hasType(String).isNotNull();var o=e.object.options(r,{deliverToSender:!1});return function(e){return t.eventBus.publish("didReplace."+i,{resource:i,data:e},{deliverToSender:!!o.deliverToSender})}}function s(t,n,i){p(t).hasType(Object).isNotNull(),p(t.eventBus).hasType(Object).isNotNull();var o=e.object.path(t.features,n+".resource");p(o).hasType(String).isNotNull();var a=e.object.options(i,{deliverToSender:!1,jsonPatchOnly:!1}),s=function(e,n,r){var i={resource:o};return null!=e&&(i.updates=e),null!=n&&(i.data=n),null!=r&&(i.patches=r),t.eventBus.publish("didUpdate."+o,i,{deliverToSender:!!a.deliverToSender})},u=s.bind(null,null,null);return a.jsonPatchOnly&&(s=u),s.compareAndPublish=function(e,t){var n=r.compare(e,t);return u(n)},s}function u(e){return new c(e)}function c(e){this.scope_=e,this.externalHandlers_={},this.modelHandlers_={},this.waitingFor_=[],this.allReplacedCallback_=t.identity}function l(e,n){return"function"==typeof n?void e.push(n):void(t.isArray(n)&&Array.prototype.push.apply(e,n))}function f(e,t){var n={};return e.hasOwnProperty(t)&&"object"==typeof e[t]?n=e[t]:"object"==typeof e.model?n=e.model:e.model=n,n}function d(e,t,n){if(null==e||null==t)return!1;for(var r=0,i=0;i<n.length;++i){var o=n[i];if(o in e||o in t){if(e[o]!==t[o])return!1;++r}}return r>0}var p=e.assert;return c.prototype={registerResourceFromFeature:function(t,n){var r=e.object.path(this.scope_.features,t+".resource",null);return n=e.object.options(n,{isOptional:!1}),null===r&&n.isOptional?this:(p(r).isNotNull('Could not find resource configuration in features for "'+t+'"'),n.modelKey||(n.modelKey=t.substr(t.lastIndexOf(".")+1)),this.registerResource(r,n))},registerResource:function(n,r){return p(n).hasType(String).isNotNull(),r=t.defaults(e.object.deepClone(r||{}),{omitFirstReplace:!1,modelKey:n}),this.waitingFor_.push(n),this.registerResourceHandlers_(n,r),n in this.modelHandlers_||(this.modelHandlers_[n]={}),this.registerForReplace_(n,r),this.registerForUpdate_(n,r),this},whenAllWereReplaced:function(e,n){return p(e).hasType(Function).isNotNull(),this.allReplacedCallback_=n&&n.watch?e:t.once(e),this},wereAllReplaced:function(){return!this.waitingFor_.length},registerResourceHandlers_:function(e,n){this.externalHandlers_[e]||(this.externalHandlers_[e]={onReplace:[],onUpdate:[]}),l(this.externalHandlers_[e].onUpdate,n.onUpdate),l(this.externalHandlers_[e].onUpdate,n.onUpdateReplace);var r=[];l(r,n.onReplace),l(r,n.onUpdateReplace),n.omitFirstReplace&&(r=r.map(function(e){return t.after(2,e)})),l(this.externalHandlers_[e].onReplace,r)},registerForReplace_:function(e,n){var r=i(this.scope_,n.modelKey);return this.modelHandlers_[e].onReplace?void this.modelHandlers_[e].onReplace.push(r):(this.modelHandlers_[e].onReplace=[r],void this.scope_.eventBus.subscribe("didReplace."+e,function(n){var r=this.modelHandlers_[e].onReplace.reduce(function(e,t){return t(n)||e},!1);if(r)try{this.externalHandlers_[e].onReplace.forEach(function(e){e(n)})}finally{this.waitingFor_=t.without(this.waitingFor_,e),this.waitingFor_.length||this.allReplacedCallback_()}}.bind(this)))},registerForUpdate_:function(e,t){var n=o(this.scope_,t.modelKey);return this.modelHandlers_[e].onUpdate?void this.modelHandlers_[e].onUpdate.push(n):(this.modelHandlers_[e].onUpdate=[n],void this.scope_.eventBus.subscribe("didUpdate."+e,function(t){var n=this.modelHandlers_[e].onUpdate.reduce(function(e,n){return n(t)||e},!1);if(n)try{this.externalHandlers_[e].onUpdate.forEach(function(e){e(t)})}finally{this.waitingFor_.length||this.allReplacedCallback_()}}.bind(this)))}},{replaceHandler:i,updateHandler:o,replacePublisherForFeature:a,updatePublisherForFeature:s,isSame:d,handlerFor:u}}),define("laxar_patterns/lib/validation",[],function(){function e(e,t,n){var r=[];return t&&t.length&&(r=t.map(function(e){return e.htmlMessage&&e.level?e:{htmlMessage:e,level:"ERROR"}})),{resource:e,data:r,outcome:n}}function t(e,t){return Array.isArray(e)?e:[].slice.call(t,1)}return{successEvent:function(n,r){return e(n,t(r,arguments),"SUCCESS")},errorEvent:function(n,r){return e(n,t(r,arguments),"ERROR")}}}),define("laxar_patterns/lib/visibility",["laxar","./patches"],function(e){function t(e,t){return new n(e,t)}function n(t,n){this.scope_=t,t.isVisible=!1;var i=e.object.options(n,{});if(i.onAnyAreaRequest){var o=["changeAreaVisibilityRequest",t.widget.id].join(".");t.eventBus.subscribe(o,r(this,i.onAnyAreaRequest))}var a=["didChangeAreaVisibility",t.widget.area].join(".");t.eventBus.subscribe(a,function(e){var n=t.isVisible||!1;t.isVisible=e.visible,n!==e.visible&&(i.onChange&&i.onChange(e),i.onShow&&e.visible?i.onShow(e):i.onHide&&!e.visible&&i.onHide(e))})}function r(e,t){return function(n){var r=t(n);if(r===!0||r===!1){var i=["didChangeAreaVisibility",n.area,r].join(".");e.scope_.eventBus.publish(i,{area:n.area,visible:r},{deliverToSender:!1})}}}function i(e){return function(t){var n=["changeWidgetVisibilityRequest",e.widget.id,t].join(".");return e.eventBus.publish(n,{widget:e.widget.id,visible:t},{deliverToSender:!1})}}function o(e,t){return function(n){return e.eventBus.publish(["changeAreaVisibilityRequest",t,n].join("."),{area:t,visible:n},{deliverToSender:!1})}}return n.prototype={registerArea:function(t,n){var i=e.object.options(n,{});if(i.onRequest){var o=["changeAreaVisibilityRequest",t].join(".");this.scope_.eventBus.subscribe(o,r(this,i.onRequest))}return this}},{handlerFor:t,requestPublisherForWidget:i,requestPublisherForArea:o}}),define("laxar_patterns/laxar_patterns",["./lib/actions","./lib/errors","./lib/flags","./lib/i18n","./lib/json","./lib/patches","./lib/resources","./lib/validation","./lib/visibility"],function(e,t,n,r,i,o,a,s,u){return{actions:e,errors:t,flags:n,i18n:r,json:i,patches:o,resources:a,validation:s,visibility:u}}),define("laxar_patterns",["laxar_patterns/laxar_patterns"],function(e){return e}),define("../includes/widgets/shop_demo/order_activity/order_activity",["angular","pouchdb","laxar","laxar_patterns"],function(e,t,n,r){function i(e){function i(t){return e.resources.cart?(e.eventBus.publish("willTakeAction."+t.action,t),void a.post({articles:e.resources.cart.entries}).then(function(){o(t.action,"SUCCESS"),e.eventBus.publish("navigateRequest."+s.order.target,{target:s.order.target,data:{}})},function(){o(t.action,"ERROR")})):(o(t.action,"SUCCESS"),void n.log.warn("Order request for empty cart"))}function o(t,n){e.eventBus.publish("didTakeAction."+t+"."+n,{action:t,outcome:n})}var a=new t(e.features.database.pouchDb.dbId);e.resources={};var s=e.features;r.resources.handlerFor(e).registerResourceFromFeature("cart"),e.eventBus.subscribe("takeActionRequest."+s.order.action,i)}var o="widgets.shop_demo.order_activity",a=e.module(o,[]);return i.$inject=["$scope"],a.controller(o+".Controller",i),a}),define("../includes/widgets/shop_demo/article_search_box_widget/articles_data",[],function(){return[{id:"ORD001",details:{id:"001",name:"Cup",htmlDescription:"A cup with LaxarJS logo for hot drinks.",price:4.5}},{id:"ORD002",details:{id:"002",name:"Sticker",htmlDescription:"A beautiful sticker with LaxarJS logo.",price:.1}},{id:"ORD003",details:{id:"003",name:"Beer (Bottle)",htmlDescription:"Take a sip of pure LaxarJS beer.",price:.5}},{id:"ORD004",details:{id:"004",name:"Beer (Crate)",htmlDescription:"24 bottles of fine LaxarJS beer. Great beer!",price:13.99}},{id:"ORD005",details:{id:"005",name:"T-Shirt",htmlDescription:"A LaxarJS T-shirt with shining orange",price:20}},{id:"ORD006",details:{id:"006",name:"Chocolate Bar",htmlDescription:"Our LaxarJS chocolate bar with orange flavor.",price:.7}},{id:"ORD007",details:{id:"007",name:"Gummy Bear",htmlDescription:"LaxarJS Gummy Bear in different colors (orange and gray).",price:1.99}},{id:"ORD008",details:{id:"008",name:"Pen",htmlDescription:"Write your notes with the LaxarJS pen!",price:19.99}},{id:"ORD009",details:{id:"009",name:"Matches",htmlDescription:"Give me fire! Nice matches in a LaxarJS styled box.",price:.6}}]}),define("../includes/widgets/shop_demo/article_search_box_widget/article_search_box_widget",["angular","pouchdb","laxar","./articles_data"],function(e,t,n,r){function i(e){function i(){function e(e){e.details&&emit(e.id,e.details)}return s.query(e).then(function(t){return 0===t.rows.length?s.bulkDocs(r).then(function(){return s.query(e)}).then(function(e){return e.rows}):t.rows}).then(function(e){return e.map(function(e){return{id:e.id,details:e.value}})})}function o(e,t){if(t.length<2)return e;var n=t.toLowerCase();return e.filter(function(e){var t=e.details.name.toLowerCase(),r=e.details.htmlDescription.toLowerCase();return-1!==t.indexOf(n)||-1!==r.indexOf(n)})}function a(t){if(t){var n=e.features.resource;e.eventBus.publish("didReplace."+n,{resource:n,data:{entries:t}})}}e.model={searchTerm:""};var s=new t(e.features.database.pouchDb.dbId);e.eventBus.subscribe("beginLifecycleRequest",function(){e.search()}),e.search=function(){i().then(function(t){return o(t,e.model.searchTerm)}).then(a,function(e){n.log.debug(e)})}}var o="widgets.shop_demo.article_search_box_widget",a=e.module(o,[]);return i.$inject=["$scope"],a.controller(o+".Controller",i),a}),define("../includes/widgets/shop_demo/headline_widget/headline_widget",["angular"],function(e){function t(){}var n="widgets.shop_demo.headline_widget",r=e.module(n,[]);return t.$inject=["$scope"],r.controller(n+".Controller",t),r}),define("../includes/widgets/shop_demo/article_browser_widget/article_browser_widget",["angular","laxar","laxar_patterns","angular-sanitize"],function(e,t,n){function r(e){function r(){var n=e.resources,r=e.selectedArticle;if(null!==r){var i=t.object.path(n,"display.entries",[]);if(!i.length)return void e.selectArticle(null);var o=i.some(function(e){return e.id===r.id});o||e.selectArticle(null)}}e.resources={},e.selectedArticle=null,n.resources.handlerFor(e).registerResourceFromFeature("display",{onUpdateReplace:r}),e.selectArticle=function(t){e.selectedArticle=t;var n=e.features.select.resource;e.eventBus.publish("didReplace."+n,{resource:n,data:t},{deliverToSender:!1})}}var i="widgets.shop_demo.article_browser_widget",o=e.module(i,["ngSanitize"]);return r.$inject=["$scope"],o.controller(i+".Controller",r),o}),define("../includes/widgets/shop_demo/article_teaser_widget/article_teaser_widget",["angular","laxar_patterns","angular-sanitize"],function(e,t){function n(e){e.resources={},t.resources.handlerFor(e).registerResourceFromFeature("display"),e.addToCart=function(){var t=e.features.button.action;e.eventBus.publish("takeActionRequest."+t,{action:t})}}var r="widgets.shop_demo.article_teaser_widget",i=e.module(r,["ngSanitize"]);return n.$inject=["$scope"],i.controller(r+".Controller",n),i}),define("../includes/widgets/shop_demo/shopping_cart_widget/shopping_cart_widget",["angular","laxar","laxar_patterns","angular-sanitize"],function(e,t,n){function r(e){function r(n){if(e.eventBus.publish("willTakeAction."+n.action,n),null!=u.article){var r=i(u.article);if(-1===r){var o=t.object.deepClone(u.cart);u.cart.entries.push({article:u.article,quantity:1}),c.hint="",a(),l.compareAndPublish(o,u.cart)}else e.increaseQuantity(r)}e.eventBus.publish("didTakeAction."+n.action,n)}function i(e){for(var t=0;t<u.cart.entries.length;++t)if(u.cart.entries[t].article.id===e.id)return t;return-1}function o(){e.eventBus.publish("didReplace."+s.cart.resource,{resource:s.cart.resource,data:u.cart},{deliverToSender:!1})}function a(){u.cart.sum=0,u.cart.entries.forEach(function(e){u.cart.sum=u.cart.sum+100*e.quantity*e.article.details.price}),u.cart.sum=u.cart.sum/100}var s=e.features;e.resources={cart:{entries:[],sum:0}};var u=e.resources;e.model={hint:s.display.htmlNoItemsText};var c=e.model,l=n.resources.updatePublisherForFeature(e,"cart"),f=n.resources.updateHandler(e,"cart");e.eventBus.subscribe("didUpdate.cart",f),n.resources.handlerFor(e).registerResourceFromFeature("article"),e.features.article.onActions.forEach(function(t){e.eventBus.subscribe("takeActionRequest."+t,r)}),e.eventBus.subscribe("didTakeAction."+e.features.cart.order.action+".SUCCESS",function(){u.cart={entries:[]},o(),c.hint=s.display.htmlOrderedCartText}),e.eventBus.subscribe("didTakeAction."+e.features.cart.order.action+".ERROR",function(){c.hint=s.display.htmlOrderedCartErrorText}),e.eventBus.subscribe("beginLifecycleRequest",o),e.increaseQuantity=function(e){var n=t.object.deepClone(u.cart);u.cart.entries[e].quantity++,a(),l.compareAndPublish(n,u.cart)},e.decreaseQuantity=function(e){var n=t.object.deepClone(u.cart);1===u.cart.entries[e].quantity?(u.cart.entries.splice(e,1),a(),0===u.cart.entries.length?(c.hint=s.display.htmlNoItemsText,o()):l.compareAndPublish(n,u.cart)):(u.cart.entries[e].quantity--,a(),l.compareAndPublish(n,u.cart))},e.performOrder=function(){var t=e.features.cart.order.action;e.eventBus.publish("takeActionRequest."+t,{action:t})}}var i="widgets.shop_demo.shopping_cart_widget",o=e.module(i,["ngSanitize"]);return r.$inject=["$scope"],o.controller(i+".Controller",r),o}),define("portal_angular_dependencies",["../includes/widgets/shop_demo/order_activity/order_activity","../includes/widgets/shop_demo/article_search_box_widget/article_search_box_widget","../includes/widgets/shop_demo/headline_widget/headline_widget","../includes/widgets/shop_demo/article_browser_widget/article_browser_widget","../includes/widgets/shop_demo/article_teaser_widget/article_teaser_widget","../includes/widgets/shop_demo/shopping_cart_widget/shopping_cart_widget"],function(){return[].map.call(arguments,function(e){return e.name})}),require(["portal_angular_dependencies","laxar"],function(e,t){t.bootstrap(e)}),define("../init",function(){});
//# sourceMappingURL=optimized_init.js.map